<!doctype html><html lang=en dir=auto><head><script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script><meta name=referrer content="no-referrer-when-downgrade"></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://reid00.github.io/en/ accesskey=h title="Reid's Blog (Alt + H)">Reid's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li></ul></div></div><ul id=menu><li><a href=https://reid00.github.io/en/archives/ title=Archive><span>Archive</span></a></li><li><a href=https://reid00.github.io/en/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://reid00.github.io/en/categories/ title=Categorys><span>Categorys</span></a></li><li><a href=https://reid00.github.io/en/tags/ title=Tags><span>Tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://reid00.github.io/en/>Home</a>&nbsp;»&nbsp;<a href=https://reid00.github.io/en/posts/>Posts</a>&nbsp;»&nbsp;<a href=https://reid00.github.io/en/posts/algo/>algorithm 数据结果算法相关的记录</a></div><h1 class=post-title>常见的二进位运算技巧</h1><div class=post-description>常见的二进位运算技巧</div><div class=post-meta><span title='2023-03-16 19:35:12 +0800 +0800'>2023-03-16 19:35</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;267 words&nbsp;·&nbsp;Reid</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#1-%e4%bd%8d%e8%bf%90%e7%ae%97%e6%a6%82%e8%bf%b0 aria-label="1. 位运算概述">1. 位运算概述</a></li><li><a href=#2-%e4%bd%8d%e8%bf%90%e7%ae%97%e6%a6%82%e8%a7%88 aria-label="2. 位运算概览">2. 位运算概览</a></li><li><a href=#3-%e6%8c%89%e4%bd%8d%e4%b8%8e%e8%bf%90%e7%ae%97%e7%ac%a6 aria-label="3. 按位与运算符">3. 按位与运算符</a></li><li><a href=#4-%e5%bc%82%e6%88%96%e8%bf%90%e7%ae%97%e7%ac%a6 aria-label="4. 异或运算符（^）">4. 异或运算符（^）</a></li><li><a href=#5-%e5%b7%a6%e7%a7%bb%e8%bf%90%e7%ae%97%e7%ac%a6 aria-label="5. 左移运算符（&amp;laquo;）">5. 左移运算符（&#171;）</a></li><li><a href=#6-%e5%8f%b3%e7%a7%bb%e8%bf%90%e7%ae%97%e7%ac%a6 aria-label="6. 右移运算符（&amp;raquo;）">6. 右移运算符（&#187;）</a></li><li><a href=#%e5%ba%94%e7%94%a8 aria-label=应用>应用</a></li></ul></div></details></div><div class=post-content><h2 id=1-位运算概述>1. 位运算概述<a hidden class=anchor aria-hidden=true href=#1-位运算概述>#</a></h2><p>从现代计算机中所有的数据二进制的形式存储在设备中。即 0、1 两种状态，计算机对二进制数据进行的运算(+、-、*、/)都是叫位运算，即将符号位共同参与运算的运算。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kt>int</span> <span class=nx>a</span> <span class=p>=</span> <span class=mi>35</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nx>b</span> <span class=p>=</span> <span class=mi>47</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nx>c</span> <span class=p>=</span> <span class=nx>a</span> <span class=o>+</span> <span class=nx>b</span><span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><p>实际上运算如下:
计算两个数的和，因为在计算机中都是以二进制来进行运算，所以上面我们所给的 int 变量会在机器内部先转换为二进制在进行相加：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=mi>35</span><span class=p>:</span>  <span class=mi>0</span> <span class=mi>0</span> <span class=mi>1</span> <span class=mi>0</span> <span class=mi>0</span> <span class=mi>0</span> <span class=mi>1</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl><span class=mi>47</span><span class=p>:</span>  <span class=mi>0</span> <span class=mi>0</span> <span class=mi>1</span> <span class=mi>0</span> <span class=mi>1</span> <span class=mi>1</span> <span class=mi>1</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl><span class=err>————————————————————</span>
</span></span><span class=line><span class=cl><span class=mi>82</span><span class=p>:</span>  <span class=mi>0</span> <span class=mi>1</span> <span class=mi>0</span> <span class=mi>1</span> <span class=mi>0</span> <span class=mi>0</span> <span class=mi>1</span> <span class=mi>0</span>
</span></span></code></pre></td></tr></table></div></div><p>所以，相比在代码中直接使用(+、-、*、/)运算符，合理的运用位运算更能显著提高代码在机器上的执行效率。</p><h2 id=2-位运算概览>2. 位运算概览<a hidden class=anchor aria-hidden=true href=#2-位运算概览>#</a></h2><p><img loading=lazy src=https://raw.githubusercontent.com/Reid00/image-host/main/20211221/image.4g4e72n3d4a0.png alt=位运算></p><h2 id=3-按位与运算符>3. 按位与运算符<a hidden class=anchor aria-hidden=true href=#3-按位与运算符>#</a></h2><p>定义：参加运算的两个数据，按二进制位进行"与"运算。
运算规则：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=mi>0</span><span class=o>&amp;</span><span class=mi>0</span><span class=p>=</span><span class=mi>0</span>  <span class=mi>0</span><span class=o>&amp;</span><span class=mi>1</span><span class=p>=</span><span class=mi>0</span>  <span class=mi>1</span><span class=o>&amp;</span><span class=mi>0</span><span class=p>=</span><span class=mi>0</span>  <span class=mi>1</span><span class=o>&amp;</span><span class=mi>1</span><span class=p>=</span><span class=mi>1</span>
</span></span></code></pre></td></tr></table></div></div><p>==总结：两位同时为1，结果才为1，否则结果为0。==</p><p>例如：3&amp;5 即 0000 0011& 0000 0101 = 0000 0001，因此 3&amp;5 的值得1。
注意：负数按补码形式参加按位与运算。</p><p><strong>与运算 & 的用途：</strong>
1）清零
如果想将一个单元清零，即使其全部二进制位为0，只要与一个各位都为零的数值相与，结果为零。</p><p>2）取一个数的指定位
比如取数 X=1010 1110 的低4位，只需要另找一个数Y，令Y的低4位为1，其余位为0，即Y=0000 1111，然后将X与Y进行按位与运算（X&amp;Y=0000 1110）即可得到X的指定位。</p><p>3）判断奇偶
只要根据最未位是0还是1来决定，为0就是偶数，为1就是奇数。因此可以用if ((a & 1) == 0)代替if (a % 2 == 0)来判断a是不是偶数。</p><h2 id=4-异或运算符>4. 异或运算符（^）<a hidden class=anchor aria-hidden=true href=#4-异或运算符>#</a></h2><p>定义：参加运算的两个数据，按二进制位进行"异或"运算。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=mi>0</span><span class=p>^</span><span class=mi>0</span><span class=p>=</span><span class=mi>0</span>  <span class=mi>0</span><span class=p>^</span><span class=mi>1</span><span class=p>=</span><span class=mi>1</span>  <span class=mi>1</span><span class=p>^</span><span class=mi>0</span><span class=p>=</span><span class=mi>1</span>  <span class=mi>1</span><span class=p>^</span><span class=mi>1</span><span class=p>=</span><span class=mi>0</span>
</span></span></code></pre></td></tr></table></div></div><p>==总结：参加运算的两个对象，如果两个相应位相同为0，相异为1。==</p><p>异或的几条性质:</p><ol><li>交换律</li><li>结合律 (a^b)^c == a^(b^c)</li><li>对于任何数x，都有 x^x=0，x^0=x</li><li>自反性: a^b^b=a^0=a;</li></ol><p><strong>与运算 ^ 的用途：</strong>
1）翻转指定位
比如将数 X=1010 1110 的低4位进行翻转，只需要另找一个数Y，令Y的低4位为1，其余位为0，即Y=0000 1111，然后将X与Y进行异或运算（X^Y=1010 0001）即可得到。</p><p>2）与0相异或值不变
例如：1010 1110 ^ 0000 0000 = 1010 1110</p><p>3）常见操作</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=nx>a</span><span class=p>=</span><span class=mi>0</span><span class=p>^</span><span class=nx>a</span><span class=p>=</span><span class=nx>a</span><span class=p>^</span><span class=mi>0</span>
</span></span><span class=line><span class=cl><span class=mi>0</span><span class=p>=</span><span class=nx>a</span><span class=p>^</span><span class=nx>a</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>由上面两个推导出</span><span class=err>：</span><span class=nx>a</span><span class=p>=</span><span class=nx>a</span><span class=p>^</span><span class=nx>b</span><span class=p>^</span><span class=nx>b</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>获取最后一个</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl><span class=nx>diff</span><span class=p>=(</span><span class=nx>n</span><span class=o>&amp;</span><span class=p>(</span><span class=nx>n</span><span class=o>-</span><span class=mi>1</span><span class=p>))^</span><span class=nx>n</span>
</span></span></code></pre></td></tr></table></div></div><p>4） 交换两个数</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=nx>void</span> <span class=nf>swap</span><span class=p>(</span><span class=kt>int</span> <span class=o>&amp;</span><span class=nx>a</span><span class=p>,</span> <span class=kt>int</span> <span class=o>&amp;</span><span class=nx>b</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>a</span> <span class=p>^=</span> <span class=nx>b</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=nx>b</span> <span class=p>^=</span> <span class=nx>a</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=nx>a</span> <span class=p>^=</span> <span class=nx>b</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>5） n & n -1</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=nx>移除最后一个</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl><span class=nx>a</span><span class=p>=</span><span class=nx>n</span><span class=o>&amp;</span><span class=p>(</span><span class=nx>n</span><span class=o>-</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=err>#</span> <span class=nx>用</span> <span class=nf>O</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span> <span class=nx>时间检测整数</span> <span class=nx>n</span> <span class=nx>是否是</span> <span class=mi>2</span> <span class=nx>的幂次</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>N如果是2的幂次</span><span class=err>，</span><span class=nx>则N满足两个条件</span><span class=err>。</span>
</span></span><span class=line><span class=cl><span class=mf>1.</span><span class=nx>N</span> <span class=p>&gt;</span><span class=mi>0</span>
</span></span><span class=line><span class=cl><span class=mf>2.</span><span class=nx>N的二进制表示中只有一个1</span>
</span></span><span class=line><span class=cl><span class=nx>因为N的二进制表示中只有一个1</span><span class=err>，</span><span class=nx>所以使用N</span> <span class=o>&amp;</span> <span class=p>(</span><span class=nx>N</span> <span class=o>-</span> <span class=mi>1</span><span class=p>)</span><span class=nx>将N唯一的一个1消去</span><span class=err>，</span><span class=nx>应该返回0</span><span class=err>。</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=5-左移运算符>5. 左移运算符（&#171;）<a hidden class=anchor aria-hidden=true href=#5-左移运算符>#</a></h2><p>定义：将一个运算对象的各二进制位全部左移若干位（左边的二进制位丢弃，右边补0）。</p><p>设 a=1010 1110，a = a&#171; 2 将a的二进制位左移2位、右补0，即得a=1011 1000。</p><p>若左移时舍弃的高位不包含1，则每左移一位，相当于该数乘以2。</p><h2 id=6-右移运算符>6. 右移运算符（&#187;）<a hidden class=anchor aria-hidden=true href=#6-右移运算符>#</a></h2><p>定义：将一个数的各二进制位全部右移若干位，正数左补0，负数左补1，右边丢弃。</p><p>例如：a=a&#187;2 将a的二进制位右移2位，左补0 或者 左补1得看被移数是正还是负。</p><p>操作数每右移一位，相当于该数除以2。</p><h2 id=应用>应用<a hidden class=anchor aria-hidden=true href=#应用>#</a></h2><p>位操作统计二进制中 1 的个数</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=nx>count</span> <span class=p>=</span> <span class=mi>0</span>  
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=nx>a</span> <span class=p>&gt;</span> <span class=mi>0</span><span class=p>{</span>  
</span></span><span class=line><span class=cl>  <span class=nx>a</span> <span class=p>=</span> <span class=nx>a</span> <span class=o>&amp;</span> <span class=p>(</span><span class=nx>a</span> <span class=o>-</span> <span class=mi>1</span><span class=p>);</span>  
</span></span><span class=line><span class=cl>  <span class=nx>count</span><span class=o>++</span><span class=p>;</span>  
</span></span><span class=line><span class=cl><span class=p>}</span>  
</span></span></code></pre></td></tr></table></div></div><p>用一 数组中，只有一个数出现一次，剩下都出现两次，找出出现一次的数</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=nx>a</span> <span class=o>:=</span> <span class=nx>a</span><span class=p>^</span><span class=nx>b</span><span class=p>^</span><span class=nx>b</span>
</span></span></code></pre></td></tr></table></div></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://reid00.github.io/en/tags/%E4%BD%8D%E8%BF%90%E7%AE%97/>位运算</a></li></ul><nav class=paginav><a class=prev href=https://reid00.github.io/en/posts/other/%E6%95%B0%E5%AD%A6%E4%B8%AD%E7%9A%84%E5%8D%81%E5%A4%A7%E6%82%96%E8%AE%BA/><span class=title>« Prev</span><br><span>数学中的十大悖论</span>
</a><a class=next href=https://reid00.github.io/en/posts/os_network/%E6%8B%94%E6%8E%89%E7%BD%91%E7%BA%BF%E5%90%8E%E5%8E%9F%E6%9C%AC%E7%9A%84tcp%E8%BF%9E%E6%8E%A5%E8%BF%98%E5%AD%98%E5%9C%A8%E5%90%97/><span class=title>Next »</span><br><span>拔掉网线后,原本的TCP连接还存在吗？</span></a></nav></footer><script src=https://utteranc.es/client.js repo=Reid00/hugo-blog-talks issue-term=pathname label=Comment theme=github-light crossorigin=anonymous async></script></article></main><span id=busuanzi_container_site_pv>访问量<span id=busuanzi_value_site_pv></span>次
</span><span id=busuanzi_container_site_uv>访客数<span id=busuanzi_value_site_uv></span>人次</span></body></html>