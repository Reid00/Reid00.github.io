<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>家庭mesh组网规划 | Reid's Blog</title>
<meta name=keywords content="mesh,组网,软路由"><meta name=description content="家庭mesh组网规划"><meta name=author content="Reid"><link rel=canonical href=https://reid00.github.io/en/posts/other/%E5%AE%B6%E5%BA%ADmesh%E7%BB%84%E7%BD%91%E8%A7%84%E5%88%92/><link crossorigin=anonymous href=/assets/css/stylesheet.fc220c15db4aef0318bbf30adc45d33d4d7c88deff3238b23eb255afdc472ca6.css integrity="sha256-/CIMFdtK7wMYu/MK3EXTPU18iN7/MjiyPrJVr9xHLKY=" rel="preload stylesheet" as=style><link rel=icon href=https://reid00.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://reid00.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://reid00.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://reid00.github.io/apple-touch-icon.png><link rel=mask-icon href=https://reid00.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://reid00.github.io/en/posts/other/%E5%AE%B6%E5%BA%ADmesh%E7%BB%84%E7%BD%91%E8%A7%84%E5%88%92/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><head><meta name=referrer content="no-referrer"></head><script async src="https://www.googletagmanager.com/gtag/js?id=G-QRR6GRNQGK"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-QRR6GRNQGK")}</script><meta property="og:title" content="家庭mesh组网规划"><meta property="og:description" content="家庭mesh组网规划"><meta property="og:type" content="article"><meta property="og:url" content="https://reid00.github.io/en/posts/other/%E5%AE%B6%E5%BA%ADmesh%E7%BB%84%E7%BD%91%E8%A7%84%E5%88%92/"><meta property="og:image" content="https://i.loli.net/2021/09/26/3OMGXylm8HUYJ6p.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-09-19T14:33:13+08:00"><meta property="article:modified_time" content="2024-09-19T14:33:13+08:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://i.loli.net/2021/09/26/3OMGXylm8HUYJ6p.png"><meta name=twitter:title content="家庭mesh组网规划"><meta name=twitter:description content="家庭mesh组网规划"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://reid00.github.io/en/posts/"},{"@type":"ListItem","position":2,"name":"其他日常工具相关的记录","item":"https://reid00.github.io/en/posts/other/"},{"@type":"ListItem","position":3,"name":"家庭mesh组网规划","item":"https://reid00.github.io/en/posts/other/%E5%AE%B6%E5%BA%ADmesh%E7%BB%84%E7%BD%91%E8%A7%84%E5%88%92/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"家庭mesh组网规划","name":"家庭mesh组网规划","description":"家庭mesh组网规划","keywords":["mesh","组网","软路由"],"articleBody":"概念介绍 家庭路由器 Mesh 组网是指使用多个路由器组成的网络，这些路由器可以通过无线或有线连接互相连接，形成一个更大的网络。这些路由器被称为 Mesh 节点或 Mesh 路由器。 Mesh 组网技术是一种基于路由器的分布式网络技术，它可以使家庭网络更加灵活、高效、安全。通过 Mesh 组网，用户可以在不同位置使用路由器，而无需使用有线连接，从而提高了家庭网络的覆盖范围和性能。 Mesh 组网通常使用 Wi-Fi 技术，其中 Mesh 路由器可以互相连接，并通过 Wi-Fi 信号将数据传输到用户设备。这种技术还可以用于连接其他网络设备，如智能灯泡、智能音箱等。 总的来说，家庭路由器 Mesh 组网是一种先进的家庭网络技术，可以提供更加灵活、高效、安全的网络连接，以满足现代家庭的需求。\n在普通的家庭环境里，我们其实因为成本、布线、效果等多方面的权衡下，我们最核心的诉求其实是：从一个屋子到一个屋子，能一直连着一个 WIFI SSID，不掉线自动平滑切换到最强信号，即 WIFI 漫游能力。\n为什么要组网 如果，你的家一台路由器无法覆盖，手机连无线经常掉线或者网速很慢，你就要考虑组网了。简单来说，组网就是增加你家的无线覆盖范围以及质量，让你在家的任何一个角落都能做到高质量的网络冲浪。\n组网的基础知识 光猫路由模式和桥接模式 路由模式：光猫进行光电转换+拨号上网的功能。大部分运营商采取这种，如果光猫带无线功能的话，连路由器都不用就能直接通过有线或者无线连接光猫上网。 桥接模式：光猫只进行光电转换，拨号上网的功能交给主路由进行。这样的目的，是为了充分发挥光猫和路由器各自的作用，不要让光猫负荷过大。 光猫改桥接：可以电话给运营商让他们来修改。\nAC 和 AP AC：是主控制器（Access Controller）的缩写，可用来管理、控制各AP，让各个AP接入互联网。 AP：是接入点（Access Point）的缩写，路由器、AP面板等等都可以是一个AP。\n单线复用、有线回程、无线回程 单线复用：顾名思义，一根网线起到多种作用，可能传输WAN网络，LAN网络，IPTV等等。 有线回程, 无线回程：就是在组网中，主副路由间通过实体网线/无线链路连接。\nVLAN交换机 又名网管交换机，可以简单理解，让指定的网口通过指定的网络类型。比如让1口只能通过IPTV，2口只能通过WAN网络，3口可以通过所有网络。\n组网方式有哪些 AC+AP组网：简单理解，把主控制器（AC）这个设备放在弱电箱，连接每个需要网络房间的网口，网口处安装接入点（AP），这样家里每个地方通过AP接入网络。\nTips：此种组网设备太贵，成本较高，家庭往往不适用，土豪随意。差一点的AP面板散热不好容易发热，导致网络质量下降。\n串联组网：一台主路由+多台副路由，有线连接，实现有线MESH组网（光猫路由模式和桥接模式均可）。这种可以近似理解为主路由为AC，副路由为AP。\nTips：性价比较高，通过有限回程连接，相对稳定的组网方案，也是本文主要推荐的！！！\n并联组网：光猫路由模式+多台路由器，有线连接，实现有线AP MESH组网。这种可以近似理解为光猫为AC，多台路由器为AP。\nTips：相对省设备的组网方式，但路由器做AP会丧失大部分功能，想想就不爽，可以做备选！!\n串联无线组网：一台主路由+多台副路由，无线连接，实现无线MESH组网。这种效果最差，只有在完全没有线的条件下才考虑，也不是本文所重点推荐的。\nTips：无线回程，不太稳定，但组网方便，路由器随意放。\n实现组网的困难点 如果房子是自己装修，可以通过提前布线解决所有问题，这里就不详谈了。有条件就是特别客厅多布置几条网线连接到弱电箱，每条网线各司其职；再就是弱电箱做大，能够容纳下各种大一点的设备。 大部分精装修新房的布置都是，每个房间一根网线汇集到弱电箱，特别是卧室和客厅，除了上网还有IPTV专线。你想要实现有线回程、IPTV专线等等，就涉及到单线复用了。 大部分家庭弱电箱都很小，只能容纳一个运营商的光猫，要不采用高成本的AC+AP组网或者并联组网，要不考虑串联组网就要增加设备来实现了。 不到万不得已，千万不要把路由器放弱电箱，浪费信号发热严重。 组网方案 精装修房组网方案 目前新购房因为政府压价，开发商为了能挣更多钱，基本都是精装修交付，此类房子在交付后已完成网线预埋，线路布局已定。 精装修房的常见网线布局如下，主要特点为：每个房间到弱电箱有且只有一根网线进行连接。 入住后，整体网络布局会大致如下： 在此种布局下，推荐以下几种组网方式：\n弱电箱光猫当做网关（主路由），其他房间 AP Mesh 组网 — 普通家庭够用 弱电箱放置路由器当做网关（主路由），其他房间 AP Mesh 组网 — 性能不受限于光猫，且能实现科学上网、去广告等 客厅放置路由器当做网关（主路由），VLAN 单线复用到弱电箱，其他房间 AP Mesh 组网 — 已有比较大的主路由，弱电箱放不下。 一、光猫当做网关（主路由），其他房间 AP Mesh 组网 — 普通家庭够用 当今的光猫，99.999% 除了转化光信号之外，还有普通路由的能力，同时一般会有 4 个 LAN 口（甚至还可能支持发射 WIFI）。家用路由器方面，也都支持 AP Mesh 组网（常见的小米、TP等品牌的 AX 系列路由器，基本都支持此模式）。\n所以我们可以使用光猫当做网关（主路由），其他房间的路由器选择 AP Mesh 组网，网络拓补如下： 如上，即可实现此类场景下的组网，优缺点如下： 优点：\n不需要重新布线 不需要多余的设备 缺点： 光猫的路由能力，会是整个家庭的瓶颈 如果要是在家庭科学上网、去广告等能力，不太好实现（光猫的 DHCP 能力基本都不可以关闭） 二、放置路由器当做网关（主路由），其他房间 AP Mesh 组网 — 性能不受限于光猫，且能实现科学上网、去广告等 此方案和上面的方案基本一致，需要增加一个路由器（如果路由器网口较少，还需要一个普通交换机）。整个家庭的网关会是这个新增的路由器，此路由器上可以搭配使用一些插件实现科学上网、去广告等能力。 如上，但由于一般弱电箱很小，很可能无法再放入一个正常的路由器，一般可以使用比较小型的 OpenWrt 路由器（如 R2S 等），优缺点如下：\n优点：\n不需要重新布线 网关更换为自己的设备，可能比运行商提供的光猫路由的性能更好 借助弱电箱路由器能实现科学上网、去广告等效果 缺点： 弱电箱空间有限，需要注意尺寸问题、以及散热 需要新引入一个设备作为弱电箱路由器，同时如果此路由器网口不够，还需要一个普通交换机以便其他房间的网口可以连接到此路由器 三、客厅放置路由器当做网关（主路由），VLAN 单线复用到弱电箱，其他房间 AP Mesh 组网 — 已有比较大的主路由，弱电箱放不下 如果在打算组网之前，已经买入了很强的路由器（如小米万兆路由器等），觉得单纯作为 AP 过于浪费，想让之成为网关（主路由），可以采取以下方式： 整体拓补图如下： 如上，此种方案主要是使用了两个 VLAN 交换机（注意：不是普通交换机），近似达到弱电箱到客厅有两根网线的效果，以便更好的发挥客厅路由器的性能。优缺点如下：\n优点：\n如果有一个非常强劲的大路由器，不会浪费此大路由器的性能 缺点： 如要引入两个 VLAN 交换器，相比于普通交换机，价格会更高一些 也可以通过短接路由器的 WAN 口和 LAN，只使用一个普通交换机实现此效果，但整体会比较绕。感兴趣可以参考：https://www.youtube.com/watch?v=1CuyE5HXhA8 自装修房组网方案 自装修房间相较于精装修房，可以在装修期间让装修公司埋更多的网线，所以在方案选择上会更加宽松。正常装修期时，建议重点房间到弱电箱的网线，安装至少 2 根，以便后续拓展（如果只安装了 1 根，问题也不大，无非是退回到前面精装修房的情况）\n这里，只讲述如果有两根网线的情况下，对精装修房的方案三进行一些简化（降低成本），拓补图如下： 可以看到，相比于精装修房的方案三，只是因为有 2 跟网线，省掉了 VLAN 交换机。这也是网上说的比较多的 有线回程布线。优缺点如下：\n优点：\n不需要加 VLAN 交换机，也能使用上自己强大的主路由 缺点： 已经如此布线的情况下，无缺点 Mesh 组网和AC+AP哪个方案好 首先，无论是Mesh组网还是AC+AP，都可以达到全屋覆盖和无线漫游的效果。Mesh组网在全部使用有线回程的情况下，基本上等同于AC+AP。\nMesh组网更为灵活，可用无线回程，也可用有线回程，还可以混合使用，而AC+AP则只能使用有线连接，需要提前规划布线。\n另外，AC+AP方案中的AC可以置于弱电箱，AP使用面板式也不占空间，所有设备没有任何的网线和电源线外露，非常清爽美观。而Mesh方案则需拖着拉网线和电源线，美观性上要差得多。\n最后，AC+AP需要购置至少一台路由/AC/PoE一体机和两台AP才有意义，如果要支持千兆网口和Wi-Fi6，这些设备都不便宜；而Mesh组网则亲民多了，两台路由的价格远低于AC+AP。\n","wordCount":"3497","inLanguage":"en","image":"https://i.loli.net/2021/09/26/3OMGXylm8HUYJ6p.png","datePublished":"2024-09-19T14:33:13+08:00","dateModified":"2024-09-19T14:33:13+08:00","author":[{"@type":"Person","name":"Reid"}],"mainEntityOfPage":{"@type":"WebPage","@id":"https://reid00.github.io/en/posts/other/%E5%AE%B6%E5%BA%ADmesh%E7%BB%84%E7%BD%91%E8%A7%84%E5%88%92/"},"publisher":{"@type":"Organization","name":"Reid's Blog","logo":{"@type":"ImageObject","url":"https://reid00.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://reid00.github.io/en/ accesskey=h title="Reid's Blog (Alt + H)">Reid's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://reid00.github.io/en/archives/ title=Archive><span>Archive</span></a></li><li><a href=https://reid00.github.io/en/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://reid00.github.io/en/categories/ title=Categorys><span>Categorys</span></a></li><li><a href=https://reid00.github.io/en/tags/ title=Tags><span>Tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://reid00.github.io/en/>Home</a>&nbsp;»&nbsp;<a href=https://reid00.github.io/en/posts/>Posts</a>&nbsp;»&nbsp;<a href=https://reid00.github.io/en/posts/other/>其他日常工具相关的记录</a></div><h1 class="post-title entry-hint-parent">家庭mesh组网规划</h1><div class=post-description>家庭mesh组网规划</div><div class=post-meta><span title='2024-09-19 14:33:13 +0800 +0800'>2024-09-19 14:33</span>&nbsp;·&nbsp;7 min&nbsp;·&nbsp;3497 words&nbsp;·&nbsp;Reid</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#%e6%a6%82%e5%bf%b5%e4%bb%8b%e7%bb%8d aria-label=概念介绍>概念介绍</a><ul><li><a href=#%e4%b8%ba%e4%bb%80%e4%b9%88%e8%a6%81%e7%bb%84%e7%bd%91 aria-label=为什么要组网>为什么要组网</a></li><li><a href=#%e7%bb%84%e7%bd%91%e7%9a%84%e5%9f%ba%e7%a1%80%e7%9f%a5%e8%af%86 aria-label=组网的基础知识>组网的基础知识</a></li><li><a href=#%e7%bb%84%e7%bd%91%e6%96%b9%e5%bc%8f%e6%9c%89%e5%93%aa%e4%ba%9b aria-label=组网方式有哪些>组网方式有哪些</a></li><li><a href=#%e5%ae%9e%e7%8e%b0%e7%bb%84%e7%bd%91%e7%9a%84%e5%9b%b0%e9%9a%be%e7%82%b9 aria-label=实现组网的困难点>实现组网的困难点</a></li></ul></li><li><a href=#%e7%bb%84%e7%bd%91%e6%96%b9%e6%a1%88 aria-label=组网方案>组网方案</a><ul><li><a href=#%e7%b2%be%e8%a3%85%e4%bf%ae%e6%88%bf%e7%bb%84%e7%bd%91%e6%96%b9%e6%a1%88 aria-label=精装修房组网方案>精装修房组网方案</a><ul><li><a href=#%e4%b8%80%e5%85%89%e7%8c%ab%e5%bd%93%e5%81%9a%e7%bd%91%e5%85%b3%e4%b8%bb%e8%b7%af%e7%94%b1%e5%85%b6%e4%bb%96%e6%88%bf%e9%97%b4-ap-mesh-%e7%bb%84%e7%bd%91--%e6%99%ae%e9%80%9a%e5%ae%b6%e5%ba%ad%e5%a4%9f%e7%94%a8 aria-label="一、光猫当做网关（主路由），其他房间 AP Mesh 组网 — 普通家庭够用">一、光猫当做网关（主路由），其他房间 AP Mesh 组网 — 普通家庭够用</a></li><li><a href=#%e4%ba%8c%e6%94%be%e7%bd%ae%e8%b7%af%e7%94%b1%e5%99%a8%e5%bd%93%e5%81%9a%e7%bd%91%e5%85%b3%e4%b8%bb%e8%b7%af%e7%94%b1%e5%85%b6%e4%bb%96%e6%88%bf%e9%97%b4-ap-mesh-%e7%bb%84%e7%bd%91--%e6%80%a7%e8%83%bd%e4%b8%8d%e5%8f%97%e9%99%90%e4%ba%8e%e5%85%89%e7%8c%ab%e4%b8%94%e8%83%bd%e5%ae%9e%e7%8e%b0%e7%a7%91%e5%ad%a6%e4%b8%8a%e7%bd%91%e5%8e%bb%e5%b9%bf%e5%91%8a%e7%ad%89 aria-label="二、放置路由器当做网关（主路由），其他房间 AP Mesh 组网 — 性能不受限于光猫，且能实现科学上网、去广告等">二、放置路由器当做网关（主路由），其他房间 AP Mesh 组网 — 性能不受限于光猫，且能实现科学上网、去广告等</a></li><li><a href=#%e4%b8%89%e5%ae%a2%e5%8e%85%e6%94%be%e7%bd%ae%e8%b7%af%e7%94%b1%e5%99%a8%e5%bd%93%e5%81%9a%e7%bd%91%e5%85%b3%e4%b8%bb%e8%b7%af%e7%94%b1vlan-%e5%8d%95%e7%ba%bf%e5%a4%8d%e7%94%a8%e5%88%b0%e5%bc%b1%e7%94%b5%e7%ae%b1%e5%85%b6%e4%bb%96%e6%88%bf%e9%97%b4-ap-mesh-%e7%bb%84%e7%bd%91--%e5%b7%b2%e6%9c%89%e6%af%94%e8%be%83%e5%a4%a7%e7%9a%84%e4%b8%bb%e8%b7%af%e7%94%b1%e5%bc%b1%e7%94%b5%e7%ae%b1%e6%94%be%e4%b8%8d%e4%b8%8b aria-label="三、客厅放置路由器当做网关（主路由），VLAN 单线复用到弱电箱，其他房间 AP Mesh 组网 — 已有比较大的主路由，弱电箱放不下">三、客厅放置路由器当做网关（主路由），VLAN 单线复用到弱电箱，其他房间 AP Mesh 组网 — 已有比较大的主路由，弱电箱放不下</a></li></ul></li><li><a href=#%e8%87%aa%e8%a3%85%e4%bf%ae%e6%88%bf%e7%bb%84%e7%bd%91%e6%96%b9%e6%a1%88 aria-label=自装修房组网方案>自装修房组网方案</a></li></ul></li><li><a href=#mesh-%e7%bb%84%e7%bd%91%e5%92%8cacap%e5%93%aa%e4%b8%aa%e6%96%b9%e6%a1%88%e5%a5%bd aria-label="Mesh 组网和AC+AP哪个方案好">Mesh 组网和AC+AP哪个方案好</a></li></ul></div></details></div><div class=post-content><h1 id=概念介绍>概念介绍<a hidden class=anchor aria-hidden=true href=#概念介绍>#</a></h1><p>家庭路由器 Mesh 组网是指使用多个路由器组成的网络，这些路由器可以通过无线或有线连接互相连接，形成一个更大的网络。这些路由器被称为 Mesh 节点或 Mesh 路由器。
Mesh 组网技术是一种基于路由器的分布式网络技术，它可以使家庭网络更加灵活、高效、安全。通过 Mesh 组网，用户可以在不同位置使用路由器，而无需使用有线连接，从而提高了家庭网络的覆盖范围和性能。
Mesh 组网通常使用 Wi-Fi 技术，其中 Mesh 路由器可以互相连接，并通过 Wi-Fi 信号将数据传输到用户设备。这种技术还可以用于连接其他网络设备，如智能灯泡、智能音箱等。
总的来说，家庭路由器 Mesh 组网是一种先进的家庭网络技术，可以提供更加灵活、高效、安全的网络连接，以满足现代家庭的需求。</p><p>在普通的家庭环境里，我们其实因为成本、布线、效果等多方面的权衡下，我们最核心的诉求其实是：从一个屋子到一个屋子，能一直连着一个 <code>WIFI SSID</code>，不掉线自动平滑切换到最强信号，即 <code>WIFI 漫游能力</code>。</p><h2 id=为什么要组网>为什么要组网<a hidden class=anchor aria-hidden=true href=#为什么要组网>#</a></h2><p>如果，你的家一台路由器无法覆盖，手机连无线经常掉线或者网速很慢，你就要考虑组网了。简单来说，组网就是增加你家的无线覆盖范围以及质量，让你在家的任何一个角落都能做到高质量的网络冲浪。</p><h2 id=组网的基础知识>组网的基础知识<a hidden class=anchor aria-hidden=true href=#组网的基础知识>#</a></h2><ul><li><p>光猫路由模式和桥接模式
<code>路由模式</code>：光猫进行光电转换+拨号上网的功能。大部分运营商采取这种，如果光猫带无线功能的话，连路由器都不用就能直接通过有线或者无线连接光猫上网。
<code>桥接模式</code>：光猫只进行光电转换，拨号上网的功能交给主路由进行。这样的目的，是为了充分发挥光猫和路由器各自的作用，不要让光猫负荷过大。
光猫改桥接：可以电话给运营商让他们来修改。</p></li><li><p>AC 和 AP
<code>AC</code>：是主控制器（Access Controller）的缩写，可用来管理、控制各AP，让各个AP接入互联网。
<code>AP</code>：是接入点（Access Point）的缩写，路由器、AP面板等等都可以是一个AP。</p></li><li><p>单线复用、有线回程、无线回程
<code>单线复用</code>：顾名思义，一根网线起到多种作用，可能传输WAN网络，LAN网络，IPTV等等。
<code>有线回程</code>, <code>无线回程</code>：就是在组网中，主副路由间通过实体网线/无线链路连接。</p></li><li><p>VLAN交换机
又名网管<code>交换机</code>，可以简单理解，让指定的网口通过指定的网络类型。比如让1口只能通过IPTV，2口只能通过WAN网络，3口可以通过所有网络。</p></li></ul><h2 id=组网方式有哪些>组网方式有哪些<a hidden class=anchor aria-hidden=true href=#组网方式有哪些>#</a></h2><p><code>AC+AP组网</code>：简单理解，把主控制器（AC）这个设备放在弱电箱，连接每个需要网络房间的网口，网口处安装接入点（AP），这样家里每个地方通过AP接入网络。</p><blockquote><p>Tips：此种组网设备太贵，成本较高，家庭往往不适用，土豪随意。差一点的AP面板散热不好容易发热，导致网络质量下降。</p></blockquote><p><code>串联组网</code>：一台主路由+多台副路由，有线连接，实现有线MESH组网（光猫路由模式和桥接模式均可）。这种可以近似理解为主路由为AC，副路由为AP。</p><blockquote><p>Tips：性价比较高，通过有限回程连接，相对稳定的组网方案，也是本文主要推荐的！！！</p></blockquote><p><code>并联组网</code>：光猫路由模式+多台路由器，有线连接，实现有线AP MESH组网。这种可以近似理解为光猫为AC，多台路由器为AP。</p><blockquote><p>Tips：相对省设备的组网方式，但路由器做AP会丧失大部分功能，想想就不爽，可以做备选！!</p></blockquote><p><code>串联无线组网</code>：一台主路由+多台副路由，无线连接，实现无线MESH组网。这种效果最差，只有在完全没有线的条件下才考虑，也不是本文所重点推荐的。</p><blockquote><p>Tips：无线回程，不太稳定，但组网方便，路由器随意放。</p></blockquote><h2 id=实现组网的困难点>实现组网的困难点<a hidden class=anchor aria-hidden=true href=#实现组网的困难点>#</a></h2><ol><li>如果房子是自己装修，可以通过提前布线解决所有问题，这里就不详谈了。有条件就是特别客厅多布置几条网线连接到弱电箱，每条网线各司其职；再就是弱电箱做大，能够容纳下各种大一点的设备。</li><li>大部分精装修新房的布置都是，每个房间一根网线汇集到弱电箱，特别是卧室和客厅，除了上网还有IPTV专线。你想要实现有线回程、IPTV专线等等，就涉及到单线复用了。</li><li>大部分家庭弱电箱都很小，只能容纳一个运营商的光猫，要不采用高成本的AC+AP组网或者并联组网，要不考虑串联组网就要增加设备来实现了。</li><li>不到万不得已，千万不要把路由器放弱电箱，浪费信号发热严重。</li></ol><h1 id=组网方案>组网方案<a hidden class=anchor aria-hidden=true href=#组网方案>#</a></h1><h2 id=精装修房组网方案>精装修房组网方案<a hidden class=anchor aria-hidden=true href=#精装修房组网方案>#</a></h2><p>目前新购房因为政府压价，开发商为了能挣更多钱，基本都是精装修交付，此类房子在交付后已完成网线预埋，线路布局已定。
精装修房的常见网线布局如下，主要特点为：<code>每个房间到弱电箱有且只有一根网线进行连接。</code>
<img loading=lazy src=https://github.com/Reid00/picx-images-hosting/raw/master/20240924/image.39l5csitx7.webp alt=精装></p><p>入住后，整体网络布局会大致如下：
<img loading=lazy src=https://github.com/Reid00/picx-images-hosting/raw/master/20240924/image.51e47pip12.webp alt=res></p><p>在此种布局下，推荐以下几种组网方式：</p><ol><li>弱电箱光猫当做网关（主路由），其他房间 AP Mesh 组网 — 普通家庭够用</li><li>弱电箱放置路由器当做网关（主路由），其他房间 AP Mesh 组网 — 性能不受限于光猫，且能实现科学上网、去广告等</li><li>客厅放置路由器当做网关（主路由），VLAN 单线复用到弱电箱，其他房间 AP Mesh 组网 — 已有比较大的主路由，弱电箱放不下。</li></ol><h3 id=一光猫当做网关主路由其他房间-ap-mesh-组网--普通家庭够用>一、光猫当做网关（主路由），其他房间 AP Mesh 组网 — 普通家庭够用<a hidden class=anchor aria-hidden=true href=#一光猫当做网关主路由其他房间-ap-mesh-组网--普通家庭够用>#</a></h3><p>当今的光猫，99.999% 除了转化光信号之外，还有普通路由的能力，同时一般会有 4 个 LAN 口（甚至还可能支持发射 WIFI）。家用路由器方面，也都支持 AP Mesh 组网（常见的小米、TP等品牌的 AX 系列路由器，基本都支持此模式）。</p><p>所以我们可以使用光猫当做网关（主路由），其他房间的路由器选择 AP Mesh 组网，网络拓补如下：
<img loading=lazy src=https://github.com/Reid00/picx-images-hosting/raw/master/20240924/image.54xq5fb9kf.webp alt=img></p><p>如上，即可实现此类场景下的组网，优缺点如下：
优点：</p><ul><li>不需要重新布线</li><li>不需要多余的设备
缺点：</li><li>光猫的路由能力，会是整个家庭的瓶颈</li><li>如果要是在家庭科学上网、去广告等能力，不太好实现（光猫的 DHCP 能力基本都不可以关闭）</li></ul><h3 id=二放置路由器当做网关主路由其他房间-ap-mesh-组网--性能不受限于光猫且能实现科学上网去广告等>二、放置路由器当做网关（主路由），其他房间 AP Mesh 组网 — 性能不受限于光猫，且能实现科学上网、去广告等<a hidden class=anchor aria-hidden=true href=#二放置路由器当做网关主路由其他房间-ap-mesh-组网--性能不受限于光猫且能实现科学上网去广告等>#</a></h3><p>此方案和上面的方案基本一致，需要增加一个路由器（如果路由器网口较少，还需要一个普通交换机）。整个家庭的网关会是这个新增的路由器，此路由器上可以搭配使用一些插件实现科学上网、去广告等能力。
<img loading=lazy src=https://github.com/Reid00/picx-images-hosting/raw/master/20240924/image.7ljykjbmv2.webp alt=二></p><p>如上，但由于一般弱电箱很小，很可能无法再放入一个正常的路由器，一般可以使用比较小型的 OpenWrt 路由器（如 R2S 等），优缺点如下：</p><p>优点：</p><ul><li>不需要重新布线</li><li>网关更换为自己的设备，可能比运行商提供的光猫路由的性能更好</li><li>借助弱电箱路由器能实现科学上网、去广告等效果
缺点：</li><li>弱电箱空间有限，需要注意尺寸问题、以及散热</li><li>需要新引入一个设备作为弱电箱路由器，同时如果此路由器网口不够，还需要一个普通交换机以便其他房间的网口可以连接到此路由器</li></ul><h3 id=三客厅放置路由器当做网关主路由vlan-单线复用到弱电箱其他房间-ap-mesh-组网--已有比较大的主路由弱电箱放不下>三、客厅放置路由器当做网关（主路由），VLAN 单线复用到弱电箱，其他房间 AP Mesh 组网 — 已有比较大的主路由，弱电箱放不下<a hidden class=anchor aria-hidden=true href=#三客厅放置路由器当做网关主路由vlan-单线复用到弱电箱其他房间-ap-mesh-组网--已有比较大的主路由弱电箱放不下>#</a></h3><p>如果在打算组网之前，已经买入了很强的路由器（如小米万兆路由器等），觉得单纯作为 AP 过于浪费，想让之成为网关（主路由），可以采取以下方式：
整体拓补图如下：
<img loading=lazy src=https://github.com/Reid00/picx-images-hosting/raw/master/20240924/image.6t732syyov.png alt=三></p><p>如上，此种方案主要是使用了两个 VLAN 交换机（注意：不是普通交换机），近似达到弱电箱到客厅有两根网线的效果，以便更好的发挥客厅路由器的性能。优缺点如下：</p><p>优点：</p><ul><li>如果有一个非常强劲的大路由器，不会浪费此大路由器的性能
缺点：</li><li>如要引入两个 VLAN 交换器，相比于普通交换机，价格会更高一些</li><li>也可以通过短接路由器的 WAN 口和 LAN，只使用一个普通交换机实现此效果，但整体会比较绕。感兴趣可以参考：https://www.youtube.com/watch?v=1CuyE5HXhA8</li></ul><h2 id=自装修房组网方案>自装修房组网方案<a hidden class=anchor aria-hidden=true href=#自装修房组网方案>#</a></h2><p>自装修房间相较于精装修房，可以在装修期间让装修公司埋更多的网线，所以在方案选择上会更加宽松。正常装修期时，建议重点房间到弱电箱的网线，安装至少 2 根，以便后续拓展（如果只安装了 1 根，问题也不大，无非是退回到前面精装修房的情况）</p><p>这里，只讲述如果有两根网线的情况下，对精装修房的方案三进行一些简化（降低成本），拓补图如下：
<img loading=lazy src=https://github.com/Reid00/picx-images-hosting/raw/master/20240924/image.6t732syyov.png alt=自建>
可以看到，相比于精装修房的方案三，只是因为有 2 跟网线，省掉了 VLAN 交换机。这也是网上说的比较多的 有线回程布线。优缺点如下：</p><p>优点：</p><ul><li>不需要加 VLAN 交换机，也能使用上自己强大的主路由
缺点：</li><li>已经如此布线的情况下，无缺点</li></ul><h1 id=mesh-组网和acap哪个方案好>Mesh 组网和AC+AP哪个方案好<a hidden class=anchor aria-hidden=true href=#mesh-组网和acap哪个方案好>#</a></h1><p>首先，无论是Mesh组网还是AC+AP，都可以达到全屋覆盖和无线漫游的效果。Mesh组网在全部使用有线回程的情况下，基本上等同于AC+AP。</p><p>Mesh组网更为灵活，可用无线回程，也可用有线回程，还可以混合使用，而AC+AP则只能使用有线连接，需要提前规划布线。</p><p>另外，AC+AP方案中的AC可以置于弱电箱，AP使用面板式也不占空间，所有设备没有任何的网线和电源线外露，非常清爽美观。而Mesh方案则需拖着拉网线和电源线，美观性上要差得多。</p><p>最后，AC+AP需要购置至少一台路由/AC/PoE一体机和两台AP才有意义，如果要支持千兆网口和Wi-Fi6，这些设备都不便宜；而Mesh组网则亲民多了，两台路由的价格远低于AC+AP。</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://reid00.github.io/en/tags/mesh/>Mesh</a></li><li><a href=https://reid00.github.io/en/tags/%E7%BB%84%E7%BD%91/>组网</a></li><li><a href=https://reid00.github.io/en/tags/%E8%BD%AF%E8%B7%AF%E7%94%B1/>软路由</a></li></ul><nav class=paginav><a class=prev href=https://reid00.github.io/en/posts/other/hugo%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E5%B9%B6%E7%94%A8githubaction%E9%83%A8%E7%BD%B2/><span class=title>« Prev</span><br><span>Hugo搭建博客并用GitHubAction部署</span>
</a><a class=next href=https://reid00.github.io/en/posts/langs_linux/rust-tracing%E6%97%A5%E5%BF%97/><span class=title>Next »</span><br><span>Rust Tracing日志</span></a></nav></footer><script src=https://utteranc.es/client.js repo=Reid00/hugo-blog-talks issue-term=pathname label=Comment theme=github-light crossorigin=anonymous async></script></article></main><footer class=footer><span>&copy; 2024 <a href=https://reid00.github.io/en/>Reid's Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>