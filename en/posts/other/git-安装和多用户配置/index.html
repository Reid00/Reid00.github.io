<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Git 安装和多用户配置 | Reid's Blog</title>
<meta name=keywords content="Git,Github"><meta name=description content="Git 安装和多用户配置"><meta name=author content="Reid"><link rel=canonical href=https://reid00.github.io/en/posts/other/git-%E5%AE%89%E8%A3%85%E5%92%8C%E5%A4%9A%E7%94%A8%E6%88%B7%E9%85%8D%E7%BD%AE/><link crossorigin=anonymous href=/assets/css/stylesheet.fc220c15db4aef0318bbf30adc45d33d4d7c88deff3238b23eb255afdc472ca6.css integrity="sha256-/CIMFdtK7wMYu/MK3EXTPU18iN7/MjiyPrJVr9xHLKY=" rel="preload stylesheet" as=style><link rel=icon href=https://reid00.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://reid00.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://reid00.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://reid00.github.io/apple-touch-icon.png><link rel=mask-icon href=https://reid00.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://reid00.github.io/en/posts/other/git-%E5%AE%89%E8%A3%85%E5%92%8C%E5%A4%9A%E7%94%A8%E6%88%B7%E9%85%8D%E7%BD%AE/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><head><meta name=referrer content="no-referrer"></head><script async src="https://www.googletagmanager.com/gtag/js?id=G-QRR6GRNQGK"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-QRR6GRNQGK")}</script><meta property="og:title" content="Git 安装和多用户配置"><meta property="og:description" content="Git 安装和多用户配置"><meta property="og:type" content="article"><meta property="og:url" content="https://reid00.github.io/en/posts/other/git-%E5%AE%89%E8%A3%85%E5%92%8C%E5%A4%9A%E7%94%A8%E6%88%B7%E9%85%8D%E7%BD%AE/"><meta property="og:image" content="https://i.loli.net/2021/09/26/3OMGXylm8HUYJ6p.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-03-16T19:35:01+08:00"><meta property="article:modified_time" content="2023-03-16T19:35:01+08:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://i.loli.net/2021/09/26/3OMGXylm8HUYJ6p.png"><meta name=twitter:title content="Git 安装和多用户配置"><meta name=twitter:description content="Git 安装和多用户配置"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://reid00.github.io/en/posts/"},{"@type":"ListItem","position":2,"name":"其他日常工具相关的记录","item":"https://reid00.github.io/en/posts/other/"},{"@type":"ListItem","position":3,"name":"Git 安装和多用户配置","item":"https://reid00.github.io/en/posts/other/git-%E5%AE%89%E8%A3%85%E5%92%8C%E5%A4%9A%E7%94%A8%E6%88%B7%E9%85%8D%E7%BD%AE/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Git 安装和多用户配置","name":"Git 安装和多用户配置","description":"Git 安装和多用户配置","keywords":["Git","Github"],"articleBody":"安装 Windows 此处下载 双击exe 一直下一步安装\nLinux Linux 默认安装的Git 版本一般为1.8*, 可以通过以下方式升级\n首先，把老版本的 Git 卸掉。 1 2 sudo yum -y remove git sudo yum -y remove git-* 添加 End Point 到 CentOS 7 仓库 yum -y install https://packages.endpointdev.com/rhel/7/os/x86_64/endpoint-repo.x86_64.rpm yum -y install git check version git version 配置Git Set your name. git config --global user.name \"Your Name\" Set your email address. git config --global user.email \"user@exmample.com\" Verify the settings. git config --list Git 配置SSH key 连接Github HTTPS URL 和 SSH URL 在使用 git clone 项目时，可以使用仓库的 HTTPS URL 也可以 使用 SSH URL HTTPS URL，例如：https://github.com//.git SSH URL，例如：git@github.com:/.git\n这两种方式的主要区别在于：使用 HTTPS URL 克隆时，每次 fetch 和 push 代码都需要输入账号和密码（可以通过下面缓存的方式避免），而使用 SSH URL 在配置好 SSH Key 后，每次 fetch 和 push 代码都不需要输入账号和密码。\n初次运行 Git 前的配置 Git 环境变量 Git 提供了一个叫做 git config 的工具，专门用来配置或读取相应的工作环境变量。而正是由这些环境变量，决定了 Git 在各个环节的具体工作方式和行为。这些变量可以存放在以下三个不同的地方：\n/etc/gitconfig 文件：系统中对所有用户都普遍适用的配置。若使用 git config 时用 –system 选项，读写的就是这个文件。 ~/.gitconfig 文件：用户目录下的配置文件只适用于该用户。若使用 git config 时用 –global 选项，读写的就是这个文件。 当前项目的 Git 目录中的配置文件（也就是工作目录中的 .git/config 文件）：这里的配置仅仅针对当前项目有效。每一个级别的配置都会覆盖上层的相同配置，所以 .git/config 里的配置会覆盖 /etc/gitconfig 中的同名变量 配置用户信息 初次运行 Git 前需要配置用户信息，一个是你个人的用户名称，一个是你的电子邮件地址。这两条配置很重要，每次 Git 提交时都会引用这两条信息，说明是谁提交了更新，所以会随更新内容一起被永久纳入历史记录：\n1 2 $ git config --global user.name \"Reid\" $ git config --global user.email reid@example.com 如果用了 –global 选项，那么更改的配置文件就是位于你用户主目录下的 ~/.gitconfig 文件，以后你所有的项目都会默认使用这里配置的用户信息。如果要在某个特定的项目中使用其他名字或者邮箱，只要去掉 –global 选项重新配置即可，新的设定保存在当前项目的 .git/config 文件里。\n查看配置信息 要检查已有的配置信息，可以使用 git config –list 命令：\n1 2 3 4 5 6 7 8 (base) [root@zhangbl-c7 .git]# git config --list user.name=Reid user.email=reid@example.com core.repositoryformatversion=0 core.filemode=true core.bare=false core.logallrefupdates=true ... 有时候会看到重复的变量名，那就说明它们来自不同的配置文件（比如 /etc/gitconfig 和 ~/.gitconfig ），不过最终 Git 实际采用的是最后一个。\n也可以直接查阅某个环境变量的设定，只要把特定的环境变量名称跟在后面即可，例如： git config user.name\n检查是否已有 SSH Key 看是否存在 id_rsa 和 id_rsa.pub 文件（或者是其它文件名），如果存在说明已有 ssh key，可以直接跳过生成密钥，其中 id_rsa 为私钥，id_rsa.pub 为公钥。 ls ~/.ssh/\n生成 SSH key ssh-keygen -t rsa -C \"reid@example.com\"\n-t : 指定密钥类型，默认是rsa，可以省略\n-C: 设置注释文字，比如邮箱\n-f: 指定密钥文件存储文件名\n以上代码省略了 -f 参数，因此在运行上面那条命令后会让你输入一个文件名，用于保存刚才生成的 SSH key，例如：\n1 2 3 $ ssh-keygen -t rsa -C \"reid@example.com\" Generating public/private rsa key pair. Enter file in which to save the key (~/.ssh/id_rsa): 当然，你也可以不输入文件名，直接回车使用默认文件名（推荐），那么就会生成 id_rsa 和 id_rsa.pub 两个密钥文件。后续的一些配置也可以使用默认参数。\n添加SSH到Github 登录 github，点击头像，点击 Settings 进入设置页面。\n然后点击菜单栏的 SSH and GPG keys 进入页面添加 SSH Key。 点击 New SSH Key 按钮后进行 Key 的填写，其中 Title 随意， Key 为刚刚生成的公钥，公钥在文件 id_rsa.pub 文件中，直接 copy 文件中的内容粘贴即可。\n测试 SSH key 在终端 输入 ssh -T git@github.com, 出现\n1 2 3 The authenticity of host 'github.com (207.97.227.239)' can't be established. # RSA key fingerprint is 16:27:ac:a5:76:28:2d:36:63:1b:56:4d:eb:df:a6:48. # Are you sure you want to continue connecting (yes/no)? 这是正常的，直接输入 yes 回车既可。如果你创建 SSH key 的时候设置了密码，接下来就会提示你输入密码，如：Enter passphrase for key '~/.ssh/id_rsa': 成功显示: Hi username! You've successfully authenticated, but GitHub does not provide shell access.\n如果用户名是正确的，你已经成功设置 SSH 密钥。如果你看到 “access denied” ，者表示拒绝访问，那么你就需要使用 HTTPS 去访问，而不是 SSH 。\nGit 多用户配置(个人和公司) 公司和github,经常会遇到要多用户使用git的情况,以下为配置信息,以下拿 zhangs \u0026 zhangs2 举例\n设置ssh-key ssh-keygen -t rsa -C \"zhangs@mail.com\"\n会提示存储的文件名，输入, 第二份ssh-key 生成是一定一定要输入 防止覆盖 如果需要push时确认的密码，可在该步骤输入 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 (base) [root@-c7 go-project]# ssh-keygen -t rsa -C \"zhangs@mail.com\" Generating public/private rsa key pair. Enter file in which to save the key (/root/.ssh/id_rsa): /root/.ssh/zhangs_id_rsa # 注意此处重命名 防止覆盖 Enter passphrase (empty for no passphrase): Enter same passphrase again: Your identification has been saved in /root/.ssh/zhangs_id_rsa. Your public key has been saved in /root/.ssh/zhangs_id_rsa.pub. The key fingerprint is: SHA256:t/XljH8zYCLFcDgTxzrAjUQ7VwSobCPobUhB6ImBcvA zhangs@mail.com The key's randomart image is: +---[RSA 2048]----+ |=o +o+o*+ | |=o. =.*oo | |+oE . .o..B | |.= . = oo o | |o o o . S + . .| | o o o + + = | | . o o + o| | +.| | =| +----[SHA256]-----+ 上传到GitHub或者GitLab参考上面测试添加SSH-Key到Github SSH 配置文件 使用 ~/.ssh/config 作为我们的配置文件，如果文件不存在，我们就创建它。 vim ~/.ssh/config\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 # github email address Host github # 别名，用于区分多个 git 账号，可随意 HostName github.com # 要连接的服务器的主机名, 可以为IP 也可以为域名 User zhangs PreferredAuthentications publickey IdentityFile ~/.ssh/zhangs_id_rsa # ssh 连接使用的私钥 # gitlab email address # # 公司内网地址 Host gitlab HostName gitlab.xx.com User zhangs2 PreferredAuthentications publickey IdentityFile ~/.ssh/zhangs2_id_rsa 配置文件中的 HostName 是远程仓库的访问地址，这里可以是 IP，也可以是域名。Host 是用来拉取的仓库的别名，配不配置都行。如果 HostName 没配置的话，那就必须把 Host 配置为仓库 IP 地址或者域名，而非别名。\n其实这里的User并不会有我们预期的效果，比如你在公司的gitlab用户名一般会取实名的名字，而github是一个随意的昵称。这里并不会让你以后推送代码到gitlab时取 你在这里配置的 gitlab用户名，同样也不会推送到github时取你在这里配置的 github用户名。因为这个其实只是针对ssh key的配置的User，并不会影响你之前通过 git config --global user.name “公司gitlab用户名” 设置的git账户名\n可以分别测试一下了你的ssh 是否能连通了\n1 2 3 4 5 6 7 8 9 10 11 ssh -T git@gitlab # @后面可以是Host 名称 也可以是HostName ssh -T git@github.com ssh -T git@github Hi Reid00! You've successfully authenticated, but GitHub does not provide shell access. ssh -T git@github.com Hi Reid00! You've successfully authenticated, but GitHub does not provide shell access. 比如把github.com 的Host 设置成`Personal` 也成功 ssh -T git@personal Hi Reid00! You've successfully authenticated, but GitHub does not provide shell access. 设置user.name 前面提到 ~/.ssh/config 文件中的User 并不等同于我们的git账户名。 有可能你之前设置过 git config --global user.name \"公司gitlab实名\" 然后你发现你传代码到github的时候，也是显示的这个实名，让你觉得有点不爽。\n你可以继续到你本地的github仓库项目文件夹下去设置一个本地的用户名 git config --local user.name \"github用户名\" 再推送，就可以显示对应的用户名了。 邮箱同样git config --local user.email \"github 邮箱\"\n这里什么时候用global 什么时候用local 其实取决于你自己用哪个账户用得多一点，比如你在公司的电脑上，你就可以把公司的gitlab用户名加 –global 配置，而自己个人的github加 –local。如果你是在你自己家里的电脑上，就可以是相反的操作了。\n问题 由于公司Gitlab 不是走标准的21端口 而是走18888 端口，导致用上述方式配置好之后，在测试SSH Key 的时候无效。 1 2 ➜ .ssh ssh -T git@gitlab ssh: Could not resolve hostname gitlab.****.com:18888: Name or service not known 此时需要联系运维做域名映射，如下把 gitlab.xx.com:18888 映射到21 端口，比如proxygitlab.xx.com， 把~/.ssh/config下面的HostName 改为映射后的即可。\n1 2 3 4 5 Host gitlab HostName proxygitlab.xx.com User zhangs2 PreferredAuthentications publickey IdentityFile ~/.ssh/zhangs2_id_rsa 1 2 3 4 5 ➜ .ssh ssh -T git@gitlab The authenticity of host 'xx.xx.com (1xx.xx.xx.198)' can't be established. ECDSA key fingerprint is SHA256:AWmWq+kB2GUSTuPORU4hvRHTc1vhaFwvdNVBNXTMxbk. ECDSA key fingerprint is MD5:cb:b3:95:61:20:05:aa:8e:51:61:68:c0:14:bb:f2:e7. Are you sure you want to continue connecting (yes/no)? yes 用https方式 git clone 项目代码时用户名和密码的问题 换了新的开发机，通过上述方式配置好之后，clone github 上项目没有问题，可以clone 公司的项目时，发现由于ssh url 不能用(端口不标准)，使用https url 的时候 一直需要输入账号密码很烦。\n听同事说要执行一个命令：git credential-manager uninstall，这个命令的作用是 清除掉缓存在git中的用户名和密码。\n在我机器上没有作用，出现了 git: ‘credential-manager’ is not a git command. See ‘git –help’. 的错误\n清除掉缓存在git中的用户名和密码后，以后每次用 https 方式拉取代码都需要输入用户名和密码。执行下面的命令可以解决这个问题。\n1 2 git config --system --unset credential.helper # 或者 git config --global --unset credential.helper git config --global credential.helper store 第一个命令清除凭证助手，使用 git config –list 命令这是展示配置属性，只要不存在credential.helper表示清除成功 第二个配置凭证助手(命令将密码明文保存在~/.git-credentials)\nGithub 配置多用户 参考此处\nClone 新的仓库 1 2 3 4 5 6 7 8 9 10 11 12 # github: wylu, email: wylu@gmail.com # the default config Host github.com HostName github.com User git IdentityFile ~/.ssh/id_rsa # github: 15wylu, email: 15wylu@gmail.com Host 15wylu.github.com HostName github.com User git IdentityFile ~/.ssh/15wylu_id_rsa 这里以上面的配置为例，假设要克隆 15wylu 账号的一个项目，原来使用的命令如下： git@github.com:15wylu/15wylu.github.io.git 但是经过配置，我们已经将 15wylu 的 Host 设为了 15wylu.github.com，而不再是原来的 github.com，所以相应地 clone 的命令也变成如下： git@15wylu.github.com:15wylu/15wylu.github.io.git\n已经Clone 下来的仓库 首先使用 git remote -v 列出本地仓库对应的远程库，检查该 URL 是否与要使用的 GitHub 主机匹配，否则更新远程原始 URL, 以 15wylu 账号的仓库为例： git remote set-url origin git@15wylu.github.com:15wylu/15wylu.github.io.git\n对于本地创建新的仓库 在项目文件夹中使用 git init 中初始化目录为一个 Git 仓库。然后在 GitHub 帐户中创建新的仓库，将其作为远程库添加到本地仓库中： 同样以 15wylu 账号为例： git remote add origin git@15wylu.github.com:15wylu/remote_repo_name.git 确保 @ 和 : 之间的字符串与我们在 SSH 配置中指定的主机（Host）匹配。将初始提交推送到 GitHub 仓库。\nGit 常见操作记录 git remote 相关 git remote add repo name 为远程仓库的本地名称，可自定义，相当于给 url 对应的仓库起了个别名，对于 git clone 的仓库在本地的名称默认为 origin git remote -v 查看上传协议是 SSH/HTTPS git remote 查看远程仓库名称 git remote show origin 查看远程仓库名为origin 的详情 git remote rm 删除远程仓库 git remote set-url [--push|--add|--delete] [] 修改远程仓库, 例如 git remote set-url origin git@github.com:username/reponame.git 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 $ git remote -v origin https://github.com/Reid00/git-test.git (fetch) origin https://github.com/Reid00/git-test.git (push) (base) zhangbl@DESKTOP-8NHU8UF MINGW64 /c/test (main) $ git remote origin (base) zhangbl@DESKTOP-8NHU8UF MINGW64 /c/test (main) $ git remote show origin * remote origin Fetch URL: https://github.com/Reid00/git-test.git Push URL: https://github.com/Reid00/git-test.git HEAD branch: dev Remote branches: dev tracked main tracked Local branch configured for 'git pull': main merges with remote main Local ref configured for 'git push': main pushes to main (up to date) (base) git merge git merge dev 把dev 分支合并到当前所在分支。注意，需要先checkout 到某个分支上在执行。\ngit submodule (子模块) 添加Submodule Git 子模块(Git submodules)允许你将 git repo 保留为另一个 git repo 的子目录。Git 子模块只是在特定时间快照上对另一个 repo 的引用。Git 子模块使 Git repo 能够合并和跟踪外部代码的版本历史。\n命令 git submodule add [submodule path] =\u003e git submodule add https://github.com/****/hugo-PaperMod themes/PaperMod\n默认情况下，如果没有指定子模块存放路径，子模块将会放到一个与仓库同名的目录中。如果你想要放到其他地方，那么可以在命令结尾添加一个不同的路径，本例中子模块将会 clone 到 “themes/next” 目录下。\n命令执行完成后，会在当前工作仓库根目录下生成 .gitmodules 文件，内容如下：\n1 2 3 4 [submodule \"themes/PaperMod\"] path = themes/PaperMod url = https://github.com/adityatelange/hugo-PaperMod.git ignore = dirty 该文件保存了项目 URL 与已经拉取的本地目录之间的映射，如果有多个子模块，该文件中就会有多条记录。 要重点注意的是，该文件应像 .gitignore 文件一样受到（通过）版本控制，和该项目的其他部分一同被拉取推送。有了映射关系，克隆该项目的人就知道去哪获得子模块了。\n添加子模块完成后，当在父仓库时，Git 仍然不会跟踪 submodule 的文件， 而是将它看作该仓库中的一个特殊提交。\n推送到远程仓库后，远程仓库中 submodule 会和指定的 commit 关联起来。如果需要指定分支，可以在 “.gitmodules” 文件中加上 branch 配置，如 branch = develop。\n克隆含有submodule的项目 接下来我们将会克隆（clone）一个含有子模块的项目。 当你在克隆这样的项目时，默认会包含该子模块目录，但其中还没有任何文件，你需要执行两个命令以拉取子模块：\n1 2 git submodule init git submodule update git submodule init 用来初始化本地配置文件，而 git submodule update 则从子项目中抓取所有数据并检出父项目中列出的合适的提交。\n或者:\n1 git clone --recursive 删除子模块 把子模块从版本控制系统中移除 git rm --cached 删除子模块目录 rm -rf 编辑 “.gitmodules”，移除相应 submodule 节点内容 编辑 “.git/config”，移除相应 submodule 配置 如果有 “.git/modules” 目录，还应删除其下的相应子模块的目录 例子:\n1 2 git rm --cached themes/PaperMod rm -rf themes/PaperMod 然后删除 “.gitmodules” 中如下内容：\n1 2 3 4 [submodule \"themes/PaperMod\"] path = themes/PaperMod url = https://github.com/adityatelange/hugo-PaperMod.git ignore = dirty 最后删除 “.git/config” 中如下内容：\n1 2 3 [submodule \"themes/next\"] url = https://github.com/wylu/hexo-theme-next active = true 要把此次修改同步到远程库，还需要 push 一下。\n","wordCount":"4821","inLanguage":"en","image":"https://i.loli.net/2021/09/26/3OMGXylm8HUYJ6p.png","datePublished":"2023-03-16T19:35:01+08:00","dateModified":"2023-03-16T19:35:01+08:00","author":[{"@type":"Person","name":"Reid"}],"mainEntityOfPage":{"@type":"WebPage","@id":"https://reid00.github.io/en/posts/other/git-%E5%AE%89%E8%A3%85%E5%92%8C%E5%A4%9A%E7%94%A8%E6%88%B7%E9%85%8D%E7%BD%AE/"},"publisher":{"@type":"Organization","name":"Reid's Blog","logo":{"@type":"ImageObject","url":"https://reid00.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://reid00.github.io/en/ accesskey=h title="Reid's Blog (Alt + H)">Reid's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://reid00.github.io/en/archives/ title=Archive><span>Archive</span></a></li><li><a href=https://reid00.github.io/en/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://reid00.github.io/en/categories/ title=Categorys><span>Categorys</span></a></li><li><a href=https://reid00.github.io/en/tags/ title=Tags><span>Tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://reid00.github.io/en/>Home</a>&nbsp;»&nbsp;<a href=https://reid00.github.io/en/posts/>Posts</a>&nbsp;»&nbsp;<a href=https://reid00.github.io/en/posts/other/>其他日常工具相关的记录</a></div><h1 class="post-title entry-hint-parent">Git 安装和多用户配置</h1><div class=post-description>Git 安装和多用户配置</div><div class=post-meta><span title='2023-03-16 19:35:01 +0800 +0800'>2023-03-16 19:35</span>&nbsp;·&nbsp;10 min&nbsp;·&nbsp;4821 words&nbsp;·&nbsp;Reid</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#%e5%ae%89%e8%a3%85 aria-label=安装>安装</a><ul><li><a href=#windows aria-label=Windows>Windows</a></li><li><a href=#linux aria-label=Linux>Linux</a></li></ul></li><li><a href=#git-%e9%85%8d%e7%bd%aessh-key-%e8%bf%9e%e6%8e%a5github aria-label="Git 配置SSH key 连接Github">Git 配置SSH key 连接Github</a><ul><li><a href=#https-url-%e5%92%8c-ssh-url aria-label="HTTPS URL 和 SSH URL">HTTPS URL 和 SSH URL</a></li><li><a href=#%e5%88%9d%e6%ac%a1%e8%bf%90%e8%a1%8c-git-%e5%89%8d%e7%9a%84%e9%85%8d%e7%bd%ae aria-label="初次运行 Git 前的配置">初次运行 Git 前的配置</a><ul><li><a href=#git-%e7%8e%af%e5%a2%83%e5%8f%98%e9%87%8f aria-label="Git 环境变量">Git 环境变量</a></li><li><a href=#%e9%85%8d%e7%bd%ae%e7%94%a8%e6%88%b7%e4%bf%a1%e6%81%af aria-label=配置用户信息>配置用户信息</a></li><li><a href=#%e6%9f%a5%e7%9c%8b%e9%85%8d%e7%bd%ae%e4%bf%a1%e6%81%af aria-label=查看配置信息>查看配置信息</a></li><li><a href=#%e6%a3%80%e6%9f%a5%e6%98%af%e5%90%a6%e5%b7%b2%e6%9c%89-ssh-key aria-label="检查是否已有 SSH Key">检查是否已有 SSH Key</a></li><li><a href=#%e7%94%9f%e6%88%90-ssh-key aria-label="生成 SSH key">生成 SSH key</a></li><li><a href=#%e6%b7%bb%e5%8a%a0ssh%e5%88%b0github aria-label=添加SSH到Github>添加SSH到Github</a></li><li><a href=#%e6%b5%8b%e8%af%95-ssh-key aria-label="测试 SSH key">测试 SSH key</a></li></ul></li></ul></li><li><a href=#git-%e5%a4%9a%e7%94%a8%e6%88%b7%e9%85%8d%e7%bd%ae%e4%b8%aa%e4%ba%ba%e5%92%8c%e5%85%ac%e5%8f%b8 aria-label="Git 多用户配置(个人和公司)">Git 多用户配置(个人和公司)</a><ul><li><a href=#%e8%ae%be%e7%bd%aessh-key aria-label=设置ssh-key>设置ssh-key</a></li><li><a href=#ssh-%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6 aria-label="SSH 配置文件">SSH 配置文件</a></li><li><a href=#%e8%ae%be%e7%bd%aeusername aria-label=设置user.name>设置user.name</a></li><li><a href=#%e9%97%ae%e9%a2%98 aria-label=问题>问题</a></li></ul></li><li><a href=#github-%e9%85%8d%e7%bd%ae%e5%a4%9a%e7%94%a8%e6%88%b7 aria-label="Github 配置多用户">Github 配置多用户</a><ul><ul><li><a href=#clone-%e6%96%b0%e7%9a%84%e4%bb%93%e5%ba%93 aria-label="Clone 新的仓库">Clone 新的仓库</a></li><li><a href=#%e5%b7%b2%e7%bb%8fclone-%e4%b8%8b%e6%9d%a5%e7%9a%84%e4%bb%93%e5%ba%93 aria-label="已经Clone 下来的仓库">已经Clone 下来的仓库</a></li><li><a href=#%e5%af%b9%e4%ba%8e%e6%9c%ac%e5%9c%b0%e5%88%9b%e5%bb%ba%e6%96%b0%e7%9a%84%e4%bb%93%e5%ba%93 aria-label=对于本地创建新的仓库>对于本地创建新的仓库</a></li></ul></ul></li><li><a href=#git-%e5%b8%b8%e8%a7%81%e6%93%8d%e4%bd%9c%e8%ae%b0%e5%bd%95 aria-label="Git 常见操作记录">Git 常见操作记录</a><ul><li><a href=#git-remote-%e7%9b%b8%e5%85%b3 aria-label="git remote 相关">git remote 相关</a></li><li><a href=#git-merge aria-label="git merge">git merge</a></li><li><a href=#git-submodule-%e5%ad%90%e6%a8%a1%e5%9d%97 aria-label="git submodule (子模块)">git submodule (子模块)</a><ul><li><a href=#%e6%b7%bb%e5%8a%a0submodule aria-label=添加Submodule>添加Submodule</a></li><li><a href=#%e5%85%8b%e9%9a%86%e5%90%ab%e6%9c%89submodule%e7%9a%84%e9%a1%b9%e7%9b%ae aria-label=克隆含有submodule的项目>克隆含有submodule的项目</a></li><li><a href=#%e5%88%a0%e9%99%a4%e5%ad%90%e6%a8%a1%e5%9d%97 aria-label=删除子模块>删除子模块</a></li></ul></li></ul></li></ul></div></details></div><div class=post-content><h1 id=安装>安装<a hidden class=anchor aria-hidden=true href=#安装>#</a></h1><h2 id=windows>Windows<a hidden class=anchor aria-hidden=true href=#windows>#</a></h2><p><a href=https://git-scm.com/downloads>此处</a>下载 双击exe 一直下一步安装</p><h2 id=linux>Linux<a hidden class=anchor aria-hidden=true href=#linux>#</a></h2><p>Linux 默认安装的Git 版本一般为1.8*, 可以通过以下方式升级</p><ol><li>首先，把老版本的 Git 卸掉。</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>sudo yum -y remove git
</span></span><span class=line><span class=cl>sudo yum -y remove git-*
</span></span></code></pre></td></tr></table></div></div><ol start=2><li>添加 End Point 到 CentOS 7 仓库 <code>yum -y install https://packages.endpointdev.com/rhel/7/os/x86_64/endpoint-repo.x86_64.rpm</code></li><li><code>yum -y install git</code></li><li>check version <code>git version</code></li><li>配置Git</li></ol><ul><li>Set your name.
<code>git config --global user.name "Your Name"</code></li><li>Set your email address.
<code>git config --global user.email "user@exmample.com"</code></li><li>Verify the settings.
<code>git config --list</code></li></ul><h1 id=git-配置ssh-key-连接github>Git 配置SSH key 连接Github<a hidden class=anchor aria-hidden=true href=#git-配置ssh-key-连接github>#</a></h1><h2 id=https-url-和-ssh-url>HTTPS URL 和 SSH URL<a hidden class=anchor aria-hidden=true href=#https-url-和-ssh-url>#</a></h2><p>在使用 git clone 项目时，可以使用仓库的 HTTPS URL 也可以 使用 SSH URL
HTTPS URL，例如：<code>https://github.com/&lt;username>/&lt;repo name>.git</code>
SSH URL，例如：<code>git@github.com:&lt;username>/&lt;repo name>.git</code></p><p>这两种方式的主要区别在于：使用 HTTPS URL 克隆时，每次 fetch 和 push 代码都需要输入账号和密码（可以通过下面缓存的方式避免），而使用 SSH URL 在配置好 SSH Key 后，每次 fetch 和 push 代码都不需要输入账号和密码。</p><h2 id=初次运行-git-前的配置>初次运行 Git 前的配置<a hidden class=anchor aria-hidden=true href=#初次运行-git-前的配置>#</a></h2><h3 id=git-环境变量>Git 环境变量<a hidden class=anchor aria-hidden=true href=#git-环境变量>#</a></h3><p>Git 提供了一个叫做 git config 的工具，专门用来配置或读取相应的工作环境变量。而正是由这些环境变量，决定了 Git 在各个环节的具体工作方式和行为。这些变量可以存放在以下三个不同的地方：</p><ul><li><code>/etc/gitconfig</code> 文件：系统中对所有用户都普遍适用的配置。若使用 git config 时用 &ndash;system 选项，读写的就是这个文件。</li><li><code>~/.gitconfig</code> 文件：用户目录下的配置文件只适用于该用户。若使用 git config 时用 &ndash;global 选项，读写的就是这个文件。</li><li>当前项目的 Git 目录中的配置文件（也就是工作目录中的 .git/config 文件）：这里的配置仅仅针对当前项目有效。每一个级别的配置都会覆盖上层的相同配置，所以 .git/config 里的配置会覆盖 /etc/gitconfig 中的同名变量</li></ul><h3 id=配置用户信息>配置用户信息<a hidden class=anchor aria-hidden=true href=#配置用户信息>#</a></h3><p>初次运行 Git 前需要配置用户信息，一个是你个人的用户名称，一个是你的电子邮件地址。这两条配置很重要，每次 Git 提交时都会引用这两条信息，说明是谁提交了更新，所以会随更新内容一起被永久纳入历史记录：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>$ git config --global user.name <span class=s2>&#34;Reid&#34;</span>
</span></span><span class=line><span class=cl>$ git config --global user.email reid@example.com
</span></span></code></pre></td></tr></table></div></div><p>如果用了 &ndash;global 选项，那么更改的配置文件就是位于你用户主目录下的 ~/.gitconfig 文件，以后你所有的项目都会默认使用这里配置的用户信息。如果要在某个特定的项目中使用其他名字或者邮箱，只要去掉 &ndash;global 选项重新配置即可，新的设定保存在当前项目的 .git/config 文件里。</p><h3 id=查看配置信息>查看配置信息<a hidden class=anchor aria-hidden=true href=#查看配置信息>#</a></h3><p>要检查已有的配置信息，可以使用 git config &ndash;list 命令：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=o>(</span>base<span class=o>)</span> <span class=o>[</span>root@zhangbl-c7 .git<span class=o>]</span><span class=c1># git config --list</span>
</span></span><span class=line><span class=cl>user.name<span class=o>=</span>Reid
</span></span><span class=line><span class=cl>user.email<span class=o>=</span>reid@example.com
</span></span><span class=line><span class=cl>core.repositoryformatversion<span class=o>=</span><span class=m>0</span>
</span></span><span class=line><span class=cl>core.filemode<span class=o>=</span><span class=nb>true</span>
</span></span><span class=line><span class=cl>core.bare<span class=o>=</span><span class=nb>false</span>
</span></span><span class=line><span class=cl>core.logallrefupdates<span class=o>=</span><span class=nb>true</span>
</span></span><span class=line><span class=cl>...
</span></span></code></pre></td></tr></table></div></div><p>有时候会看到重复的变量名，那就说明它们来自不同的配置文件（比如 /etc/gitconfig 和 ~/.gitconfig ），不过最终 Git 实际采用的是最后一个。</p><p>也可以直接查阅某个环境变量的设定，只要把特定的环境变量名称跟在后面即可，例如：
<code>git config user.name</code></p><h3 id=检查是否已有-ssh-key>检查是否已有 SSH Key<a hidden class=anchor aria-hidden=true href=#检查是否已有-ssh-key>#</a></h3><p>看是否存在 id_rsa 和 id_rsa.pub 文件（或者是其它文件名），如果存在说明已有 ssh key，可以直接跳过生成密钥，其中 id_rsa 为私钥，id_rsa.pub 为公钥。
<code>ls ~/.ssh/</code></p><h3 id=生成-ssh-key>生成 SSH key<a hidden class=anchor aria-hidden=true href=#生成-ssh-key>#</a></h3><p><code>ssh-keygen -t rsa -C "reid@example.com"</code></p><p><code>-t </code>: 指定密钥类型，默认是rsa，可以省略</p><p><code>-C</code>: 设置注释文字，比如邮箱</p><p><code>-f</code>: 指定密钥文件存储文件名</p><p>以上代码省略了 -f 参数，因此在运行上面那条命令后会让你输入一个文件名，用于保存刚才生成的 SSH key，例如：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>$ ssh-keygen -t rsa -C <span class=s2>&#34;reid@example.com&#34;</span>
</span></span><span class=line><span class=cl>Generating public/private rsa key pair.
</span></span><span class=line><span class=cl>Enter file in which to save the key <span class=o>(</span>~/.ssh/id_rsa<span class=o>)</span>:
</span></span></code></pre></td></tr></table></div></div><p>当然，你也可以不输入文件名，直接回车使用默认文件名（推荐），那么就会生成 id_rsa 和 id_rsa.pub 两个密钥文件。后续的一些配置也可以使用默认参数。</p><h3 id=添加ssh到github>添加SSH到Github<a hidden class=anchor aria-hidden=true href=#添加ssh到github>#</a></h3><p>登录 github，点击头像，点击 Settings 进入设置页面。</p><p>然后点击菜单栏的 SSH and GPG keys 进入页面添加 SSH Key。
<img loading=lazy src=https://raw.githubusercontent.com/Reid00/image-host/main/20230308/image.6v9chqog3vc.webp alt=sshkey>
点击 New SSH Key 按钮后进行 Key 的填写，其中 Title 随意， Key 为刚刚生成的公钥，公钥在文件 id_rsa.pub 文件中，直接 copy 文件中的内容粘贴即可。</p><h3 id=测试-ssh-key>测试 SSH key<a hidden class=anchor aria-hidden=true href=#测试-ssh-key>#</a></h3><p>在终端 输入 <code>ssh -T git@github.com</code>, 出现</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>The authenticity of host <span class=s1>&#39;github.com (207.97.227.239)&#39;</span> can<span class=err>&#39;</span>t be established.
</span></span><span class=line><span class=cl><span class=c1># RSA key fingerprint is 16:27:ac:a5:76:28:2d:36:63:1b:56:4d:eb:df:a6:48.</span>
</span></span><span class=line><span class=cl><span class=c1># Are you sure you want to continue connecting (yes/no)?</span>
</span></span></code></pre></td></tr></table></div></div><p>这是正常的，直接输入 yes 回车既可。如果你创建 SSH key 的时候设置了密码，接下来就会提示你输入密码，如：<code>Enter passphrase for key '~/.ssh/id_rsa':</code>
成功显示:
<code>Hi username! You've successfully authenticated, but GitHub does not provide shell access.</code></p><p>如果用户名是正确的，你已经成功设置 SSH 密钥。如果你看到 &ldquo;access denied&rdquo; ，者表示拒绝访问，那么你就需要使用 HTTPS 去访问，而不是 SSH 。</p><h1 id=git-多用户配置个人和公司>Git 多用户配置(个人和公司)<a hidden class=anchor aria-hidden=true href=#git-多用户配置个人和公司>#</a></h1><p>公司和github,经常会遇到要多用户使用git的情况,以下为配置信息,以下拿 zhangs & zhangs2 举例</p><h2 id=设置ssh-key>设置ssh-key<a hidden class=anchor aria-hidden=true href=#设置ssh-key>#</a></h2><p><code>ssh-keygen -t rsa -C "zhangs@mail.com"</code></p><ul><li>会提示存储的文件名，输入, 第二份ssh-key 生成是一定一定要输入 防止覆盖</li><li>如果需要push时确认的密码，可在该步骤输入</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=o>(</span>base<span class=o>)</span> <span class=o>[</span>root@-c7 go-project<span class=o>]</span><span class=c1># ssh-keygen -t rsa -C &#34;zhangs@mail.com&#34;</span>
</span></span><span class=line><span class=cl>Generating public/private rsa key pair.
</span></span><span class=line><span class=cl>Enter file in which to save the key <span class=o>(</span>/root/.ssh/id_rsa<span class=o>)</span>: /root/.ssh/zhangs_id_rsa  <span class=c1># 注意此处重命名 防止覆盖</span>
</span></span><span class=line><span class=cl>Enter passphrase <span class=o>(</span>empty <span class=k>for</span> no passphrase<span class=o>)</span>: 
</span></span><span class=line><span class=cl>Enter same passphrase again: 
</span></span><span class=line><span class=cl>Your identification has been saved in /root/.ssh/zhangs_id_rsa.
</span></span><span class=line><span class=cl>Your public key has been saved in /root/.ssh/zhangs_id_rsa.pub.
</span></span><span class=line><span class=cl>The key fingerprint is:
</span></span><span class=line><span class=cl>SHA256:t/XljH8zYCLFcDgTxzrAjUQ7VwSobCPobUhB6ImBcvA zhangs@mail.com
</span></span><span class=line><span class=cl>The key<span class=err>&#39;</span>s randomart image is:
</span></span><span class=line><span class=cl>+---<span class=o>[</span>RSA 2048<span class=o>]</span>----+
</span></span><span class=line><span class=cl><span class=p>|</span><span class=o>=</span>o    +o+o*+     <span class=p>|</span>
</span></span><span class=line><span class=cl><span class=p>|</span><span class=o>=</span>o.    <span class=o>=</span>.*oo     <span class=p>|</span>
</span></span><span class=line><span class=cl><span class=p>|</span>+oE . .o..B      <span class=p>|</span>
</span></span><span class=line><span class=cl><span class=p>|</span>.<span class=o>=</span> . <span class=o>=</span>  oo o     <span class=p>|</span>
</span></span><span class=line><span class=cl><span class=p>|</span>o o o . S + .   .<span class=p>|</span>
</span></span><span class=line><span class=cl><span class=p>|</span> o o     o + + <span class=o>=</span> <span class=p>|</span>
</span></span><span class=line><span class=cl><span class=p>|</span>  .       o o + o<span class=p>|</span>
</span></span><span class=line><span class=cl><span class=p>|</span>               +.<span class=p>|</span>
</span></span><span class=line><span class=cl><span class=p>|</span>                <span class=o>=</span><span class=p>|</span>
</span></span><span class=line><span class=cl>+----<span class=o>[</span>SHA256<span class=o>]</span>-----+
</span></span></code></pre></td></tr></table></div></div><ul><li>上传到GitHub或者GitLab参考上面测试<a href=/en/posts/other/git-%E5%AE%89%E8%A3%85%E5%92%8C%E5%A4%9A%E7%94%A8%E6%88%B7%E9%85%8D%E7%BD%AE/#添加ssh到github>添加SSH-Key到Github</a></li></ul><h2 id=ssh-配置文件>SSH 配置文件<a hidden class=anchor aria-hidden=true href=#ssh-配置文件>#</a></h2><p>使用 ~/.ssh/config 作为我们的配置文件，如果文件不存在，我们就创建它。
<code>vim ~/.ssh/config</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=c1># github email address</span>
</span></span><span class=line><span class=cl>Host github  <span class=c1># 别名，用于区分多个 git 账号，可随意</span>
</span></span><span class=line><span class=cl>    HostName github.com  <span class=c1># 要连接的服务器的主机名, 可以为IP 也可以为域名</span>
</span></span><span class=line><span class=cl>    User zhangs
</span></span><span class=line><span class=cl>    PreferredAuthentications publickey
</span></span><span class=line><span class=cl>    IdentityFile ~/.ssh/zhangs_id_rsa  <span class=c1># ssh 连接使用的私钥</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># gitlab email address</span>
</span></span><span class=line><span class=cl><span class=c1># # 公司内网地址</span>
</span></span><span class=line><span class=cl>Host gitlab
</span></span><span class=line><span class=cl>    HostName gitlab.xx.com
</span></span><span class=line><span class=cl>    User zhangs2
</span></span><span class=line><span class=cl>    PreferredAuthentications publickey
</span></span><span class=line><span class=cl>    IdentityFile ~/.ssh/zhangs2_id_rsa
</span></span></code></pre></td></tr></table></div></div><blockquote><p>配置文件中的 HostName 是远程仓库的访问地址，这里可以是 IP，也可以是域名。Host 是用来拉取的仓库的别名，配不配置都行。如果 HostName 没配置的话，那就必须把 Host 配置为仓库 IP 地址或者域名，而非别名。</p></blockquote><p>其实这里的User并不会有我们预期的效果，比如你在公司的gitlab用户名一般会取实名的名字，而github是一个随意的昵称。这里并不会让你以后推送代码到gitlab时取 你在这里配置的 gitlab用户名，同样也不会推送到github时取你在这里配置的 github用户名。因为这个其实只是针对ssh key的配置的User，并不会影响你之前通过 <code>git config --global user.name</code> &ldquo;公司gitlab用户名&rdquo; 设置的git账户名</p><p>可以分别测试一下了你的ssh 是否能连通了</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>ssh -T git@gitlab       <span class=c1># @后面可以是Host 名称 也可以是HostName</span>
</span></span><span class=line><span class=cl>ssh -T git@github.com
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>ssh -T git@github
</span></span><span class=line><span class=cl>Hi Reid00! You<span class=s1>&#39;ve successfully authenticated, but GitHub does not provide shell access.
</span></span></span><span class=line><span class=cl><span class=s1>ssh -T git@github.com
</span></span></span><span class=line><span class=cl><span class=s1>Hi Reid00! You&#39;</span>ve successfully authenticated, but GitHub does not provide shell access.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>比如把github.com 的Host 设置成<span class=sb>`</span>Personal<span class=sb>`</span> 也成功
</span></span><span class=line><span class=cl>ssh -T git@personal
</span></span><span class=line><span class=cl>Hi Reid00! You<span class=err>&#39;</span>ve successfully authenticated, but GitHub does not provide shell access.
</span></span></code></pre></td></tr></table></div></div><h2 id=设置username>设置<code>user.name</code><a hidden class=anchor aria-hidden=true href=#设置username>#</a></h2><p>前面提到 ~/.ssh/config 文件中的User 并不等同于我们的git账户名。
有可能你之前设置过
<code>git config --global user.name "公司gitlab实名"</code>
然后你发现你传代码到github的时候，也是显示的这个实名，让你觉得有点不爽。</p><p>你可以继续到你<strong>本地的github仓库项目文件夹</strong>下去设置一个本地的用户名
<code>git config --local user.name "github用户名"</code>
再推送，就可以显示对应的用户名了。
邮箱同样<code>git config --local user.email "github 邮箱"</code></p><p>这里什么时候用global 什么时候用local 其实取决于你自己用哪个账户用得多一点，比如你在公司的电脑上，你就可以把公司的gitlab用户名加 &ndash;global 配置，而自己个人的github加 &ndash;local。如果你是在你自己家里的电脑上，就可以是相反的操作了。</p><h2 id=问题>问题<a hidden class=anchor aria-hidden=true href=#问题>#</a></h2><ol><li>由于公司Gitlab 不是走标准的21端口 而是走18888 端口，导致用上述方式配置好之后，在测试SSH Key 的时候无效。</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>➜  .ssh ssh -T git@gitlab    
</span></span><span class=line><span class=cl>ssh: Could not resolve hostname gitlab.****.com:18888: Name or service not known
</span></span></code></pre></td></tr></table></div></div><p>此时需要联系运维做域名映射，如下把 <code>gitlab.xx.com:18888</code> 映射到21 端口，比如<code>proxygitlab.xx.com</code>， 把<code>~/.ssh/config</code>下面的HostName 改为映射后的即可。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>Host gitlab
</span></span><span class=line><span class=cl>    HostName proxygitlab.xx.com
</span></span><span class=line><span class=cl>    User zhangs2
</span></span><span class=line><span class=cl>    PreferredAuthentications publickey
</span></span><span class=line><span class=cl>    IdentityFile ~/.ssh/zhangs2_id_rsa
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>➜  .ssh ssh -T git@gitlab
</span></span><span class=line><span class=cl>The authenticity of host <span class=s1>&#39;xx.xx.com (1xx.xx.xx.198)&#39;</span> can<span class=err>&#39;</span>t be established.
</span></span><span class=line><span class=cl>ECDSA key fingerprint is SHA256:AWmWq+kB2GUSTuPORU4hvRHTc1vhaFwvdNVBNXTMxbk.
</span></span><span class=line><span class=cl>ECDSA key fingerprint is MD5:cb:b3:95:61:20:05:aa:8e:51:61:68:c0:14:bb:f2:e7.
</span></span><span class=line><span class=cl>Are you sure you want to <span class=k>continue</span> connecting <span class=o>(</span>yes/no<span class=o>)</span>? yes
</span></span></code></pre></td></tr></table></div></div><ol start=2><li>用https方式 git clone 项目代码时用户名和密码的问题</li></ol><p>换了新的开发机，通过上述方式配置好之后，clone github 上项目没有问题，可以clone 公司的项目时，发现由于ssh url 不能用(端口不标准)，使用https url 的时候 一直需要输入账号密码很烦。</p><p>听同事说要执行一个命令：<code>git credential-manager uninstall</code>，这个命令的作用是 清除掉缓存在git中的用户名和密码。</p><blockquote><p>在我机器上没有作用，出现了 git: &lsquo;credential-manager&rsquo; is not a git command. See &lsquo;git &ndash;help&rsquo;. 的错误</p></blockquote><p>清除掉缓存在git中的用户名和密码后，以后每次用 https 方式拉取代码都需要输入用户名和密码。执行下面的命令可以解决这个问题。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>git config --system --unset credential.helper <span class=c1># 或者 git config --global --unset credential.helper</span>
</span></span><span class=line><span class=cl>git config --global credential.helper store
</span></span></code></pre></td></tr></table></div></div><p>第一个命令清除凭证助手，使用 git config &ndash;list 命令这是展示配置属性，只要不存在credential.helper表示清除成功
第二个配置凭证助手(命令将密码明文保存在<code>~/.git-credentials</code>)</p><h1 id=github-配置多用户>Github 配置多用户<a hidden class=anchor aria-hidden=true href=#github-配置多用户>#</a></h1><p>参考<a href=https://wylu.me/posts/e186bfe8/>此处</a></p><h3 id=clone-新的仓库>Clone 新的仓库<a hidden class=anchor aria-hidden=true href=#clone-新的仓库>#</a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=c1># github: wylu, email: wylu@gmail.com</span>
</span></span><span class=line><span class=cl><span class=c1># the default config</span>
</span></span><span class=line><span class=cl>Host github.com
</span></span><span class=line><span class=cl>   HostName github.com
</span></span><span class=line><span class=cl>   User git
</span></span><span class=line><span class=cl>   IdentityFile ~/.ssh/id_rsa
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># github: 15wylu, email: 15wylu@gmail.com</span>
</span></span><span class=line><span class=cl>Host 15wylu.github.com
</span></span><span class=line><span class=cl>   HostName github.com
</span></span><span class=line><span class=cl>   User git
</span></span><span class=line><span class=cl>   IdentityFile ~/.ssh/15wylu_id_rsa
</span></span></code></pre></td></tr></table></div></div><p>这里以上面的配置为例，假设要克隆 15wylu 账号的一个项目，原来使用的命令如下：
<code>git@github.com:15wylu/15wylu.github.io.git</code>
但是经过配置，我们已经将 15wylu 的 Host 设为了 <code>15wylu.github.com</code>，而不再是原来的 <code>github.com</code>，所以相应地 clone 的命令也变成如下：
<code>git@15wylu.github.com:15wylu/15wylu.github.io.git</code></p><h3 id=已经clone-下来的仓库>已经Clone 下来的仓库<a hidden class=anchor aria-hidden=true href=#已经clone-下来的仓库>#</a></h3><p>首先使用 git remote -v 列出本地仓库对应的远程库，检查该 URL 是否与要使用的 GitHub 主机匹配，否则更新远程原始 URL, 以 15wylu 账号的仓库为例：
<code>git remote set-url origin git@15wylu.github.com:15wylu/15wylu.github.io.git</code></p><h3 id=对于本地创建新的仓库>对于本地创建新的仓库<a hidden class=anchor aria-hidden=true href=#对于本地创建新的仓库>#</a></h3><p>在项目文件夹中使用 git init 中初始化目录为一个 Git 仓库。然后在 GitHub 帐户中创建新的仓库，将其作为远程库添加到本地仓库中：
同样以 15wylu 账号为例：
<code>git remote add origin git@15wylu.github.com:15wylu/remote_repo_name.git</code>
确保 @ 和 : 之间的字符串与我们在 SSH 配置中指定的主机（Host）匹配。将初始提交推送到 GitHub 仓库。</p><h1 id=git-常见操作记录>Git 常见操作记录<a hidden class=anchor aria-hidden=true href=#git-常见操作记录>#</a></h1><h2 id=git-remote-相关>git remote 相关<a hidden class=anchor aria-hidden=true href=#git-remote-相关>#</a></h2><ul><li><code>git remote add &lt;repo name> &lt;repo url></code> repo name 为远程仓库的本地名称，可自定义，相当于给 url 对应的仓库起了个别名，对于 git clone 的仓库在本地的名称默认为 origin</li><li><code>git remote -v</code> 查看上传协议是 SSH/HTTPS</li><li><code>git remote</code> 查看远程仓库名称</li><li><code>git remote show origin</code> 查看远程仓库名为origin 的详情</li><li><code>git remote rm &lt;repo name></code> 删除远程仓库</li><li><code>git remote set-url [--push|--add|--delete] &lt;repo name> &lt;new url> [&lt;old url>]</code> 修改远程仓库, 例如 <code>git remote set-url origin git@github.com:username/reponame.git</code></li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>$ git remote -v
</span></span><span class=line><span class=cl>origin  https://github.com/Reid00/git-test.git <span class=o>(</span>fetch<span class=o>)</span>
</span></span><span class=line><span class=cl>origin  https://github.com/Reid00/git-test.git <span class=o>(</span>push<span class=o>)</span> 
</span></span><span class=line><span class=cl><span class=o>(</span>base<span class=o>)</span> 
</span></span><span class=line><span class=cl>zhangbl@DESKTOP-8NHU8UF MINGW64 /c/test <span class=o>(</span>main<span class=o>)</span>
</span></span><span class=line><span class=cl>$ git remote
</span></span><span class=line><span class=cl>origin
</span></span><span class=line><span class=cl><span class=o>(</span>base<span class=o>)</span> 
</span></span><span class=line><span class=cl>zhangbl@DESKTOP-8NHU8UF MINGW64 /c/test <span class=o>(</span>main<span class=o>)</span>
</span></span><span class=line><span class=cl>$ git remote show origin
</span></span><span class=line><span class=cl>* remote origin
</span></span><span class=line><span class=cl>  Fetch URL: https://github.com/Reid00/git-test.git
</span></span><span class=line><span class=cl>  Push  URL: https://github.com/Reid00/git-test.git
</span></span><span class=line><span class=cl>  HEAD branch: dev
</span></span><span class=line><span class=cl>  Remote branches:
</span></span><span class=line><span class=cl>    dev  tracked
</span></span><span class=line><span class=cl>    main tracked
</span></span><span class=line><span class=cl>  Local branch configured <span class=k>for</span> <span class=s1>&#39;git pull&#39;</span>:
</span></span><span class=line><span class=cl>    main merges with remote main
</span></span><span class=line><span class=cl>  Local ref configured <span class=k>for</span> <span class=s1>&#39;git push&#39;</span>:
</span></span><span class=line><span class=cl>    main pushes to main <span class=o>(</span>up to date<span class=o>)</span>
</span></span><span class=line><span class=cl><span class=o>(</span>base<span class=o>)</span> 
</span></span></code></pre></td></tr></table></div></div><h2 id=git-merge>git merge<a hidden class=anchor aria-hidden=true href=#git-merge>#</a></h2><p><code>git merge dev</code> 把dev 分支合并到当前所在分支。注意，需要先checkout 到某个分支上在执行。</p><h2 id=git-submodule-子模块>git submodule (子模块)<a hidden class=anchor aria-hidden=true href=#git-submodule-子模块>#</a></h2><h3 id=添加submodule>添加Submodule<a hidden class=anchor aria-hidden=true href=#添加submodule>#</a></h3><p>Git 子模块(Git submodules)允许你将 git repo 保留为另一个 git repo 的子目录。Git 子模块只是在特定时间快照上对另一个 repo 的引用。Git 子模块使 Git repo 能够合并和跟踪外部代码的版本历史。</p><p>命令 <code>git submodule add &lt;repo url> [submodule path]</code> => <code>git submodule add https://github.com/****/hugo-PaperMod themes/PaperMod</code></p><p>默认情况下，如果没有指定子模块存放路径，子模块将会放到一个与仓库同名的目录中。如果你想要放到其他地方，那么可以在命令结尾添加一个不同的路径，本例中子模块将会 clone 到 &ldquo;themes/next&rdquo; 目录下。</p><p>命令执行完成后，会在当前工作仓库根目录下生成 .gitmodules 文件，内容如下：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=o>[</span>submodule <span class=s2>&#34;themes/PaperMod&#34;</span><span class=o>]</span>
</span></span><span class=line><span class=cl>	<span class=nv>path</span> <span class=o>=</span> themes/PaperMod
</span></span><span class=line><span class=cl>	<span class=nv>url</span> <span class=o>=</span> https://github.com/adityatelange/hugo-PaperMod.git
</span></span><span class=line><span class=cl>	<span class=nv>ignore</span> <span class=o>=</span> dirty
</span></span></code></pre></td></tr></table></div></div><p>该文件保存了项目 URL 与已经拉取的本地目录之间的映射，如果有多个子模块，该文件中就会有多条记录。
要重点注意的是，该文件应像 .gitignore 文件一样受到（通过）版本控制，和该项目的其他部分一同被拉取推送。有了映射关系，克隆该项目的人就知道去哪获得子模块了。</p><p>添加子模块完成后，当在父仓库时，Git 仍然不会跟踪 submodule 的文件， 而是将它看作该仓库中的一个特殊提交。</p><p>推送到远程仓库后，远程仓库中 submodule 会和指定的 commit 关联起来。如果需要指定分支，可以在 &ldquo;.gitmodules&rdquo; 文件中加上 branch 配置，如 branch = develop。</p><h3 id=克隆含有submodule的项目>克隆含有submodule的项目<a hidden class=anchor aria-hidden=true href=#克隆含有submodule的项目>#</a></h3><p>接下来我们将会克隆（clone）一个含有子模块的项目。 当你在克隆这样的项目时，默认会包含该子模块目录，但其中还没有任何文件，你需要执行两个命令以拉取子模块：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>git submodule init
</span></span><span class=line><span class=cl>git submodule update
</span></span></code></pre></td></tr></table></div></div><p>git submodule init 用来初始化本地配置文件，而 git submodule update 则从子项目中抓取所有数据并检出父项目中列出的合适的提交。</p><p>或者:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>git clone --recursive &lt;parent repo url&gt;
</span></span></code></pre></td></tr></table></div></div><h3 id=删除子模块>删除子模块<a hidden class=anchor aria-hidden=true href=#删除子模块>#</a></h3><ol><li>把子模块从版本控制系统中移除
<code>git rm --cached &lt;submodule path></code></li><li>删除子模块目录
<code>rm -rf &lt;submodule path></code></li><li>编辑 &ldquo;.gitmodules&rdquo;，移除相应 submodule 节点内容</li><li>编辑 &ldquo;.git/config&rdquo;，移除相应 submodule 配置</li><li>如果有 &ldquo;.git/modules&rdquo; 目录，还应删除其下的相应子模块的目录</li></ol><p>例子:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>git rm --cached themes/PaperMod
</span></span><span class=line><span class=cl>rm -rf themes/PaperMod
</span></span></code></pre></td></tr></table></div></div><p>然后删除 &ldquo;.gitmodules&rdquo; 中如下内容：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=o>[</span>submodule <span class=s2>&#34;themes/PaperMod&#34;</span><span class=o>]</span>
</span></span><span class=line><span class=cl>	<span class=nv>path</span> <span class=o>=</span> themes/PaperMod
</span></span><span class=line><span class=cl>	<span class=nv>url</span> <span class=o>=</span> https://github.com/adityatelange/hugo-PaperMod.git
</span></span><span class=line><span class=cl>	<span class=nv>ignore</span> <span class=o>=</span> dirty
</span></span></code></pre></td></tr></table></div></div><p>最后删除 &ldquo;.git/config&rdquo; 中如下内容：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=o>[</span>submodule <span class=s2>&#34;themes/next&#34;</span><span class=o>]</span>
</span></span><span class=line><span class=cl>    <span class=nv>url</span> <span class=o>=</span> https://github.com/wylu/hexo-theme-next
</span></span><span class=line><span class=cl>    <span class=nv>active</span> <span class=o>=</span> <span class=nb>true</span>
</span></span></code></pre></td></tr></table></div></div><p>要把此次修改同步到远程库，还需要 push 一下。</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://reid00.github.io/en/tags/git/>Git</a></li><li><a href=https://reid00.github.io/en/tags/github/>Github</a></li></ul><nav class=paginav><a class=prev href=https://reid00.github.io/en/posts/langs_linux/dockerfile%E6%A1%88%E4%BE%8B/><span class=title>« Prev</span><br><span>Dockerfile案例</span>
</a><a class=next href=https://reid00.github.io/en/posts/langs_linux/golang-murmur3/><span class=title>Next »</span><br><span>Golang MurMur3</span></a></nav></footer><script src=https://utteranc.es/client.js repo=Reid00/hugo-blog-talks issue-term=pathname label=Comment theme=github-light crossorigin=anonymous async></script></article></main><footer class=footer><span>&copy; 2024 <a href=https://reid00.github.io/en/>Reid's Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>