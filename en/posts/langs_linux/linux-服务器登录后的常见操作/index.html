<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Linux 服务器登录后的常见操作 | Reid's Blog</title>
<meta name=keywords content="Linux,Server"><meta name=description content="Linux 服务器登录后的常见操作"><meta name=author content="Reid"><link rel=canonical href=https://reid00.github.io/en/posts/langs_linux/linux-%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%99%BB%E5%BD%95%E5%90%8E%E7%9A%84%E5%B8%B8%E8%A7%81%E6%93%8D%E4%BD%9C/><link crossorigin=anonymous href=/assets/css/stylesheet.d7fb4cbf980fe688a21621b06a795933c4e6bb2d4070ec940667af1715d84af2.css integrity="sha256-1/tMv5gP5oiiFiGwanlZM8Tmuy1AcOyUBmevFxXYSvI=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://reid00.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://reid00.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://reid00.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://reid00.github.io/apple-touch-icon.png><link rel=mask-icon href=https://reid00.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://reid00.github.io/en/posts/langs_linux/linux-%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%99%BB%E5%BD%95%E5%90%8E%E7%9A%84%E5%B8%B8%E8%A7%81%E6%93%8D%E4%BD%9C/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><head><meta name=referrer content="no-referrer"></head><script async src="https://www.googletagmanager.com/gtag/js?id=G-QRR6GRNQGK"></script><script>var doNotTrack=!1,dnt;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-QRR6GRNQGK")}</script><meta property="og:title" content="Linux 服务器登录后的常见操作"><meta property="og:description" content="Linux 服务器登录后的常见操作"><meta property="og:type" content="article"><meta property="og:url" content="https://reid00.github.io/en/posts/langs_linux/linux-%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%99%BB%E5%BD%95%E5%90%8E%E7%9A%84%E5%B8%B8%E8%A7%81%E6%93%8D%E4%BD%9C/"><meta property="og:image" content="https://i.loli.net/2021/09/26/3OMGXylm8HUYJ6p.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-03-16T19:34:59+08:00"><meta property="article:modified_time" content="2023-03-16T19:34:59+08:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://i.loli.net/2021/09/26/3OMGXylm8HUYJ6p.png"><meta name=twitter:title content="Linux 服务器登录后的常见操作"><meta name=twitter:description content="Linux 服务器登录后的常见操作"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://reid00.github.io/en/posts/"},{"@type":"ListItem","position":2,"name":"学习的编程语言Golang，Python，Rust 和Linux 相关的记录 ","item":"https://reid00.github.io/en/posts/langs_linux/"},{"@type":"ListItem","position":3,"name":"Linux 服务器登录后的常见操作","item":"https://reid00.github.io/en/posts/langs_linux/linux-%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%99%BB%E5%BD%95%E5%90%8E%E7%9A%84%E5%B8%B8%E8%A7%81%E6%93%8D%E4%BD%9C/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Linux 服务器登录后的常见操作","name":"Linux 服务器登录后的常见操作","description":"Linux 服务器登录后的常见操作","keywords":["Linux","Server"],"articleBody":"Linux修改主机名修改hostname的方法 临时修改Linux主机名的方法 hostname newname 执行命令后发现没有变化。重新开终端即可显示，你也可以通过uname -n命令来查看当前的主机名。\n永久修改Linux主机名的方法\n使用 hostnamectl 来改变主机名称 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 [root@nebula3-01 ~]# hostnamectl Static hostname: nebula3-01 Icon name: computer-vm Chassis: vm Machine ID: 1d8987d66da0c7cd7960ca4e5aefe30f Boot ID: 717058195e934eb88f4631adf25ab163 Virtualization: kvm Operating System: CentOS Linux 7 (Core) CPE OS Name: cpe:/o:centos:centos:7 Kernel: Linux 3.10.0-1160.el7.x86_64 Architecture: x86-64 [root@nebula-test02 ~]# hostnamectl set-hostname nebula3-02 [root@nebula-test02 ~]# hostnamectl Static hostname: nebula3-02 Icon name: computer-vm Chassis: vm Machine ID: 1d8987d66da0c7cd7960ca4e5aefe30f Boot ID: 6b836dcf9c274ef48f334e6b53f8e296 Virtualization: kvm Operating System: CentOS Linux 7 (Core) CPE OS Name: cpe:/o:centos:centos:7 Kernel: Linux 3.10.0-1160.el7.x86_64 Architecture: x86-64 [root@nebula-test02 ~]# 退出后，重新登录即可\n通过修改/etc/hostname 文件，本质和上面一样 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 [root@nebula-test03 ~]# hostnamectl Static hostname: nebula-test03.novalocal Icon name: computer-vm Chassis: vm Machine ID: 1d8987d66da0c7cd7960ca4e5aefe30f Boot ID: 683f9e34bce149659226bcdfc0dce6ed Virtualization: kvm Operating System: CentOS Linux 7 (Core) CPE OS Name: cpe:/o:centos:centos:7 Kernel: Linux 3.10.0-1160.el7.x86_64 Architecture: x86-64 [root@nebula-test03 ~]# cat /etc/hostname nebula-test03.novalocal [root@nebula-test03 ~]# echo \"nebula3-03\" \u003e /etc/hostname [root@nebula-test03 ~]# hostnamectl Static hostname: nebula3-03 Transient hostname: nebula-test03.novalocal Icon name: computer-vm Chassis: vm Machine ID: 1d8987d66da0c7cd7960ca4e5aefe30f Boot ID: 683f9e34bce149659226bcdfc0dce6ed Virtualization: kvm Operating System: CentOS Linux 7 (Core) CPE OS Name: cpe:/o:centos:centos:7 Kernel: Linux 3.10.0-1160.el7.x86_64 Architecture: x86-64 通过机器名ping 通彼此 修改/etc/hosts 文件，添加 ip 域名 即可。 vim /etc/hosts\n1 2 3 4 172.18.163.124 test-server-01 172.18.163.115 test-server-02 172.18.163.114 test-server-03 172.18.163.85 test-server-04 查看服务器是否为SSD 方法一 判断cat /sys/block/*/queue/rotational 的返回值（其中*为你的硬盘设备名称，例如sda等等），如果返回1则表示磁盘可旋转，那么就是HDD了；反之，如果返回0，则表示磁盘不可以旋转，那么就有可能是SSD了。\n方法二 lsblk -d -o name,rota 命令\n1 2 3 [root@nebula3-04 ~]# lsblk -d -o name,rota NAME ROTA vda 1 划分分区并挂载磁盘 本操作以该场景为例，当云服务器挂载了一块新的数据盘时，使用fdisk分区工具将该数据盘设为主分区，分区形式默认设置为MBR，文件系统设为ext4格式，挂载在“/mnt/sdc”下，并设置开机启动自动挂载。\nfdisk -l 显示信息 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 [root@ecs-test-0001 ~]# fdisk -l Disk /dev/vda: 42.9 GB, 42949672960 bytes, 83886080 sectors Units = sectors of 1 * 512 = 512 bytes Sector size (logical/physical): 512 bytes / 512 bytes I/O size (minimum/optimal): 512 bytes / 512 bytes Disk label type: dos Disk identifier: 0x000bcb4e Device Boot Start End Blocks Id System /dev/vda1 * 2048 83886079 41942016 83 Linux Disk /dev/vdb: 107.4 GB, 107374182400 bytes, 209715200 sectors Units = sectors of 1 * 512 = 512 bytes Sector size (logical/physical): 512 bytes / 512 bytes I/O size (minimum/optimal): 512 bytes / 512 bytes 表示当前的云服务器有两块磁盘，“/dev/vda”是系统盘，“/dev/vdb”是新增数据盘。\n执行以下命令，进入fdisk分区工具，开始对新增数据盘执行分区操作。 fdisk 新增数据盘 以新挂载的数据盘“/dev/vdb”为例： fdisk /dev/vdb 1 2 3 4 5 6 7 8 9 10 [root@ecs-test-0001 ~]# fdisk /dev/vdb Welcome to fdisk (util-linux 2.23.2). Changes will remain in memory only, until you decide to write them. Be careful before using the write command. Device does not contain a recognized partition table Building a new DOS disklabel with disk identifier 0x38717fc1. Command (m for help): 输入“n”，按“Enter”，开始新建分区。 1 2 3 4 Command (m for help): n Partition type: p primary (0 primary, 0 extended, 4 free) e extended 表示磁盘有两种分区类型：\n“p”表示主分区。 “e”表示扩展分区。 磁盘使用MBR分区形式，最多可以创建4个主分区，或者3个主分区加1个扩展分区，扩展分区不可以直接使用，需要划分成若干个逻辑分区才可以使用。 磁盘使用GPT分区形式时，没有主分区、扩展分区以及逻辑分区之分。\n以创建一个主要分区为例，输入“p”，按“Enter”，开始创建一个主分区。 1 2 Select (default p): p Partition number (1-4, default 1): “Partition number”表示主分区编号，可以选择1-4。\n以分区编号选择“1”为例，输入主分区编号“1”，按“Enter”。 1 2 Partition number (1-4, default 1): 1 First sector (2048-209715199, default 2048): “First sector”表示起始磁柱值，可以选择2048-209715199，默认为2048。\n以选择默认起始磁柱值2048为例，按“Enter” 系统会自动提示分区可用空间的起始磁柱值和截止磁柱值，可以在该区间内自定义，或者使用默认值。起始磁柱值必须小于分区的截止磁柱值。 1 2 3 First sector (2048-209715199, default 2048): Using default value 2048 Last sector, +sectors or +size{K,M,G} (2048-209715199, default 209715199): “Last sector”表示截止磁柱值，可以选择2048-209715199，默认为209715199。\n以选择默认截止磁柱值209715199为例，按“Enter”。 系统会自动提示分区可用空间的起始磁柱值和截止磁柱值，可以在该区间内自定义，或者使用默认值。起始磁柱值必须小于分区的截止磁柱值。 1 2 3 4 5 Last sector, +sectors or +size{K,M,G} (2048-209715199, default 209715199): Using default value 209715199 Partition 1 of type Linux and of size 100 GiB is set Command (m for help): 表示分区完成，即为数据盘新建了1个分区。\n输入“p”，按“Enter”，查看新建分区的详细信息。 1 2 3 4 5 6 7 8 9 10 11 12 13 Command (m for help): p Disk /dev/vdb: 107.4 GB, 107374182400 bytes, 209715200 sectors Units = sectors of 1 * 512 = 512 bytes Sector size (logical/physical): 512 bytes / 512 bytes I/O size (minimum/optimal): 512 bytes / 512 bytes Disk label type: dos Disk identifier: 0x38717fc1 Device Boot Start End Blocks Id System /dev/vdb1 2048 209715199 104856576 83 Linux Command (m for help): 表示新建分区“/dev/vdb1”的详细信息。\n输入“w”，按“Enter”，将分区结果写入分区表中。 1 2 3 4 5 Command (m for help): w The partition table has been altered! Calling ioctl() to re-read partition table. Syncing disks. 表示分区创建完成。 如果之前分区操作有误，请输入“q”，则会退出fdisk分区工具，之前的分区结果将不会被保留。\n执行partprobe命令，将新的分区表变更同步至操作系统。\n执行mkfs -t ext4 /dev/vdb1命令，将新建分区文件系统设为系统所需格式。\n执行mkdir 挂载目录 =\u003e mkdir /mnt/sdc 命令，新建挂载目录。\n执行mount /dev/vdb1 /mnt/sdc命令，将新建分区挂载到12中创建的目录下\n查看挂载结果 df -TH\n1 2 3 4 5 6 7 8 9 [root@ecs-test-0001 ~]# df -TH Filesystem Type Size Used Avail Use% Mounted on /dev/vda1 ext4 43G 1.9G 39G 5% / devtmpfs devtmpfs 2.0G 0 2.0G 0% /dev tmpfs tmpfs 2.0G 0 2.0G 0% /dev/shm tmpfs tmpfs 2.0G 9.1M 2.0G 1% /run tmpfs tmpfs 2.0G 0 2.0G 0% /sys/fs/cgroup tmpfs tmpfs 398M 0 398M 0% /run/user/0 /dev/vdb1 ext4 106G 63M 101G 1% /mnt/sdc 表示新建分区“/dev/vdb1”已挂载至“/mnt/sdc”。\n设置系统给服务Systemd 以前使用Ubuntu和CentOS，一般使用SysV init（就是以前使用的service）进行进程的开机自启和进程守护。 但是，现在更多地使用systemd来实现进程的管理。\nSystemd Systemd（系统管理守护进程），最开始以GNU GPL协议授权开发，现在已转为使用GNU LGPL协议。字母d是daemon的缩写 它取替并兼容传统的SysV init。事实上，CentOS和Debian，现在默认都是使用Systemd：\nCentOS 7开始预设并使用Systemd Ubuntu 15.04开始并预设使用Systemd\n使用Systemd的优点：\n按需启动进程，减少系统资源消耗 并行启动进程，提高系统启动速度 查看systemd和systemctl程序相关的目录：\n1 2 3 4 [root@nebula3-01 node_exporter]# whereis systemd systemd: /usr/lib/systemd /etc/systemd /usr/share/systemd /usr/share/man/man1/systemd.1.gz [root@nebula3-01 node_exporter]# whereis systemctl systemctl: /usr/bin/systemctl /usr/share/man/man1/systemctl.1.gz Systemctl Unit Systemd引入了一个核心配置：Unit（单元配置）。事实上，Systemd管理的每个进程，都是一个Unit。相当于任务块。一个有12种模式：\nService unit：系统服务 Target unit：多个Unit构成的一个组 Device Unit：硬件设备 Mount Unit：文件系统的挂载点 Automount Unit：自动挂载点 Path Unit：文件或路径 Scope Unit：不是由 Systemd 启动的外部进程 Slice Unit：进程组 Snapshot Unit：Systemd 快照，可以切回某个快照 Socket Unit：进程间通信的 socket Swap Unit：swap 文件 Timer Unit：定时器 创建配置文件 如果我们要创建一个Unit服务，我们应该如何创建配置文件呢？ 我们自己配置Unit服务（后续使用Systemctl进行启动和管理），可以配置到：\n/usr/lib/systemd/system/：推荐地址。 /run/systemd/system/：系统执行过程中所产生的服务脚本,这些脚本的优先级比上面的高。 /etc/systemd/system/：管理员根据主机系统的需求所建立的执行脚本，优先级比上面的高。 创建编写配置文件 vim /usr/lib/systemd/system/node_exporter.service 新增\n1 2 3 4 5 6 7 8 9 10 11 12 [Unit] Description=node_exporter After=network.target [Service] User=root Type=simple ExecStart=/root/node_exporter/node_exporter PrivateTmp=true [Install] WantedBy=multi-user.target 一些解释:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 - Unit - Description，服务的描述 - Documentation，文档介绍 - After，该服务要在什么服务启动之后启动，比如Mysql需要在network和syslog启动之后再启动 - Install - WantedBy，值是一个或多个Target，当前Unit激活时(enable)符号链接会放入/etc/systemd/system目录下面以Target名+.wants后缀构成的子目录中 - RequiredBy，它的值是一个或多个Target，当前Unit激活(enable)时，符号链接会放入/etc/systemd/system目录下面以Target名+.required后缀构成的子目录中 - Alias，当前Unit可用于启动的别名 - Also，当前Unit激活(enable)时，会被同时激活的其他Unit - Service - Type，定义启动时的进程行为。它有以下几种值。 - Type=simple，默认值，执行ExecStart指定的命令，启动主进程 - Type=forking，以 fork 方式从父进程创建子进程，创建后父进程会立即退出 - Type=oneshot，一次性进程，Systemd 会等当前服务退出，再继续往下执行 - Type=dbus，当前服务通过D-Bus启动 - Type=notify，当前服务启动完毕，会通知Systemd，再继续往下执行 - Type=idle，若有其他任务执行完毕，当前服务才会运行 - ExecStart，启动当前服务的命令 - ExecStartPre，启动当前服务之前执行的命令 - ExecStartPost，启动当前服务之后执行的命令 - ExecReload，重启当前服务时执行的命令 - ExecStop，停止当前服务时执行的命令 - ExecStopPost，停止当其服务之后执行的命令 - RestartSec，自动重启当前服务间隔的秒数 - Restart，定义何种情况 Systemd 会自动重启当前服务，可能的值包括always（总是重启）、on-success、on-failure、on-abnormal、on-abort、on-watchdog - TimeoutSec，定义 Systemd 停止当前服务之前等待的秒数 - Environment，指定环境变量 重载配置 1 systemctl daemon-reload 启动服务 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 root@nebula3-01 node_exporter]# systemctl daemon-reload [root@nebula3-01 node_exporter]# systemctl status node_exporter ● node_exporter.service - node_exporter Loaded: loaded (/usr/lib/systemd/system/node_exporter.service; disabled; vendor preset: disabled) Active: inactive (dead) [root@nebula3-01 node_exporter]# systemctl start node_exporter [root@nebula3-01 node_exporter]# systemctl status node_exporter ● node_exporter.service - node_exporter Loaded: loaded (/usr/lib/systemd/system/node_exporter.service; disabled; vendor preset: disabled) Active: active (running) since Thu 2023-03-02 14:04:43 CST; 2s ago Main PID: 15015 (node_exporter) CGroup: /system.slice/node_exporter.service └─15015 /root/node_exporter/node_exporter Mar 02 14:04:43 nebula3-01 node_exporter[15015]: ts=2023-03-02T06:04:43.268Z caller=node_exporter.go:117 level=info collector=thermal_zone Mar 02 14:04:43 nebula3-01 node_exporter[15015]: ts=2023-03-02T06:04:43.268Z caller=node_exporter.go:117 level=info collector=time Mar 02 14:04:43 nebula3-01 node_exporter[15015]: ts=2023-03-02T06:04:43.268Z caller=node_exporter.go:117 level=info collector=timex Mar 02 14:04:43 nebula3-01 node_exporter[15015]: ts=2023-03-02T06:04:43.268Z caller=node_exporter.go:117 level=info collector=udp_queues Mar 02 14:04:43 nebula3-01 node_exporter[15015]: ts=2023-03-02T06:04:43.268Z caller=node_exporter.go:117 level=info collector=uname Mar 02 14:04:43 nebula3-01 node_exporter[15015]: ts=2023-03-02T06:04:43.268Z caller=node_exporter.go:117 level=info collector=vmstat Mar 02 14:04:43 nebula3-01 node_exporter[15015]: ts=2023-03-02T06:04:43.268Z caller=node_exporter.go:117 level=info collector=xfs Mar 02 14:04:43 nebula3-01 node_exporter[15015]: ts=2023-03-02T06:04:43.268Z caller=node_exporter.go:117 level=info collector=zfs Mar 02 14:04:43 nebula3-01 node_exporter[15015]: ts=2023-03-02T06:04:43.269Z caller=tls_config.go:232 level=info msg=\"Listening on\" address=[::]:9100 Mar 02 14:04:43 nebula3-01 node_exporter[15015]: ts=2023-03-02T06:04:43.269Z caller=tls_config.go:235 level=info msg=\"TLS is disabled.\" http2=false ...::]:9100 Hint: Some lines were ellipsized, use -l to show in full. 开机自启 1 2 [root@nebula3-01 node_exporter]# systemctl enable node_exporter Created symlink from /etc/systemd/system/multi-user.target.wants/node_exporter.service to /usr/lib/systemd/system/node_exporter.service. 查看是否开机自启, 比上面多了 enabled; vendor preset: disabled\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 [root@nebula3-01 node_exporter]# systemctl status node_exporter ● node_exporter.service - node_exporter Loaded: loaded (/usr/lib/systemd/system/node_exporter.service; enabled; vendor preset: disabled) Active: active (running) since Thu 2023-03-02 14:04:43 CST; 11min ago Main PID: 15015 (node_exporter) CGroup: /system.slice/node_exporter.service └─15015 /root/node_exporter/node_exporter Mar 02 14:04:43 nebula3-01 node_exporter[15015]: ts=2023-03-02T06:04:43.268Z caller=node_exporter.go:117 level=info collector=thermal_zone Mar 02 14:04:43 nebula3-01 node_exporter[15015]: ts=2023-03-02T06:04:43.268Z caller=node_exporter.go:117 level=info collector=time Mar 02 14:04:43 nebula3-01 node_exporter[15015]: ts=2023-03-02T06:04:43.268Z caller=node_exporter.go:117 level=info collector=timex Mar 02 14:04:43 nebula3-01 node_exporter[15015]: ts=2023-03-02T06:04:43.268Z caller=node_exporter.go:117 level=info collector=udp_queues Mar 02 14:04:43 nebula3-01 node_exporter[15015]: ts=2023-03-02T06:04:43.268Z caller=node_exporter.go:117 level=info collector=uname Mar 02 14:04:43 nebula3-01 node_exporter[15015]: ts=2023-03-02T06:04:43.268Z caller=node_exporter.go:117 level=info collector=vmstat Mar 02 14:04:43 nebula3-01 node_exporter[15015]: ts=2023-03-02T06:04:43.268Z caller=node_exporter.go:117 level=info collector=xfs Mar 02 14:04:43 nebula3-01 node_exporter[15015]: ts=2023-03-02T06:04:43.268Z caller=node_exporter.go:117 level=info collector=zfs Mar 02 14:04:43 nebula3-01 node_exporter[15015]: ts=2023-03-02T06:04:43.269Z caller=tls_config.go:232 level=info msg=\"Listening on\" address=[::]:9100 Mar 02 14:04:43 nebula3-01 node_exporter[15015]: ts=2023-03-02T06:04:43.269Z caller=tls_config.go:235 level=info msg=\"TLS is disabled.\" http2=false ...::]:9100 Hint: Some lines were ellipsized, use -l to show in full. 查看Systemd 服务 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 [root@nebula3-01 node_exporter]# systemctl UNIT LOAD ACTIVE SUB DESCRIPTION proc-sys-fs-binfmt_misc.automount loaded active running Arbitrary Executable File Formats File System Automount Point sys-devices-pci0000:00-0000:00:03.0-virtio0-net-eth0.device loaded active plugged Virtio network device sys-devices-pci0000:00-0000:00:04.0-virtio1-virtio\\x2dports-vport1p1.device loaded active plugged /sys/devices/pci0000:00/0000:00:04.0/virtio1/virtio-ports/v sys-devices-pci0000:00-0000:00:05.0-virtio2-block-vda-vda1.device loaded active plugged /sys/devices/pci0000:00/0000:00:05.0/virtio2/block/vda/vda1 sys-devices-pci0000:00-0000:00:05.0-virtio2-block-vda-vda2.device loaded active plugged /sys/devices/pci0000:00/0000:00:05.0/virtio2/block/vda/vda2 sys-devices-pci0000:00-0000:00:05.0-virtio2-block-vda.device loaded active plugged /sys/devices/pci0000:00/0000:00:05.0/virtio2/block/vda sys-devices-platform-serial8250-tty-ttyS1.device loaded active plugged /sys/devices/platform/serial8250/tty/ttyS1 sys-devices-platform-serial8250-tty-ttyS2.device loaded active plugged /sys/devices/platform/serial8250/tty/ttyS2 sys-devices-platform-serial8250-tty-ttyS3.device loaded active plugged /sys/devices/platform/serial8250/tty/ttyS3 sys-devices-pnp0-00:00-tty-ttyS0.device loaded active plugged /sys/devices/pnp0/00:00/tty/ttyS0 sys-module-configfs.device loaded active plugged /sys/module/configfs sys-subsystem-net-devices-eth0.device loaded active plugged Virtio network device -.mount loaded active mounted / boot.mount loaded active mounted /boot dev-hugepages.mount loaded active mounted Huge Pages File System dev-mqueue.mount loaded active mounted POSIX Message Queue File System ... 你可以配合grep命令操作\n1 2 3 [root@nebula3-01 node_exporter]# systemctl | grep node kmod-static-nodes.service loaded active exited Create list of required static device nodes for the current kernel node_exporter.service loaded active running node_exporter 查看Linux 的基本信息 硬件 uname -a 查看内核/操作系统/CPU信息 head -n 1 /etc/issue 查看操作系统版本 cat /proc/cpuinfo 查看CPU信息 hostname 查看计算机名 lspci -tv 列出所有PCI设备 lsusb -tv 列出所有USB设备 lsmod 列出加载的内核模块 env 查看环境变量 资源 free -m 查看内存使用量和交换区使用量 df -h 查看各分区使用情况 du -sh \u003c目录名\u003e 查看指定目录的大小 grep MemTotal /proc/meminfo 查看内存总量 grep MemFree /proc/meminfo `查看空闲内存量 uptime 查看系统运行时间、用户数、负载 cat /proc/loadavg 查看系统负载 磁盘和分区 mount | column -t 查看挂接的分区状态` fdisk -l 查看所有分区，扇区大小 swapon -s 查看所有交换分区 hdparm -i /dev/hda 查看磁盘参数（仅适用于IDE设备） dmesg | grep IDE 查看启动时IDE设备检测状况 stat /boot/ 查看硬盘块情况，块大小 getconf PAGE_SIZE 查看页大小 网络 ifconfig 查看所有网络接口的属性 iptables -L 查看防火墙设置 route -n 查看路由表 netstat -lntp 查看所有监听端口 netstat -antp 查看所有已经建立的连接 netstat -s 查看网络统计信息 进程 ps -ef 查看所有进程 top 实时显示进程状态 用户 w 查看活动用户 id \u003c用户名\u003e 查看指定用户信息 last 查看用户登录日志 cut -d: -f1 /etc/passwd 查看系统所有用户 cut -d: -f1 /etc/group 查看系统所有组 crontab -l 查看当前用户的计划任务 服务 chkconfig --list 列出所有系统服务 chkconfig --list | grep on 列出所有启动的系统服务 程序 rpm -qa 查看所有安装的软件包 安装Golang, Minicoda, Git Golang 下载合适的版本 输入tar -C /usr/local/ -xzf go1.20.2.linux-amd64.tar.gz 解压到合适的位置， -C 指定位置 设置GOPATH echo $PATH 先查看$PATH 用vim 或者其他工具打开$HOME/.profile, 输入export PATH=$PATH:/usr/local/go/bin 输入 source $HOME/.profile 是上面profile 生效 输入 go version 检查是否成功 修改go proxy 为功能镜像 go env -w GOPROXY=https://goproxy.cn,direct 输入 go env 确认 GOPROXY Minicode 从此处下载Minicoda run bash Miniconda3-latest-Linux-x86_64.sh 根据提示安装，可以都选择默认 为了使配置生效，关闭Terminal 重新打开 输入conda list 或者 机器名前面有个base 意味着Terminal 输入python 默认为Python3，想要使用Python2， 输入Python2 即可 如果conda 没有被识别，需要把conda 加入环境变量。 1 2 3 4 vim /etc/profile # 输入 在文件末尾添加一行：export PATH=/root/miniconda3/bin:$PATH， /root/miniconda3 是miniconda 安装的路径 # :wq 保存退出。然后 source /etc/profile 激活配置 Git 首先，把老版本的 Git 卸掉。 1 2 sudo yum -y remove git sudo yum -y remove git-* 添加 End Point 到 CentOS 7 仓库 yum -y install https://packages.endpointdev.com/rhel/7/os/x86_64/endpoint-repo.x86_64.rpm yum -y install git check version git version 配置Git Set your name. git config --global user.name \"Your Name\" Set your email address. git config --global user.email \"user@exmample.com\" Verify the settings. git config --list ","wordCount":"1761","inLanguage":"en","datePublished":"2023-03-16T19:34:59+08:00","dateModified":"2023-03-16T19:34:59+08:00","author":[{"@type":"Person","name":"Reid"}],"mainEntityOfPage":{"@type":"WebPage","@id":"https://reid00.github.io/en/posts/langs_linux/linux-%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%99%BB%E5%BD%95%E5%90%8E%E7%9A%84%E5%B8%B8%E8%A7%81%E6%93%8D%E4%BD%9C/"},"publisher":{"@type":"Organization","name":"Reid's Blog","logo":{"@type":"ImageObject","url":"https://reid00.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://reid00.github.io/en/ accesskey=h title="Reid's Blog (Alt + H)">Reid's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li></ul></div></div><ul id=menu><li><a href=https://reid00.github.io/en/archives/ title=Archive><span>Archive</span></a></li><li><a href=https://reid00.github.io/en/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://reid00.github.io/en/categories/ title=Categorys><span>Categorys</span></a></li><li><a href=https://reid00.github.io/en/tags/ title=Tags><span>Tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://reid00.github.io/en/>Home</a>&nbsp;»&nbsp;<a href=https://reid00.github.io/en/posts/>Posts</a>&nbsp;»&nbsp;<a href=https://reid00.github.io/en/posts/langs_linux/>学习的编程语言Golang，Python，Rust 和Linux 相关的记录</a></div><h1 class=post-title>Linux 服务器登录后的常见操作</h1><div class=post-description>Linux 服务器登录后的常见操作</div><div class=post-meta><span title='2023-03-16 19:34:59 +0800 +0800'>2023-03-16 19:34</span>&nbsp;·&nbsp;9 min&nbsp;·&nbsp;1761 words&nbsp;·&nbsp;Reid</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#linux%e4%bf%ae%e6%94%b9%e4%b8%bb%e6%9c%ba%e5%90%8d%e4%bf%ae%e6%94%b9hostname%e7%9a%84%e6%96%b9%e6%b3%95 aria-label=Linux修改主机名修改hostname的方法>Linux修改主机名修改hostname的方法</a></li><li><a href=#%e9%80%9a%e8%bf%87%e6%9c%ba%e5%99%a8%e5%90%8dping-%e9%80%9a%e5%bd%bc%e6%ad%a4 aria-label="通过机器名ping 通彼此">通过机器名ping 通彼此</a></li><li><a href=#%e6%9f%a5%e7%9c%8b%e6%9c%8d%e5%8a%a1%e5%99%a8%e6%98%af%e5%90%a6%e4%b8%bassd aria-label=查看服务器是否为SSD>查看服务器是否为SSD</a></li><li><a href=#%e5%88%92%e5%88%86%e5%88%86%e5%8c%ba%e5%b9%b6%e6%8c%82%e8%bd%bd%e7%a3%81%e7%9b%98 aria-label=划分分区并挂载磁盘>划分分区并挂载磁盘</a></li><li><a href=#%e8%ae%be%e7%bd%ae%e7%b3%bb%e7%bb%9f%e7%bb%99%e6%9c%8d%e5%8a%a1systemd aria-label=设置系统给服务Systemd>设置系统给服务Systemd</a><ul><li><a href=#systemd aria-label=Systemd>Systemd</a></li><li><a href=#systemctl aria-label=Systemctl>Systemctl</a><ul><li><a href=#unit aria-label=Unit>Unit</a></li><li><a href=#%e5%88%9b%e5%bb%ba%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6 aria-label=创建配置文件>创建配置文件</a></li></ul></li><li><a href=#%e6%9f%a5%e7%9c%8bsystemd-%e6%9c%8d%e5%8a%a1 aria-label="查看Systemd 服务">查看Systemd 服务</a></li></ul></li><li><a href=#%e6%9f%a5%e7%9c%8blinux-%e7%9a%84%e5%9f%ba%e6%9c%ac%e4%bf%a1%e6%81%af aria-label="查看Linux 的基本信息">查看Linux 的基本信息</a><ul><li><a href=#%e7%a1%ac%e4%bb%b6 aria-label=硬件>硬件</a></li><li><a href=#%e8%b5%84%e6%ba%90 aria-label=资源>资源</a></li><li><a href=#%e7%a3%81%e7%9b%98%e5%92%8c%e5%88%86%e5%8c%ba aria-label=磁盘和分区>磁盘和分区</a></li><li><a href=#%e7%bd%91%e7%bb%9c aria-label=网络>网络</a></li><li><a href=#%e8%bf%9b%e7%a8%8b aria-label=进程>进程</a></li><li><a href=#%e7%94%a8%e6%88%b7 aria-label=用户>用户</a></li><li><a href=#%e6%9c%8d%e5%8a%a1 aria-label=服务>服务</a></li><li><a href=#%e7%a8%8b%e5%ba%8f aria-label=程序>程序</a></li></ul></li><li><a href=#%e5%ae%89%e8%a3%85golang-minicoda-git aria-label="安装Golang, Minicoda, Git">安装Golang, Minicoda, Git</a><ul><li><a href=#golang aria-label=Golang>Golang</a></li><li><a href=#minicode aria-label=Minicode>Minicode</a></li><li><a href=#git aria-label=Git>Git</a></li></ul></li></ul></div></details></div><div class=post-content><h2 id=linux修改主机名修改hostname的方法>Linux修改主机名修改hostname的方法<a hidden class=anchor aria-hidden=true href=#linux修改主机名修改hostname的方法>#</a></h2><ol><li><p>临时修改Linux主机名的方法
<code>hostname newname</code>
执行命令后发现没有变化。重新开终端即可显示，你也可以通过uname -n命令来查看当前的主机名。</p></li><li><p>永久修改Linux主机名的方法</p></li></ol><ul><li>使用 hostnamectl 来改变主机名称</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=o>[</span>root@nebula3-01 ~<span class=o>]</span><span class=c1># hostnamectl</span>
</span></span><span class=line><span class=cl>   Static hostname: nebula3-01
</span></span><span class=line><span class=cl>         Icon name: computer-vm
</span></span><span class=line><span class=cl>           Chassis: vm
</span></span><span class=line><span class=cl>        Machine ID: 1d8987d66da0c7cd7960ca4e5aefe30f
</span></span><span class=line><span class=cl>           Boot ID: 717058195e934eb88f4631adf25ab163
</span></span><span class=line><span class=cl>    Virtualization: kvm
</span></span><span class=line><span class=cl>  Operating System: CentOS Linux <span class=m>7</span> <span class=o>(</span>Core<span class=o>)</span>
</span></span><span class=line><span class=cl>       CPE OS Name: cpe:/o:centos:centos:7
</span></span><span class=line><span class=cl>            Kernel: Linux 3.10.0-1160.el7.x86_64
</span></span><span class=line><span class=cl>      Architecture: x86-64
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>[</span>root@nebula-test02 ~<span class=o>]</span><span class=c1># hostnamectl set-hostname nebula3-02</span>
</span></span><span class=line><span class=cl><span class=o>[</span>root@nebula-test02 ~<span class=o>]</span><span class=c1># hostnamectl</span>
</span></span><span class=line><span class=cl>   Static hostname: nebula3-02
</span></span><span class=line><span class=cl>         Icon name: computer-vm
</span></span><span class=line><span class=cl>           Chassis: vm
</span></span><span class=line><span class=cl>        Machine ID: 1d8987d66da0c7cd7960ca4e5aefe30f
</span></span><span class=line><span class=cl>           Boot ID: 6b836dcf9c274ef48f334e6b53f8e296
</span></span><span class=line><span class=cl>    Virtualization: kvm
</span></span><span class=line><span class=cl>  Operating System: CentOS Linux <span class=m>7</span> <span class=o>(</span>Core<span class=o>)</span>
</span></span><span class=line><span class=cl>       CPE OS Name: cpe:/o:centos:centos:7
</span></span><span class=line><span class=cl>            Kernel: Linux 3.10.0-1160.el7.x86_64
</span></span><span class=line><span class=cl>      Architecture: x86-64
</span></span><span class=line><span class=cl><span class=o>[</span>root@nebula-test02 ~<span class=o>]</span><span class=c1># </span>
</span></span></code></pre></td></tr></table></div></div><p>退出后，重新登录即可</p><ul><li>通过修改<code>/etc/hostname</code> 文件，本质和上面一样</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=o>[</span>root@nebula-test03 ~<span class=o>]</span><span class=c1># hostnamectl</span>
</span></span><span class=line><span class=cl>   Static hostname: nebula-test03.novalocal
</span></span><span class=line><span class=cl>         Icon name: computer-vm
</span></span><span class=line><span class=cl>           Chassis: vm
</span></span><span class=line><span class=cl>        Machine ID: 1d8987d66da0c7cd7960ca4e5aefe30f
</span></span><span class=line><span class=cl>           Boot ID: 683f9e34bce149659226bcdfc0dce6ed
</span></span><span class=line><span class=cl>    Virtualization: kvm
</span></span><span class=line><span class=cl>  Operating System: CentOS Linux <span class=m>7</span> <span class=o>(</span>Core<span class=o>)</span>
</span></span><span class=line><span class=cl>       CPE OS Name: cpe:/o:centos:centos:7
</span></span><span class=line><span class=cl>            Kernel: Linux 3.10.0-1160.el7.x86_64
</span></span><span class=line><span class=cl>      Architecture: x86-64
</span></span><span class=line><span class=cl><span class=o>[</span>root@nebula-test03 ~<span class=o>]</span><span class=c1># cat /etc/hostname</span>
</span></span><span class=line><span class=cl>nebula-test03.novalocal
</span></span><span class=line><span class=cl><span class=o>[</span>root@nebula-test03 ~<span class=o>]</span><span class=c1># echo &#34;nebula3-03&#34; &gt; /etc/hostname</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>[</span>root@nebula-test03 ~<span class=o>]</span><span class=c1># hostnamectl</span>
</span></span><span class=line><span class=cl>   Static hostname: nebula3-03
</span></span><span class=line><span class=cl>Transient hostname: nebula-test03.novalocal
</span></span><span class=line><span class=cl>         Icon name: computer-vm
</span></span><span class=line><span class=cl>           Chassis: vm
</span></span><span class=line><span class=cl>        Machine ID: 1d8987d66da0c7cd7960ca4e5aefe30f
</span></span><span class=line><span class=cl>           Boot ID: 683f9e34bce149659226bcdfc0dce6ed
</span></span><span class=line><span class=cl>    Virtualization: kvm
</span></span><span class=line><span class=cl>  Operating System: CentOS Linux <span class=m>7</span> <span class=o>(</span>Core<span class=o>)</span>
</span></span><span class=line><span class=cl>       CPE OS Name: cpe:/o:centos:centos:7
</span></span><span class=line><span class=cl>            Kernel: Linux 3.10.0-1160.el7.x86_64
</span></span><span class=line><span class=cl>      Architecture: x86-64
</span></span></code></pre></td></tr></table></div></div><h2 id=通过机器名ping-通彼此>通过机器名ping 通彼此<a hidden class=anchor aria-hidden=true href=#通过机器名ping-通彼此>#</a></h2><p>修改<code>/etc/hosts</code> 文件，添加 <code>ip 域名</code> 即可。
vim /etc/hosts</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>172.18.163.124 test-server-01
</span></span><span class=line><span class=cl>172.18.163.115 test-server-02
</span></span><span class=line><span class=cl>172.18.163.114 test-server-03
</span></span><span class=line><span class=cl>172.18.163.85  test-server-04
</span></span></code></pre></td></tr></table></div></div><h2 id=查看服务器是否为ssd>查看服务器是否为SSD<a hidden class=anchor aria-hidden=true href=#查看服务器是否为ssd>#</a></h2><ul><li><p>方法一
判断<code>cat /sys/block/*/queue/rotational</code> 的返回值（其中*为你的硬盘设备名称，例如sda等等），如果返回1则表示磁盘可旋转，那么就是HDD了；反之，如果返回0，则表示磁盘不可以旋转，那么就有可能是SSD了。</p></li><li><p>方法二
<code>lsblk -d -o name,rota</code> 命令</p></li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=o>[</span>root@nebula3-04 ~<span class=o>]</span><span class=c1># lsblk -d -o name,rota</span>
</span></span><span class=line><span class=cl>NAME ROTA
</span></span><span class=line><span class=cl>vda     <span class=m>1</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=划分分区并挂载磁盘>划分分区并挂载磁盘<a hidden class=anchor aria-hidden=true href=#划分分区并挂载磁盘>#</a></h2><p>本操作以该场景为例，当云服务器挂载了一块新的数据盘时，使用fdisk分区工具将该数据盘设为主分区，分区形式默认设置为MBR，文件系统设为ext4格式，挂载在“/mnt/sdc”下，并设置开机启动自动挂载。</p><ol><li>fdisk -l 显示信息</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=o>[</span>root@ecs-test-0001 ~<span class=o>]</span><span class=c1># fdisk -l</span>
</span></span><span class=line><span class=cl>Disk /dev/vda: 42.9 GB, <span class=m>42949672960</span> bytes, <span class=m>83886080</span> sectors
</span></span><span class=line><span class=cl><span class=nv>Units</span> <span class=o>=</span> sectors of <span class=m>1</span> * <span class=nv>512</span> <span class=o>=</span> <span class=m>512</span> bytes
</span></span><span class=line><span class=cl>Sector size <span class=o>(</span>logical/physical<span class=o>)</span>: <span class=m>512</span> bytes / <span class=m>512</span> bytes
</span></span><span class=line><span class=cl>I/O size <span class=o>(</span>minimum/optimal<span class=o>)</span>: <span class=m>512</span> bytes / <span class=m>512</span> bytes
</span></span><span class=line><span class=cl>Disk label type: dos
</span></span><span class=line><span class=cl>Disk identifier: 0x000bcb4e
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>   Device Boot      Start         End      Blocks   Id  System
</span></span><span class=line><span class=cl>/dev/vda1   *        <span class=m>2048</span>    <span class=m>83886079</span>    <span class=m>41942016</span>   <span class=m>83</span>  Linux
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Disk /dev/vdb: 107.4 GB, <span class=m>107374182400</span> bytes, <span class=m>209715200</span> sectors
</span></span><span class=line><span class=cl><span class=nv>Units</span> <span class=o>=</span> sectors of <span class=m>1</span> * <span class=nv>512</span> <span class=o>=</span> <span class=m>512</span> bytes
</span></span><span class=line><span class=cl>Sector size <span class=o>(</span>logical/physical<span class=o>)</span>: <span class=m>512</span> bytes / <span class=m>512</span> bytes
</span></span><span class=line><span class=cl>I/O size <span class=o>(</span>minimum/optimal<span class=o>)</span>: <span class=m>512</span> bytes / <span class=m>512</span> bytes
</span></span></code></pre></td></tr></table></div></div><p>表示当前的云服务器有两块磁盘，“/dev/vda”是系统盘，“/dev/vdb”是新增数据盘。</p><ol start=2><li>执行以下命令，进入fdisk分区工具，开始对新增数据盘执行分区操作。
<strong>fdisk 新增数据盘</strong>
以新挂载的数据盘“/dev/vdb”为例：
<strong>fdisk /dev/vdb</strong></li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=o>[</span>root@ecs-test-0001 ~<span class=o>]</span><span class=c1># fdisk /dev/vdb</span>
</span></span><span class=line><span class=cl>Welcome to fdisk <span class=o>(</span>util-linux 2.23.2<span class=o>)</span>.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Changes will remain in memory only, <span class=k>until</span> you decide to write them.
</span></span><span class=line><span class=cl>Be careful before using the write command.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Device does not contain a recognized partition table
</span></span><span class=line><span class=cl>Building a new DOS disklabel with disk identifier 0x38717fc1.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Command <span class=o>(</span>m <span class=k>for</span> <span class=nb>help</span><span class=o>)</span>: 
</span></span></code></pre></td></tr></table></div></div><ol start=3><li>输入“n”，按“Enter”，开始新建分区。</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>Command <span class=o>(</span>m <span class=k>for</span> <span class=nb>help</span><span class=o>)</span>: n
</span></span><span class=line><span class=cl>Partition type:
</span></span><span class=line><span class=cl>   p   primary <span class=o>(</span><span class=m>0</span> primary, <span class=m>0</span> extended, <span class=m>4</span> free<span class=o>)</span>
</span></span><span class=line><span class=cl>   e   extended
</span></span></code></pre></td></tr></table></div></div><p>表示磁盘有两种分区类型：</p><ul><li>“p”表示主分区。</li><li>“e”表示扩展分区。</li></ul><blockquote><p>磁盘使用MBR分区形式，最多可以创建4个主分区，或者3个主分区加1个扩展分区，扩展分区不可以直接使用，需要划分成若干个逻辑分区才可以使用。 磁盘使用GPT分区形式时，没有主分区、扩展分区以及逻辑分区之分。</p></blockquote><ol start=4><li>以创建一个主要分区为例，输入“p”，按“Enter”，开始创建一个主分区。</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>Select <span class=o>(</span>default p<span class=o>)</span>: p
</span></span><span class=line><span class=cl>Partition number <span class=o>(</span>1-4, default 1<span class=o>)</span>: 
</span></span></code></pre></td></tr></table></div></div><p>“Partition number”表示主分区编号，可以选择1-4。</p><ol start=5><li>以分区编号选择“1”为例，输入主分区编号“1”，按“Enter”。</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>Partition number <span class=o>(</span>1-4, default 1<span class=o>)</span>: <span class=m>1</span>
</span></span><span class=line><span class=cl>First sector <span class=o>(</span>2048-209715199, default 2048<span class=o>)</span>:
</span></span></code></pre></td></tr></table></div></div><p>“First sector”表示起始磁柱值，可以选择2048-209715199，默认为2048。</p><ol start=6><li>以选择默认起始磁柱值2048为例，按“Enter”
系统会自动提示分区可用空间的起始磁柱值和截止磁柱值，可以在该区间内自定义，或者使用默认值。起始磁柱值必须小于分区的截止磁柱值。</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>First sector <span class=o>(</span>2048-209715199, default 2048<span class=o>)</span>:
</span></span><span class=line><span class=cl>Using default value <span class=m>2048</span>
</span></span><span class=line><span class=cl>Last sector, +sectors or +size<span class=o>{</span>K,M,G<span class=o>}</span> <span class=o>(</span>2048-209715199, default 209715199<span class=o>)</span>:
</span></span></code></pre></td></tr></table></div></div><p>“Last sector”表示截止磁柱值，可以选择2048-209715199，默认为209715199。</p><ol start=7><li>以选择默认截止磁柱值209715199为例，按“Enter”。
系统会自动提示分区可用空间的起始磁柱值和截止磁柱值，可以在该区间内自定义，或者使用默认值。起始磁柱值必须小于分区的截止磁柱值。</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>Last sector, +sectors or +size<span class=o>{</span>K,M,G<span class=o>}</span> <span class=o>(</span>2048-209715199, default 209715199<span class=o>)</span>:
</span></span><span class=line><span class=cl>Using default value <span class=m>209715199</span>
</span></span><span class=line><span class=cl>Partition <span class=m>1</span> of <span class=nb>type</span> Linux and of size <span class=m>100</span> GiB is <span class=nb>set</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Command <span class=o>(</span>m <span class=k>for</span> <span class=nb>help</span><span class=o>)</span>:
</span></span></code></pre></td></tr></table></div></div><p>表示分区完成，即为数据盘新建了1个分区。</p><ol start=8><li>输入“p”，按“Enter”，查看新建分区的详细信息。</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>Command <span class=o>(</span>m <span class=k>for</span> <span class=nb>help</span><span class=o>)</span>: p
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Disk /dev/vdb: 107.4 GB, <span class=m>107374182400</span> bytes, <span class=m>209715200</span> sectors
</span></span><span class=line><span class=cl><span class=nv>Units</span> <span class=o>=</span> sectors of <span class=m>1</span> * <span class=nv>512</span> <span class=o>=</span> <span class=m>512</span> bytes
</span></span><span class=line><span class=cl>Sector size <span class=o>(</span>logical/physical<span class=o>)</span>: <span class=m>512</span> bytes / <span class=m>512</span> bytes
</span></span><span class=line><span class=cl>I/O size <span class=o>(</span>minimum/optimal<span class=o>)</span>: <span class=m>512</span> bytes / <span class=m>512</span> bytes
</span></span><span class=line><span class=cl>Disk label type: dos
</span></span><span class=line><span class=cl>Disk identifier: 0x38717fc1
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>   Device Boot      Start         End      Blocks   Id  System
</span></span><span class=line><span class=cl>/dev/vdb1            <span class=m>2048</span>   <span class=m>209715199</span>   <span class=m>104856576</span>   <span class=m>83</span>  Linux
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Command <span class=o>(</span>m <span class=k>for</span> <span class=nb>help</span><span class=o>)</span>:
</span></span></code></pre></td></tr></table></div></div><p>表示新建分区“/dev/vdb1”的详细信息。</p><ol start=9><li>输入“w”，按“Enter”，将分区结果写入分区表中。</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>Command <span class=o>(</span>m <span class=k>for</span> <span class=nb>help</span><span class=o>)</span>: w
</span></span><span class=line><span class=cl>The partition table has been altered!
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Calling ioctl<span class=o>()</span> to re-read partition table.
</span></span><span class=line><span class=cl>Syncing disks.
</span></span></code></pre></td></tr></table></div></div><p>表示分区创建完成。
<strong>如果之前分区操作有误，请输入“q”，则会退出fdisk分区工具，之前的分区结果将不会被保留。</strong></p><ol start=10><li><p>执行<code>partprobe</code>命令，将新的分区表变更同步至操作系统。</p></li><li><p>执行<code>mkfs -t ext4 /dev/vdb1</code>命令，将新建分区文件系统设为系统所需格式。</p></li><li><p>执行<code>mkdir 挂载目录 => mkdir /mnt/sdc </code>命令，新建挂载目录。</p></li><li><p>执行<code>mount /dev/vdb1 /mnt/sdc</code>命令，将新建分区挂载到12中创建的目录下</p></li><li><p>查看挂载结果 <code>df -TH</code></p></li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=o>[</span>root@ecs-test-0001 ~<span class=o>]</span><span class=c1># df -TH</span>
</span></span><span class=line><span class=cl>Filesystem     Type      Size  Used Avail Use% Mounted on
</span></span><span class=line><span class=cl>/dev/vda1      ext4       43G  1.9G   39G   5% /
</span></span><span class=line><span class=cl>devtmpfs       devtmpfs  2.0G     <span class=m>0</span>  2.0G   0% /dev
</span></span><span class=line><span class=cl>tmpfs          tmpfs     2.0G     <span class=m>0</span>  2.0G   0% /dev/shm
</span></span><span class=line><span class=cl>tmpfs          tmpfs     2.0G  9.1M  2.0G   1% /run
</span></span><span class=line><span class=cl>tmpfs          tmpfs     2.0G     <span class=m>0</span>  2.0G   0% /sys/fs/cgroup
</span></span><span class=line><span class=cl>tmpfs          tmpfs     398M     <span class=m>0</span>  398M   0% /run/user/0
</span></span><span class=line><span class=cl>/dev/vdb1      ext4      106G   63M  101G   1% /mnt/sdc
</span></span></code></pre></td></tr></table></div></div><p>表示新建分区“/dev/vdb1”已挂载至“/mnt/sdc”。</p><h2 id=设置系统给服务systemd>设置系统给服务Systemd<a hidden class=anchor aria-hidden=true href=#设置系统给服务systemd>#</a></h2><p>以前使用Ubuntu和CentOS，一般使用SysV init（就是以前使用的service）进行进程的开机自启和进程守护。
但是，现在更多地使用<code>systemd</code>来实现进程的管理。</p><h3 id=systemd>Systemd<a hidden class=anchor aria-hidden=true href=#systemd>#</a></h3><p><code>Systemd</code>（系统管理守护进程），最开始以GNU GPL协议授权开发，现在已转为使用GNU LGPL协议。字母d是daemon的缩写
它取替并兼容传统的SysV init。事实上，CentOS和Debian，现在默认都是使用<code>Systemd</code>：</p><p>CentOS 7开始预设并使用<code>Systemd</code>
Ubuntu 15.04开始并预设使用<code>Systemd</code></p><p>使用<code>Systemd</code>的优点：</p><ul><li>按需启动进程，减少系统资源消耗</li><li>并行启动进程，提高系统启动速度</li></ul><p>查看<code>systemd</code>和systemctl程序相关的目录：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=o>[</span>root@nebula3-01 node_exporter<span class=o>]</span><span class=c1># whereis systemd</span>
</span></span><span class=line><span class=cl>systemd: /usr/lib/systemd /etc/systemd /usr/share/systemd /usr/share/man/man1/systemd.1.gz
</span></span><span class=line><span class=cl><span class=o>[</span>root@nebula3-01 node_exporter<span class=o>]</span><span class=c1># whereis systemctl</span>
</span></span><span class=line><span class=cl>systemctl: /usr/bin/systemctl /usr/share/man/man1/systemctl.1.gz
</span></span></code></pre></td></tr></table></div></div><h3 id=systemctl>Systemctl<a hidden class=anchor aria-hidden=true href=#systemctl>#</a></h3><h4 id=unit>Unit<a hidden class=anchor aria-hidden=true href=#unit>#</a></h4><p>Systemd引入了一个核心配置：<code>Unit</code>（单元配置）。事实上，Systemd管理的每个进程，都是一个<code>Unit</code>。相当于任务块。一个有12种模式：</p><ul><li>Service unit：系统服务</li><li>Target unit：多个Unit构成的一个组</li><li>Device Unit：硬件设备</li><li>Mount Unit：文件系统的挂载点</li><li>Automount Unit：自动挂载点</li><li>Path Unit：文件或路径</li><li>Scope Unit：不是由 Systemd 启动的外部进程</li><li>Slice Unit：进程组</li><li>Snapshot Unit：Systemd 快照，可以切回某个快照</li><li>Socket Unit：进程间通信的 socket</li><li>Swap Unit：swap 文件</li><li>Timer Unit：定时器</li></ul><h4 id=创建配置文件>创建配置文件<a hidden class=anchor aria-hidden=true href=#创建配置文件>#</a></h4><p>如果我们要创建一个Unit服务，我们应该如何创建配置文件呢？
我们自己配置Unit服务（后续使用Systemctl进行启动和管理），可以配置到：</p><ul><li>/usr/lib/systemd/system/：推荐地址。</li><li>/run/systemd/system/：系统执行过程中所产生的服务脚本,这些脚本的优先级比上面的高。</li><li>/etc/systemd/system/：管理员根据主机系统的需求所建立的执行脚本，优先级比上面的高。</li></ul><ol><li>创建编写配置文件
vim /usr/lib/systemd/system/node_exporter.service</li></ol><p>新增</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=o>[</span>Unit<span class=o>]</span>
</span></span><span class=line><span class=cl><span class=nv>Description</span><span class=o>=</span>node_exporter
</span></span><span class=line><span class=cl><span class=nv>After</span><span class=o>=</span>network.target
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl><span class=o>[</span>Service<span class=o>]</span>
</span></span><span class=line><span class=cl><span class=nv>User</span><span class=o>=</span>root
</span></span><span class=line><span class=cl><span class=nv>Type</span><span class=o>=</span>simple
</span></span><span class=line><span class=cl><span class=nv>ExecStart</span><span class=o>=</span>/root/node_exporter/node_exporter
</span></span><span class=line><span class=cl><span class=nv>PrivateTmp</span><span class=o>=</span><span class=nb>true</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl><span class=o>[</span>Install<span class=o>]</span>
</span></span><span class=line><span class=cl><span class=nv>WantedBy</span><span class=o>=</span>multi-user.target
</span></span></code></pre></td></tr></table></div></div><p>一些解释:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>- Unit
</span></span><span class=line><span class=cl>   - Description，服务的描述
</span></span><span class=line><span class=cl>   - Documentation，文档介绍
</span></span><span class=line><span class=cl>   - After，该服务要在什么服务启动之后启动，比如Mysql需要在network和syslog启动之后再启动
</span></span><span class=line><span class=cl>- Install
</span></span><span class=line><span class=cl>   - WantedBy，值是一个或多个Target，当前Unit激活时<span class=o>(</span><span class=nb>enable</span><span class=o>)</span>符号链接会放入/etc/systemd/system目录下面以Target名+.wants后缀构成的子目录中
</span></span><span class=line><span class=cl>   - RequiredBy，它的值是一个或多个Target，当前Unit激活<span class=o>(</span><span class=nb>enable</span><span class=o>)</span>时，符号链接会放入/etc/systemd/system目录下面以Target名+.required后缀构成的子目录中
</span></span><span class=line><span class=cl>   - Alias，当前Unit可用于启动的别名
</span></span><span class=line><span class=cl>   - Also，当前Unit激活<span class=o>(</span><span class=nb>enable</span><span class=o>)</span>时，会被同时激活的其他Unit
</span></span><span class=line><span class=cl>- Service
</span></span><span class=line><span class=cl>   - Type，定义启动时的进程行为。它有以下几种值。
</span></span><span class=line><span class=cl>   - <span class=nv>Type</span><span class=o>=</span>simple，默认值，执行ExecStart指定的命令，启动主进程
</span></span><span class=line><span class=cl>   - <span class=nv>Type</span><span class=o>=</span>forking，以 fork 方式从父进程创建子进程，创建后父进程会立即退出
</span></span><span class=line><span class=cl>   - <span class=nv>Type</span><span class=o>=</span>oneshot，一次性进程，Systemd 会等当前服务退出，再继续往下执行
</span></span><span class=line><span class=cl>   - <span class=nv>Type</span><span class=o>=</span>dbus，当前服务通过D-Bus启动
</span></span><span class=line><span class=cl>   - <span class=nv>Type</span><span class=o>=</span>notify，当前服务启动完毕，会通知Systemd，再继续往下执行
</span></span><span class=line><span class=cl>   - <span class=nv>Type</span><span class=o>=</span>idle，若有其他任务执行完毕，当前服务才会运行
</span></span><span class=line><span class=cl>   - ExecStart，启动当前服务的命令
</span></span><span class=line><span class=cl>   - ExecStartPre，启动当前服务之前执行的命令
</span></span><span class=line><span class=cl>   - ExecStartPost，启动当前服务之后执行的命令
</span></span><span class=line><span class=cl>   - ExecReload，重启当前服务时执行的命令
</span></span><span class=line><span class=cl>   - ExecStop，停止当前服务时执行的命令
</span></span><span class=line><span class=cl>   - ExecStopPost，停止当其服务之后执行的命令
</span></span><span class=line><span class=cl>   - RestartSec，自动重启当前服务间隔的秒数
</span></span><span class=line><span class=cl>   - Restart，定义何种情况 Systemd 会自动重启当前服务，可能的值包括always（总是重启）、on-success、on-failure、on-abnormal、on-abort、on-watchdog
</span></span><span class=line><span class=cl>   - TimeoutSec，定义 Systemd 停止当前服务之前等待的秒数
</span></span><span class=line><span class=cl>   - Environment，指定环境变量
</span></span></code></pre></td></tr></table></div></div><ol start=2><li>重载配置</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>systemctl daemon-reload
</span></span></code></pre></td></tr></table></div></div><ol start=3><li>启动服务</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>root@nebula3-01 node_exporter<span class=o>]</span><span class=c1># systemctl daemon-reload</span>
</span></span><span class=line><span class=cl><span class=o>[</span>root@nebula3-01 node_exporter<span class=o>]</span><span class=c1># systemctl status node_exporter </span>
</span></span><span class=line><span class=cl>● node_exporter.service - node_exporter
</span></span><span class=line><span class=cl>   Loaded: loaded <span class=o>(</span>/usr/lib/systemd/system/node_exporter.service<span class=p>;</span> disabled<span class=p>;</span> vendor preset: disabled<span class=o>)</span>
</span></span><span class=line><span class=cl>   Active: inactive <span class=o>(</span>dead<span class=o>)</span>
</span></span><span class=line><span class=cl><span class=o>[</span>root@nebula3-01 node_exporter<span class=o>]</span><span class=c1># systemctl start node_exporter </span>
</span></span><span class=line><span class=cl><span class=o>[</span>root@nebula3-01 node_exporter<span class=o>]</span><span class=c1># systemctl status node_exporter </span>
</span></span><span class=line><span class=cl>● node_exporter.service - node_exporter
</span></span><span class=line><span class=cl>   Loaded: loaded <span class=o>(</span>/usr/lib/systemd/system/node_exporter.service<span class=p>;</span> disabled<span class=p>;</span> vendor preset: disabled<span class=o>)</span>
</span></span><span class=line><span class=cl>   Active: active <span class=o>(</span>running<span class=o>)</span> since Thu 2023-03-02 14:04:43 CST<span class=p>;</span> 2s ago
</span></span><span class=line><span class=cl> Main PID: <span class=m>15015</span> <span class=o>(</span>node_exporter<span class=o>)</span>
</span></span><span class=line><span class=cl>   CGroup: /system.slice/node_exporter.service
</span></span><span class=line><span class=cl>           └─15015 /root/node_exporter/node_exporter
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Mar <span class=m>02</span> 14:04:43 nebula3-01 node_exporter<span class=o>[</span>15015<span class=o>]</span>: <span class=nv>ts</span><span class=o>=</span>2023-03-02T06:04:43.268Z <span class=nv>caller</span><span class=o>=</span>node_exporter.go:117 <span class=nv>level</span><span class=o>=</span>info <span class=nv>collector</span><span class=o>=</span>thermal_zone
</span></span><span class=line><span class=cl>Mar <span class=m>02</span> 14:04:43 nebula3-01 node_exporter<span class=o>[</span>15015<span class=o>]</span>: <span class=nv>ts</span><span class=o>=</span>2023-03-02T06:04:43.268Z <span class=nv>caller</span><span class=o>=</span>node_exporter.go:117 <span class=nv>level</span><span class=o>=</span>info <span class=nv>collector</span><span class=o>=</span><span class=nb>time</span>
</span></span><span class=line><span class=cl>Mar <span class=m>02</span> 14:04:43 nebula3-01 node_exporter<span class=o>[</span>15015<span class=o>]</span>: <span class=nv>ts</span><span class=o>=</span>2023-03-02T06:04:43.268Z <span class=nv>caller</span><span class=o>=</span>node_exporter.go:117 <span class=nv>level</span><span class=o>=</span>info <span class=nv>collector</span><span class=o>=</span>timex
</span></span><span class=line><span class=cl>Mar <span class=m>02</span> 14:04:43 nebula3-01 node_exporter<span class=o>[</span>15015<span class=o>]</span>: <span class=nv>ts</span><span class=o>=</span>2023-03-02T06:04:43.268Z <span class=nv>caller</span><span class=o>=</span>node_exporter.go:117 <span class=nv>level</span><span class=o>=</span>info <span class=nv>collector</span><span class=o>=</span>udp_queues
</span></span><span class=line><span class=cl>Mar <span class=m>02</span> 14:04:43 nebula3-01 node_exporter<span class=o>[</span>15015<span class=o>]</span>: <span class=nv>ts</span><span class=o>=</span>2023-03-02T06:04:43.268Z <span class=nv>caller</span><span class=o>=</span>node_exporter.go:117 <span class=nv>level</span><span class=o>=</span>info <span class=nv>collector</span><span class=o>=</span>uname
</span></span><span class=line><span class=cl>Mar <span class=m>02</span> 14:04:43 nebula3-01 node_exporter<span class=o>[</span>15015<span class=o>]</span>: <span class=nv>ts</span><span class=o>=</span>2023-03-02T06:04:43.268Z <span class=nv>caller</span><span class=o>=</span>node_exporter.go:117 <span class=nv>level</span><span class=o>=</span>info <span class=nv>collector</span><span class=o>=</span>vmstat
</span></span><span class=line><span class=cl>Mar <span class=m>02</span> 14:04:43 nebula3-01 node_exporter<span class=o>[</span>15015<span class=o>]</span>: <span class=nv>ts</span><span class=o>=</span>2023-03-02T06:04:43.268Z <span class=nv>caller</span><span class=o>=</span>node_exporter.go:117 <span class=nv>level</span><span class=o>=</span>info <span class=nv>collector</span><span class=o>=</span>xfs
</span></span><span class=line><span class=cl>Mar <span class=m>02</span> 14:04:43 nebula3-01 node_exporter<span class=o>[</span>15015<span class=o>]</span>: <span class=nv>ts</span><span class=o>=</span>2023-03-02T06:04:43.268Z <span class=nv>caller</span><span class=o>=</span>node_exporter.go:117 <span class=nv>level</span><span class=o>=</span>info <span class=nv>collector</span><span class=o>=</span>zfs
</span></span><span class=line><span class=cl>Mar <span class=m>02</span> 14:04:43 nebula3-01 node_exporter<span class=o>[</span>15015<span class=o>]</span>: <span class=nv>ts</span><span class=o>=</span>2023-03-02T06:04:43.269Z <span class=nv>caller</span><span class=o>=</span>tls_config.go:232 <span class=nv>level</span><span class=o>=</span>info <span class=nv>msg</span><span class=o>=</span><span class=s2>&#34;Listening on&#34;</span> <span class=nv>address</span><span class=o>=[</span>::<span class=o>]</span>:9100
</span></span><span class=line><span class=cl>Mar <span class=m>02</span> 14:04:43 nebula3-01 node_exporter<span class=o>[</span>15015<span class=o>]</span>: <span class=nv>ts</span><span class=o>=</span>2023-03-02T06:04:43.269Z <span class=nv>caller</span><span class=o>=</span>tls_config.go:235 <span class=nv>level</span><span class=o>=</span>info <span class=nv>msg</span><span class=o>=</span><span class=s2>&#34;TLS is disabled.&#34;</span> <span class=nv>http2</span><span class=o>=</span><span class=nb>false</span> ...::<span class=o>]</span>:9100
</span></span><span class=line><span class=cl>Hint: Some lines were ellipsized, use -l to show in full.
</span></span></code></pre></td></tr></table></div></div><ol start=4><li>开机自启</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=o>[</span>root@nebula3-01 node_exporter<span class=o>]</span><span class=c1># systemctl enable node_exporter </span>
</span></span><span class=line><span class=cl>Created symlink from /etc/systemd/system/multi-user.target.wants/node_exporter.service to /usr/lib/systemd/system/node_exporter.service.
</span></span></code></pre></td></tr></table></div></div><p>查看是否开机自启, 比上面多了 enabled; vendor preset: disabled</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=o>[</span>root@nebula3-01 node_exporter<span class=o>]</span><span class=c1># systemctl status node_exporter </span>
</span></span><span class=line><span class=cl>● node_exporter.service - node_exporter
</span></span><span class=line><span class=cl>   Loaded: loaded <span class=o>(</span>/usr/lib/systemd/system/node_exporter.service<span class=p>;</span> enabled<span class=p>;</span> vendor preset: disabled<span class=o>)</span>
</span></span><span class=line><span class=cl>   Active: active <span class=o>(</span>running<span class=o>)</span> since Thu 2023-03-02 14:04:43 CST<span class=p>;</span> 11min ago
</span></span><span class=line><span class=cl> Main PID: <span class=m>15015</span> <span class=o>(</span>node_exporter<span class=o>)</span>
</span></span><span class=line><span class=cl>   CGroup: /system.slice/node_exporter.service
</span></span><span class=line><span class=cl>           └─15015 /root/node_exporter/node_exporter
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Mar <span class=m>02</span> 14:04:43 nebula3-01 node_exporter<span class=o>[</span>15015<span class=o>]</span>: <span class=nv>ts</span><span class=o>=</span>2023-03-02T06:04:43.268Z <span class=nv>caller</span><span class=o>=</span>node_exporter.go:117 <span class=nv>level</span><span class=o>=</span>info <span class=nv>collector</span><span class=o>=</span>thermal_zone
</span></span><span class=line><span class=cl>Mar <span class=m>02</span> 14:04:43 nebula3-01 node_exporter<span class=o>[</span>15015<span class=o>]</span>: <span class=nv>ts</span><span class=o>=</span>2023-03-02T06:04:43.268Z <span class=nv>caller</span><span class=o>=</span>node_exporter.go:117 <span class=nv>level</span><span class=o>=</span>info <span class=nv>collector</span><span class=o>=</span><span class=nb>time</span>
</span></span><span class=line><span class=cl>Mar <span class=m>02</span> 14:04:43 nebula3-01 node_exporter<span class=o>[</span>15015<span class=o>]</span>: <span class=nv>ts</span><span class=o>=</span>2023-03-02T06:04:43.268Z <span class=nv>caller</span><span class=o>=</span>node_exporter.go:117 <span class=nv>level</span><span class=o>=</span>info <span class=nv>collector</span><span class=o>=</span>timex
</span></span><span class=line><span class=cl>Mar <span class=m>02</span> 14:04:43 nebula3-01 node_exporter<span class=o>[</span>15015<span class=o>]</span>: <span class=nv>ts</span><span class=o>=</span>2023-03-02T06:04:43.268Z <span class=nv>caller</span><span class=o>=</span>node_exporter.go:117 <span class=nv>level</span><span class=o>=</span>info <span class=nv>collector</span><span class=o>=</span>udp_queues
</span></span><span class=line><span class=cl>Mar <span class=m>02</span> 14:04:43 nebula3-01 node_exporter<span class=o>[</span>15015<span class=o>]</span>: <span class=nv>ts</span><span class=o>=</span>2023-03-02T06:04:43.268Z <span class=nv>caller</span><span class=o>=</span>node_exporter.go:117 <span class=nv>level</span><span class=o>=</span>info <span class=nv>collector</span><span class=o>=</span>uname
</span></span><span class=line><span class=cl>Mar <span class=m>02</span> 14:04:43 nebula3-01 node_exporter<span class=o>[</span>15015<span class=o>]</span>: <span class=nv>ts</span><span class=o>=</span>2023-03-02T06:04:43.268Z <span class=nv>caller</span><span class=o>=</span>node_exporter.go:117 <span class=nv>level</span><span class=o>=</span>info <span class=nv>collector</span><span class=o>=</span>vmstat
</span></span><span class=line><span class=cl>Mar <span class=m>02</span> 14:04:43 nebula3-01 node_exporter<span class=o>[</span>15015<span class=o>]</span>: <span class=nv>ts</span><span class=o>=</span>2023-03-02T06:04:43.268Z <span class=nv>caller</span><span class=o>=</span>node_exporter.go:117 <span class=nv>level</span><span class=o>=</span>info <span class=nv>collector</span><span class=o>=</span>xfs
</span></span><span class=line><span class=cl>Mar <span class=m>02</span> 14:04:43 nebula3-01 node_exporter<span class=o>[</span>15015<span class=o>]</span>: <span class=nv>ts</span><span class=o>=</span>2023-03-02T06:04:43.268Z <span class=nv>caller</span><span class=o>=</span>node_exporter.go:117 <span class=nv>level</span><span class=o>=</span>info <span class=nv>collector</span><span class=o>=</span>zfs
</span></span><span class=line><span class=cl>Mar <span class=m>02</span> 14:04:43 nebula3-01 node_exporter<span class=o>[</span>15015<span class=o>]</span>: <span class=nv>ts</span><span class=o>=</span>2023-03-02T06:04:43.269Z <span class=nv>caller</span><span class=o>=</span>tls_config.go:232 <span class=nv>level</span><span class=o>=</span>info <span class=nv>msg</span><span class=o>=</span><span class=s2>&#34;Listening on&#34;</span> <span class=nv>address</span><span class=o>=[</span>::<span class=o>]</span>:9100
</span></span><span class=line><span class=cl>Mar <span class=m>02</span> 14:04:43 nebula3-01 node_exporter<span class=o>[</span>15015<span class=o>]</span>: <span class=nv>ts</span><span class=o>=</span>2023-03-02T06:04:43.269Z <span class=nv>caller</span><span class=o>=</span>tls_config.go:235 <span class=nv>level</span><span class=o>=</span>info <span class=nv>msg</span><span class=o>=</span><span class=s2>&#34;TLS is disabled.&#34;</span> <span class=nv>http2</span><span class=o>=</span><span class=nb>false</span> ...::<span class=o>]</span>:9100
</span></span><span class=line><span class=cl>Hint: Some lines were ellipsized, use -l to show in full.
</span></span></code></pre></td></tr></table></div></div><h3 id=查看systemd-服务>查看Systemd 服务<a hidden class=anchor aria-hidden=true href=#查看systemd-服务>#</a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=o>[</span>root@nebula3-01 node_exporter<span class=o>]</span><span class=c1># systemctl </span>
</span></span><span class=line><span class=cl>UNIT                                                                LOAD   ACTIVE SUB       DESCRIPTION
</span></span><span class=line><span class=cl>proc-sys-fs-binfmt_misc.automount                                   loaded active running   Arbitrary Executable File Formats File System Automount Point
</span></span><span class=line><span class=cl>sys-devices-pci0000:00-0000:00:03.0-virtio0-net-eth0.device         loaded active plugged   Virtio network device
</span></span><span class=line><span class=cl>sys-devices-pci0000:00-0000:00:04.0-virtio1-virtio<span class=se>\x</span>2dports-vport1p1.device loaded active plugged   /sys/devices/pci0000:00/0000:00:04.0/virtio1/virtio-ports/v
</span></span><span class=line><span class=cl>sys-devices-pci0000:00-0000:00:05.0-virtio2-block-vda-vda1.device   loaded active plugged   /sys/devices/pci0000:00/0000:00:05.0/virtio2/block/vda/vda1
</span></span><span class=line><span class=cl>sys-devices-pci0000:00-0000:00:05.0-virtio2-block-vda-vda2.device   loaded active plugged   /sys/devices/pci0000:00/0000:00:05.0/virtio2/block/vda/vda2
</span></span><span class=line><span class=cl>sys-devices-pci0000:00-0000:00:05.0-virtio2-block-vda.device        loaded active plugged   /sys/devices/pci0000:00/0000:00:05.0/virtio2/block/vda
</span></span><span class=line><span class=cl>sys-devices-platform-serial8250-tty-ttyS1.device                    loaded active plugged   /sys/devices/platform/serial8250/tty/ttyS1
</span></span><span class=line><span class=cl>sys-devices-platform-serial8250-tty-ttyS2.device                    loaded active plugged   /sys/devices/platform/serial8250/tty/ttyS2
</span></span><span class=line><span class=cl>sys-devices-platform-serial8250-tty-ttyS3.device                    loaded active plugged   /sys/devices/platform/serial8250/tty/ttyS3
</span></span><span class=line><span class=cl>sys-devices-pnp0-00:00-tty-ttyS0.device                             loaded active plugged   /sys/devices/pnp0/00:00/tty/ttyS0
</span></span><span class=line><span class=cl>sys-module-configfs.device                                          loaded active plugged   /sys/module/configfs
</span></span><span class=line><span class=cl>sys-subsystem-net-devices-eth0.device                               loaded active plugged   Virtio network device
</span></span><span class=line><span class=cl>-.mount                                                             loaded active mounted   /
</span></span><span class=line><span class=cl>boot.mount                                                          loaded active mounted   /boot
</span></span><span class=line><span class=cl>dev-hugepages.mount                                                 loaded active mounted   Huge Pages File System
</span></span><span class=line><span class=cl>dev-mqueue.mount                                                    loaded active mounted   POSIX Message Queue File System
</span></span><span class=line><span class=cl>...
</span></span></code></pre></td></tr></table></div></div><p>你可以配合grep命令操作</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=o>[</span>root@nebula3-01 node_exporter<span class=o>]</span><span class=c1># systemctl | grep node</span>
</span></span><span class=line><span class=cl>kmod-static-nodes.service                                                                 loaded active exited    Create list of required static device nodes <span class=k>for</span> the current kernel
</span></span><span class=line><span class=cl>node_exporter.service                                                                     loaded active running   node_exporter
</span></span></code></pre></td></tr></table></div></div><h2 id=查看linux-的基本信息>查看Linux 的基本信息<a hidden class=anchor aria-hidden=true href=#查看linux-的基本信息>#</a></h2><h3 id=硬件>硬件<a hidden class=anchor aria-hidden=true href=#硬件>#</a></h3><ul><li><code>uname -a</code> 查看内核/操作系统/CPU信息</li><li><code>head -n 1 /etc/issue</code> 查看操作系统版本</li><li><code>cat /proc/cpuinfo</code> 查看CPU信息</li><li><code>hostname </code>查看计算机名</li><li><code>lspci -tv</code> 列出所有PCI设备</li><li><code>lsusb -tv </code>列出所有USB设备</li><li><code>lsmod</code> 列出加载的内核模块</li><li><code>env</code> 查看环境变量</li></ul><h3 id=资源>资源<a hidden class=anchor aria-hidden=true href=#资源>#</a></h3><ul><li><code>free -m</code> 查看内存使用量和交换区使用量</li><li><code>df -h</code> 查看各分区使用情况</li><li><code>du -sh &lt;目录名></code> 查看指定目录的大小</li><li><code>grep MemTotal /proc/meminfo</code> 查看内存总量</li><li><code>grep MemFree /proc/meminfo</code> `查看空闲内存量</li><li><code>uptime</code> 查看系统运行时间、用户数、负载</li><li><code>cat /proc/loadavg</code> 查看系统负载</li></ul><h3 id=磁盘和分区>磁盘和分区<a hidden class=anchor aria-hidden=true href=#磁盘和分区>#</a></h3><ul><li><code>mount | column -t </code>查看挂接的分区状态`</li><li><code>fdisk -l </code>查看所有分区，扇区大小</li><li><code>swapon -s </code>查看所有交换分区</li><li><code>hdparm -i /dev/hda</code> 查看磁盘参数（仅适用于IDE设备）</li><li><code>dmesg | grep IDE</code> 查看启动时IDE设备检测状况</li><li><code>stat /boot/</code> 查看硬盘块情况，块大小</li><li><code>getconf PAGE_SIZE</code> 查看页大小</li></ul><h3 id=网络>网络<a hidden class=anchor aria-hidden=true href=#网络>#</a></h3><ul><li><code>ifconfig</code> 查看所有网络接口的属性</li><li><code>iptables -L</code> 查看防火墙设置</li><li><code>route -n</code> 查看路由表</li><li><code>netstat -lntp</code> 查看所有监听端口</li><li><code>netstat -antp</code> 查看所有已经建立的连接</li><li><code>netstat -s</code> 查看网络统计信息</li></ul><h3 id=进程>进程<a hidden class=anchor aria-hidden=true href=#进程>#</a></h3><ul><li><code>ps -ef</code> 查看所有进程</li><li><code>top</code> 实时显示进程状态</li></ul><h3 id=用户>用户<a hidden class=anchor aria-hidden=true href=#用户>#</a></h3><ul><li><code>w</code> 查看活动用户</li><li><code>id &lt;用户名></code> 查看指定用户信息</li><li><code>last</code> 查看用户登录日志</li><li><code>cut -d: -f1 /etc/passwd</code> 查看系统所有用户</li><li><code>cut -d: -f1 /etc/group</code> 查看系统所有组</li><li><code>crontab -l</code> 查看当前用户的计划任务</li></ul><h3 id=服务>服务<a hidden class=anchor aria-hidden=true href=#服务>#</a></h3><ul><li><code>chkconfig --list</code> 列出所有系统服务</li><li><code>chkconfig --list | grep on</code> 列出所有启动的系统服务</li></ul><h3 id=程序>程序<a hidden class=anchor aria-hidden=true href=#程序>#</a></h3><ul><li><code>rpm -qa</code> 查看所有安装的软件包</li></ul><h2 id=安装golang-minicoda-git>安装Golang, Minicoda, Git<a hidden class=anchor aria-hidden=true href=#安装golang-minicoda-git>#</a></h2><h3 id=golang>Golang<a hidden class=anchor aria-hidden=true href=#golang>#</a></h3><ol><li><a href=https://go.dev/dl/>下载</a>合适的版本</li><li>输入<code>tar -C /usr/local/ -xzf go1.20.2.linux-amd64.tar.gz</code> 解压到合适的位置， -C 指定位置</li><li>设置GOPATH</li></ol><ul><li><code>echo $PATH</code> 先查看$PATH</li><li>用vim 或者其他工具打开<code>$HOME/.profile</code>, 输入<code>export PATH=$PATH:/usr/local/go/bin</code></li></ul><ol start=4><li>输入 <code>source $HOME/.profile</code> 是上面profile 生效</li><li>输入 <code>go version</code> 检查是否成功</li><li>修改go proxy 为功能镜像 <code>go env -w GOPROXY=https://goproxy.cn,direct</code>
输入 <code>go env</code> 确认 GOPROXY</li></ol><h3 id=minicode>Minicode<a hidden class=anchor aria-hidden=true href=#minicode>#</a></h3><ol><li>从此处<a href=https://docs.conda.io/en/latest/miniconda.html#linux-installers>下载</a>Minicoda</li><li>run <code>bash Miniconda3-latest-Linux-x86_64.sh</code></li><li>根据提示安装，可以都选择默认</li><li>为了使配置生效，关闭Terminal 重新打开</li><li>输入conda list 或者 机器名前面有个base 意味着Terminal 输入python 默认为Python3，想要使用Python2， 输入Python2 即可
如果conda 没有被识别，需要把conda 加入环境变量。</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>vim /etc/profile
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 输入 在文件末尾添加一行：export PATH=/root/miniconda3/bin:$PATH， /root/miniconda3 是miniconda 安装的路径</span>
</span></span><span class=line><span class=cl><span class=c1># :wq 保存退出。然后 source /etc/profile 激活配置</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=git>Git<a hidden class=anchor aria-hidden=true href=#git>#</a></h3><ol><li>首先，把老版本的 Git 卸掉。</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>sudo yum -y remove git
</span></span><span class=line><span class=cl>sudo yum -y remove git-*
</span></span></code></pre></td></tr></table></div></div><ol start=2><li>添加 End Point 到 CentOS 7 仓库 <code>yum -y install https://packages.endpointdev.com/rhel/7/os/x86_64/endpoint-repo.x86_64.rpm</code></li><li><code>yum -y install git</code></li><li>check version <code>git version</code></li><li>配置Git</li></ol><ul><li>Set your name.
<code>git config --global user.name "Your Name"</code></li><li>Set your email address.
<code>git config --global user.email "user@exmample.com"</code></li><li>Verify the settings.
<code>git config --list</code></li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=https://reid00.github.io/en/tags/linux/>Linux</a></li><li><a href=https://reid00.github.io/en/tags/server/>Server</a></li></ul><nav class=paginav><a class=prev href=https://reid00.github.io/en/posts/langs_linux/golang-murmur3/><span class=title>« Prev</span><br><span>Golang MurMur3</span>
</a><a class=next href=https://reid00.github.io/en/posts/storage/20230214-mit6.824-2022-lab4-shardedkv/><span class=title>Next »</span><br><span>20230214 MIT6.824 2022 Lab4 ShardedKV</span></a></nav></footer><script src=https://utteranc.es/client.js repo=Reid00/hugo-blog-talks issue-term=pathname label=Comment theme=github-light crossorigin=anonymous async></script></article></main></body></html>