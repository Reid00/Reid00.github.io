<!doctype html><html lang=en dir=auto><head><meta name=generator content="Hugo 0.111.3"><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Reid's Blog</title><meta name=description content="Reid's Personal Notes -- https://github.com/Reid00"><meta name=author content="Reid"><link rel=canonical href=https://reid00.github.io/><link crossorigin=anonymous href=/assets/css/stylesheet.d7fb4cbf980fe688a21621b06a795933c4e6bb2d4070ec940667af1715d84af2.css integrity="sha256-1/tMv5gP5oiiFiGwanlZM8Tmuy1AcOyUBmevFxXYSvI=" rel="preload stylesheet" as=style><link rel=icon href=https://reid00.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://reid00.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://reid00.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://reid00.github.io/apple-touch-icon.png><link rel=mask-icon href=https://reid00.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://reid00.github.io/index.xml><link rel=alternate type=application/json href=https://reid00.github.io/index.json><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-QRR6GRNQGK"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-QRR6GRNQGK",{anonymize_ip:!1})}</script><meta property="og:title" content="Reid's Blog"><meta property="og:description" content="Reid's Personal Notes -- https://github.com/Reid00"><meta property="og:type" content="website"><meta property="og:url" content="https://reid00.github.io/"><meta property="og:image" content="https://i.loli.net/2021/09/26/3OMGXylm8HUYJ6p.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://i.loli.net/2021/09/26/3OMGXylm8HUYJ6p.png"><meta name=twitter:title content="Reid's Blog"><meta name=twitter:description content="Reid's Personal Notes -- https://github.com/Reid00"><script type=application/ld+json>{"@context":"https://schema.org","@type":"Organization","name":"Reid's Blog","url":"https://reid00.github.io/","description":"Reid\u0026#39;s Personal Notes -- https://github.com/Reid00","thumbnailUrl":"https://reid00.github.io/favicon.ico","sameAs":["https://github.com/Reid00","https://twitter.com","index.xml"]}</script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://reid00.github.io/ accesskey=h title="Reid's Blog (Alt + H)">Reid's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://reid00.github.io/archives title=Archive><span>Archive</span></a></li><li><a href=https://reid00.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://reid00.github.io/categories/ title=Categorys><span>Categorys</span></a></li><li><a href=https://reid00.github.io/tags/ title=Tags><span>Tags</span></a></li></ul></nav></header><main class=main><article class="first-entry home-info"><header class=entry-header><h1>Hi there ğŸ‘‹</h1></header><div class=entry-content><ul><li><strong>Welcome to My Blog.</strong></li><li><strong>This Blog</strong> æ˜¯æˆ‘ä¸ªäººçš„ä¸€äº›ç¬”è®°</li><li>åŒ…å«Go, Python, æœºå™¨å­¦ä¹ , KV å­˜å‚¨å¼•æ“çš„ä¸€äº›ç›¸å…³ç¬”è®°, æ–¹ä¾¿ä»¥åå¤ä¹ </li><li>æˆ‘çš„<a href=https://github.com/Reid00>GitHubä¸»é¡µ</a></li></ul></div><footer class=entry-footer><div class=social-icons><a href=https://github.com/Reid00 target=_blank rel="noopener noreferrer me" title=Github><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a><a href=https://twitter.com target=_blank rel="noopener noreferrer me" title=Twitter><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M23 3a10.9 10.9.0 01-3.14 1.53 4.48 4.48.0 00-7.86 3v1A10.66 10.66.0 013 4s-4 9 5 13a11.64 11.64.0 01-7 2c9 5 20 0 20-11.5a4.5 4.5.0 00-.08-.83A7.72 7.72.0 0023 3z"/></svg></a><a href=index.xml target=_blank rel="noopener noreferrer me" title=RsS><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a></div></footer></article><article class=post-entry><figure class=entry-cover><img loading=lazy src=https://raw.githubusercontent.com/gohugoio/gohugoioTheme/master/static/images/hugo-logo-wide.svg alt="hugo logo"></figure><header class=entry-header><h2>Hugoæ­å»ºåšå®¢å¹¶ç”¨GitHubActionéƒ¨ç½²</h2></header><div class=entry-content><p>ä»‹ç» è¿™æ˜¯æˆ‘åšå®¢ Blog çš„åœ°å€ å’Œ Github Repositroyã€‚
æœ¬åšå®¢æ˜¯ç”¨Hugo æ¥ç”Ÿæˆé™æ€ç½‘ç«™ã€‚ Hugo GitHub
å¹¶é€šè¿‡ GitHub Action æ¥è‡ªåŠ¨åŒ–éƒ¨ç½²åˆ° GitHub Pagesã€‚
æ­å»ºæ­¥éª¤ åˆ›å»ºä»£ç ä»“åº“ é¦–å…ˆæŒ‰ç…§æ–‡æ¡£åˆ›å»º GitHub Pages ç«™ç‚¹ã€‚è¯¥ä»“åº“å¯è§æ€§å¿…é¡»æ˜¯ Publicã€‚
å¦å¤–åˆ›å»ºä¸€ä¸ªä»“åº“ç”¨æ¥å­˜æ”¾ Hugo çš„æºæ–‡ä»¶ï¼Œåç§°éšæ„ï¼Œè¿™é‡Œå‡è®¾ä»“åº“åå« .github.io.sourceã€‚å»ºè®®å°†ä»“åº“å¯è§æ€§è®¾ç½®æˆ Private ä»¥ä¿æŠ¤å¥½ä½ çš„æºä»£ç ã€‚
åˆ›å»ºå®Œæ¯•åä½ çš„è´¦æˆ·ä¸‹å°†å­˜åœ¨ä»¥ä¸‹ä¸¤ä¸ªä»£ç ä»“åº“ï¼š
https://github.com/&lt;YourName>/&lt;YourName>.github.io (å…¬å¼€çš„)
https://github.com/&lt;YourName>/&lt;YourName>.github.io.source(ç§æœ‰çš„)
ç”ŸæˆHugo ç½‘ç«™ å®‰è£…Hugo For Windows
åˆ°Github Release ä¸‹è½½æœ€æ–°ç‰ˆæœ¬ï¼Œç”¨hugo version æˆ–è€…extended version (éƒ¨åˆ†ä¸»é¢˜éœ€è¦extended version æ‰èƒ½ä½¿ç”¨)
å®‰è£…æ­¥éª¤å‚è€ƒå®˜æ–¹æä¾›
åœ¨Cç›˜æ–°å»ºHugo/sites ç›®å½•ç”¨äº ç”Ÿæˆhugo é¡¹ç›®
åœ¨Cç›˜æ–°å»ºHugo/bin ç›®å½•ï¼Œç”¨æ¥å­˜æ”¾ä¸Šé¢è§£å‹åçš„hugo äºŒè¿›åˆ¶æ–‡ä»¶
æ·»åŠ C:\Hugo\bin åˆ°ç³»ç»Ÿç¯å¢ƒå˜é‡ä¸­
æ·»åŠ å®Œæˆåï¼Œåœ¨cmd æˆ–è€…å…¶ä»–console ä¸­è¾“å…¥hugo versionæ£€æŸ¥ ç¯å¢ƒå˜é‡æ˜¯å¦æ·»åŠ æˆåŠŸã€‚
å‡ºç°ä¸‹é¢çš„è¡¨ç¤ºæˆåŠŸã€‚æ³¨æ„ï¼šç¯å¢ƒå˜é‡æ·»åŠ æˆåŠŸåï¼Œè®°å¾—é‡å¯console
For mac/linux
å¯ä»¥åªç”¨ç”¨å‘½ä»¤ä¸‹è½½ï¼Œæ­¤å¤„ä¸å¤šè®²äº†ã€‚
Hugo ç”Ÿæˆç½‘ç«™ åœ¨/c/Hugo/sites ç›®å½•ä¸‹ä½¿ç”¨å‘½ä»¤hugo new site siteNameç”Ÿæˆç½‘ç«™...</p></div><footer class=entry-footer><span title='2022-06-07 17:46:02 +0800 +0800'>2022-06-07</span>&nbsp;Â·&nbsp;7 min&nbsp;Â·&nbsp;Reid</footer><a class=entry-link aria-label="post link to Hugoæ­å»ºåšå®¢å¹¶ç”¨GitHubActionéƒ¨ç½²" href=https://reid00.github.io/posts/hugo%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E5%B9%B6%E7%94%A8githubaction%E9%83%A8%E7%BD%B2/></a></article><article class=post-entry><header class=entry-header><h2>Git å®‰è£…ã€å¸¸è§é—®é¢˜å’Œå¤šç”¨æˆ·é…ç½®</h2></header><div class=entry-content><p>å®‰è£… Windows æ­¤å¤„ä¸‹è½½ åŒå‡»exe ä¸€ç›´ä¸‹ä¸€æ­¥å®‰è£…
Linux Linux é»˜è®¤å®‰è£…çš„Git ç‰ˆæœ¬ä¸€èˆ¬ä¸º1.8*, å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼å‡çº§
é¦–å…ˆï¼ŒæŠŠè€ç‰ˆæœ¬çš„ Git å¸æ‰ã€‚ 1 2 sudo yum -y remove git sudo yum -y remove git-* æ·»åŠ  End Point åˆ° CentOS 7 ä»“åº“ yum -y install https://packages.endpointdev.com/rhel/7/os/x86_64/endpoint-repo.x86_64.rpm yum -y install git check version git version é…ç½®Git Set your name. git config --global user.name "Your Name" Set your email address. git config --global user.email "user@exmample.com" Verify the settings. git config --list Git é…ç½®SSH key è¿æ¥Github HTTPS URL å’Œ SSH URL åœ¨ä½¿ç”¨ git clone é¡¹ç›®æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ä»“åº“çš„ HTTPS URL ä¹Ÿå¯ä»¥ ä½¿ç”¨ SSH URL HTTPS URLï¼Œä¾‹å¦‚ï¼šhttps://github....</p></div><footer class=entry-footer><span title='2023-03-08 19:06:41 +0800 +0800'>2023-03-08</span>&nbsp;Â·&nbsp;5 min&nbsp;Â·&nbsp;Reid</footer><a class=entry-link aria-label="post link to Git å®‰è£…ã€å¸¸è§é—®é¢˜å’Œå¤šç”¨æˆ·é…ç½®" href=https://reid00.github.io/posts/git-%E5%AE%89%E8%A3%85%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E5%92%8C%E5%A4%9A%E7%94%A8%E6%88%B7%E9%85%8D%E7%BD%AE/></a></article><article class=post-entry><header class=entry-header><h2>Slidev Markdown è½¬PPT</h2></header><div class=entry-content><p>ä»‹ç» Slidev ä½¿ç”¨ä¸€ç§æ‰©å±•çš„ Markdown æ ¼å¼ï¼Œåœ¨ä¸€ä¸ªçº¯æ–‡æœ¬æ–‡ä»¶ä¸­å­˜å‚¨å’Œç»„ç»‡ä½ çš„å¹»ç¯ç‰‡ã€‚è¿™è®©ä½ ä¸“æ³¨äºåˆ¶ä½œå†…å®¹ã€‚è€Œä¸”ç”±äºå†…å®¹å’Œæ ·å¼æ˜¯åˆ†å¼€çš„ï¼Œè¿™ä¹Ÿä½¿å¾—åœ¨ä¸åŒçš„ä¸»é¢˜ä¹‹é—´åˆ‡æ¢å˜å¾—æ›´åŠ å®¹æ˜“ã€‚
å®˜ç½‘ GitHub
å¦‚ä½•ä½¿ç”¨ Node.js çš„å®‰è£… å‚è€ƒNode å®‰è£…åˆé€‚çš„ç‰ˆæœ¬
Slidev å®‰è£…ç®€ä»‹ æœ¬åœ°åˆ›å»º å¿«é€Ÿå¼€å§‹æœ€å¥½çš„æ–¹å¼å°±æ˜¯ä½¿ç”¨å®˜æ–¹çš„åˆå§‹æ¨¡æ¿ã€‚
ä½¿ç”¨ NPMï¼š å¯ä»¥æœ¬åœ°åˆ›å»ºä¸€ä¸ªslidev çš„æ–‡ä»¶å¤¹ï¼Œç„¶ååœ¨æ­¤æ–‡ä»¶å¤¹ä¸‹ç›®å½•çš„å‘½ä»¤è¡Œä¸­è¾“å…¥ä¸‹é¢çš„å‘½ä»¤: 1 npm install slidev å®‰è£…å®Œæˆä¹‹åä¼šç”Ÿæˆä¸€ä¸ª slidev çš„æ–‡ä»¶å¤¹ï¼Œé‡Œé¢æœ‰ä¸€ä¸ªdemo çš„md æ–‡ä»¶ã€‚
ä½¿ç”¨ Yarnï¼š 1 yarn create slid å‘½ä»¤è¡Œç•Œé¢ åˆ›å»ºä¹‹åï¼ŒæŒ‰ ctrl + c ç»“æŸdemoï¼Œ å¦‚æœæƒ³è¦å†æ¬¡æ‰“å¼€ï¼Œå¯ä»¥ä½¿ç”¨ npx slidev
å…¨å±€å®‰è£… ä½ å¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤åœ¨å…¨å±€å®‰è£… Slidevï¼š
1 npm i -g @slidev/cli ç„¶åå³å¯åœ¨ä»»ä½•åœ°æ–¹ä½¿ç”¨ slidevï¼Œè€Œæ— éœ€æ¯æ¬¡éƒ½åˆ›å»ºä¸€ä¸ªé¡¹ç›®ã€‚
1 slidev xx.md æŸ¥çœ‹ç›¸å…³å‘½ä»¤ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 $ slidev --help slidev [args] å‘½ä»¤ï¼š slidev [entry] Start a local server for Slidev [é»˜è®¤å€¼] slidev build [entry] Build hostable SPA slidev format [entry] Format the markdown file slidev theme [subcommand] Theme related operations slidev export [entry] Export slides to PDF slidev export-notes [entry] Export slide notes to PDF ä½ç½®ï¼š entry path to the slides markdown entry [å­—ç¬¦ä¸²] [é»˜è®¤å€¼: "slides....</p></div><footer class=entry-footer><span title='2023-03-06 14:00:08 +0800 +0800'>2023-03-06</span>&nbsp;Â·&nbsp;3 min&nbsp;Â·&nbsp;Reid</footer><a class=entry-link aria-label="post link to Slidev Markdown è½¬PPT" href=https://reid00.github.io/posts/slidev-markdown-%E8%BD%ACppt/></a></article><article class=post-entry><header class=entry-header><h2>Golang MurMur3</h2></header><div class=entry-content><p>å“ˆå¸Œ å“ˆå¸Œï¼ˆHashï¼‰ä¹Ÿç§°ä¸ºæ•£åˆ—ï¼Œæ˜¯æŠŠä»»æ„é•¿åº¦çš„è¾“å…¥é€šè¿‡å“ˆå¸Œç®—æ³•å˜æ¢ä¸ºå›ºå®šé•¿åº¦çš„è¾“å‡ºï¼Œè¿™ä¸ªè¾“å‡ºå€¼ä¹Ÿå°±æ˜¯æ•£åˆ—å€¼ã€‚
å“ˆå¸Œè¡¨æ˜¯æ ¹æ®é”®å€¼å¯¹ï¼ˆkey valueï¼‰è€Œç›´æ¥è¿›è¡Œè®¿é—®çš„æ•°æ®ç»“æ„ï¼Œé€šè¿‡å°†é”®å€¼å¯¹æ˜ å°„åˆ°è¡¨ä¸­ä¸€ä¸ªä½ç½®æ¥è®¿é—®è®°å½•ï¼Œä»¥åŠ å¿«æŸ¥è¯¢é€Ÿåº¦ã€‚æ˜ å°„å‡½æ•°åˆç§°ä¸ºæ•£åˆ—å‡½æ•°ï¼Œå­˜æ”¾è®°å½•çš„æ•°ç»„å«åšå“ˆå¸Œè¡¨ã€‚
å¦‚æœä¸¤ä¸ªè¾“å…¥ä¸²çš„å“ˆå¸Œå‡½æ•°çš„å€¼ç›¸åŒåˆ™å‘ç”Ÿäº†ç¢°æ’ï¼ˆCollisionï¼‰ï¼Œæ—¢ç„¶æŠŠä»»æ„è¾ƒé•¿å­—ç¬¦ä¸²è½¬åŒ–ä¸ºå›ºå®šé•¿åº¦ä¸”è¾ƒçŸ­çš„å­—ç¬¦ä¸²ï¼Œå› æ­¤å¿…æœ‰ä¸€ä¸ªè¾“å‡ºä¸²å¯¹åº”å¤šä¸ªè¾“å…¥ä¸²ï¼Œç¢°æ’æ˜¯å¿…ç„¶å­˜åœ¨çš„ã€‚è¿™ç§ç¢°æ’åˆç§°ä¸ºå“ˆå¸Œå†²çªã€‚
æ•£åˆ—å‡½æ•° å“ˆå¸Œç®—æ³•æ˜¯ä¸€ç§å¹¿ä¹‰çš„ç®—æ³•ï¼Œä¹Ÿå¯ä»¥è®¤ä¸ºæ˜¯ä¸€ç§æ€æƒ³ï¼Œä½¿ç”¨å“ˆå¸Œç®—æ³•å¯æé«˜å­˜å‚¨ç©ºé—´çš„åˆ©ç”¨ç‡å’Œæ•°æ®æŸ¥è¯¢æ•ˆç‡ã€‚
å“ˆå¸Œå‡½æ•°åˆç§°ä¸ºæ•£åˆ—å‡½æ•°ï¼Œé‡‡ç”¨æ•£åˆ—ç®—æ³•ã€‚ å“ˆå¸Œå‡½æ•°æ˜¯ä¸€ç§ä»ä»»ä½•ä¸€ç§æ•°æ®ä¸­åˆ›å»ºå°çš„æ•°å­—â€œæŒ‡çº¹â€çš„æ–¹æ³•ã€‚ å“ˆå¸Œå‡½æ•°å°†æ•°æ®æ‰“ä¹±æ··åˆï¼Œé‡æ–°åˆ›å»ºä¸€ä¸ªå«åšæ•£åˆ—å€¼çš„â€œæŒ‡çº¹â€ã€‚ å“ˆå¸Œå‡½æ•°ä¼šå°†æ¶ˆæ¯æˆ–æ•°æ®å‹ç¼©æˆæ‘˜è¦ï¼Œä½¿å¾—æ•°æ®é‡å˜å°ï¼Œå°†æ•°æ®çš„æ ¼å¼å›ºå®šä¸‹æ¥ã€‚ Go æ¥å£ Golangçš„hashåŒ…æä¾›å¤šç§æ•£åˆ—ç®—æ³•ï¼Œæ¯”å¦‚crc32/64, adler32, fnvâ€¦
1 2 3 4 5 6 7 type Hash interface{ io.Writer //åµŒå…¥io.Writeræ¥å£ï¼Œå‘æ‰§è¡Œä¸­çš„hashåŠ å…¥æ›´å¤šæ•°æ®ã€‚ Sum(b []byte) []byte//å°†å½“å‰hashè¿½åŠ åˆ°å­—èŠ‚æ•°ç»„båé¢ï¼Œä¸ä¼šæ”¹å˜å½“å‰hashçŠ¶æ€ã€‚ Reset()//é‡ç½®hashåˆ°åˆå§‹åŒ–çŠ¶æ€ Size() int//è¿”å›hashç»“æœè¿”å›çš„å­—èŠ‚æ•° BlockSize() int//è¿”å›hashçš„é›†æˆå—å¤§å°ï¼Œä¸ºæé«˜æ•ˆç‡ï¼ŒWriteæ–¹æ³•ä¼ å…¥çš„å­—èŠ‚æ•°æœ€å¥½æ˜¯block sizeçš„å€æ•°ã€‚ } MD5 MD5æ¶ˆæ¯æ‘˜è¦ç®—æ³•ï¼Œæ˜¯ä¸€ç§è¢«å¹¿æ³›ä½¿ç”¨çš„å¯†ç æ•£åˆ—å‡½æ•°ï¼Œå¯ä»¥äº§å‡ºä¸€ä¸ª128ä½ï¼ˆ16å­èŠ‚ï¼‰çš„æ•£åˆ—å€¼ã€‚
MD5å·²è¢«è¯å®æ— æ³•é˜²æ­¢ç¢°æ’ï¼Œå·²ç»ä¸ç®—æ˜¯å¾ˆå®‰å…¨çš„ç®—æ³•ï¼Œå› æ­¤ä¸é€‚ç”¨äºå®‰å…¨æ€§è®¤è¯ï¼Œæ¯”å¦‚SSLå…¬å¼€å¯†é’¥è®¤è¯æˆ–æ•°å­—ç­¾åç­‰ç”¨é€”ã€‚
å¯¹äºéœ€è¦é«˜åº¦å®‰å…¨æ€§çš„æ•°æ®ï¼Œä¸€èˆ¬å»ºè®®æ”¹ç”¨å…¶ä»–ç®—æ³•ï¼Œæ¯”å¦‚SHA256ã€‚
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 input := "123456" hash := md5.New() //åˆ›å»ºæ•£åˆ—å€¼ n, err := hash.Write([]byte(input)) //å†™å…¥å¾…å¤„ç†å­—èŠ‚ if err !...</p></div><footer class=entry-footer><span title='2023-03-01 15:36:44 +0800 +0800'>2023-03-01</span>&nbsp;Â·&nbsp;2 min&nbsp;Â·&nbsp;Reid</footer><a class=entry-link aria-label="post link to Golang MurMur3" href=https://reid00.github.io/posts/golang-murmur3/></a></article><article class=post-entry><header class=entry-header><h2>Linux æœåŠ¡å™¨ç™»å½•åçš„å¸¸è§æ“ä½œ</h2></header><div class=entry-content><p>Linuxä¿®æ”¹ä¸»æœºåä¿®æ”¹hostnameçš„æ–¹æ³• ä¸´æ—¶ä¿®æ”¹Linuxä¸»æœºåçš„æ–¹æ³• hostname newname æ‰§è¡Œå‘½ä»¤åå‘ç°æ²¡æœ‰å˜åŒ–ã€‚é‡æ–°å¼€ç»ˆç«¯å³å¯æ˜¾ç¤ºï¼Œä½ ä¹Ÿå¯ä»¥é€šè¿‡uname -nå‘½ä»¤æ¥æŸ¥çœ‹å½“å‰çš„ä¸»æœºåã€‚
æ°¸ä¹…ä¿®æ”¹Linuxä¸»æœºåçš„æ–¹æ³•
ä½¿ç”¨ hostnamectl æ¥æ”¹å˜ä¸»æœºåç§° 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 [root@nebula3-01 ~]# hostnamectl Static hostname: nebula3-01 Icon name: computer-vm Chassis: vm Machine ID: 1d8987d66da0c7cd7960ca4e5aefe30f Boot ID: 717058195e934eb88f4631adf25ab163 Virtualization: kvm Operating System: CentOS Linux 7 (Core) CPE OS Name: cpe:/o:centos:centos:7 Kernel: Linux 3.10.0-1160.el7.x86_64 Architecture: x86-64 [root@nebula-test02 ~]# hostnamectl set-hostname nebula3-02 [root@nebula-test02 ~]# hostnamectl Static hostname: nebula3-02 Icon name: computer-vm Chassis: vm Machine ID: 1d8987d66da0c7cd7960ca4e5aefe30f Boot ID: 6b836dcf9c274ef48f334e6b53f8e296 Virtualization: kvm Operating System: CentOS Linux 7 (Core) CPE OS Name: cpe:/o:centos:centos:7 Kernel: Linux 3....</p></div><footer class=entry-footer><span title='2023-02-27 15:32:24 +0800 +0800'>2023-02-27</span>&nbsp;Â·&nbsp;9 min&nbsp;Â·&nbsp;Reid</footer><a class=entry-link aria-label="post link to Linux æœåŠ¡å™¨ç™»å½•åçš„å¸¸è§æ“ä½œ" href=https://reid00.github.io/posts/linux-%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%99%BB%E5%BD%95%E5%90%8E%E7%9A%84%E5%B8%B8%E8%A7%81%E6%93%8D%E4%BD%9C/></a></article><article class=post-entry><header class=entry-header><h2>20230214 MIT6.824 2022 Lab4 ShardedKV</h2></header><div class=entry-content><p>ShardedKV ä»‹ç» æœ‰å…³ shardkvï¼Œå…¶å¯ä»¥ç®—æ˜¯ä¸€ä¸ª multi-raft çš„å®ç°ï¼Œåªæ˜¯ç¼ºå°‘äº†ç‰©ç†èŠ‚ç‚¹çš„æŠ½è±¡æ¦‚å¿µã€‚åœ¨å®é™…çš„ç”Ÿäº§ç³»ç»Ÿä¸­ï¼Œä¸åŒ raft ç»„çš„æˆå‘˜å¯èƒ½å­˜åœ¨äºä¸€ä¸ªç‰©ç†èŠ‚ç‚¹ä¸Šï¼Œè€Œä¸”ä¸€èˆ¬æƒ…å†µä¸‹éƒ½æ˜¯ä¸€ä¸ªç‰©ç†èŠ‚ç‚¹æ‹¥æœ‰ä¸€ä¸ªçŠ¶æ€æœºï¼Œä¸åŒ raft ç»„ä½¿ç”¨ä¸åŒåœ°å‘½åç©ºé—´æˆ–å‰ç¼€æ¥æ“ä½œåŒä¸€ä¸ªçŠ¶æ€æœºã€‚åŸºäºæ­¤ï¼Œä¸‹æ–‡æ‰€æåˆ°çš„çš„èŠ‚ç‚¹éƒ½ä»£æŒ‡ raft ç»„çš„æŸä¸ªæˆå‘˜ï¼Œè€Œä¸ä»£æŒ‡æŸä¸ªç‰©ç†èŠ‚ç‚¹ã€‚æ¯”å¦‚èŠ‚ç‚¹å®•æœºä»£æŒ‡ raft ç»„çš„æŸä¸ªæˆå‘˜è¢« kill æ‰ï¼Œè€Œä¸æ˜¯æŒ‡æŸä¸ªç‰©ç†èŠ‚ç‚¹å®•æœºï¼Œä»è€Œå¯èƒ½å½±å“å¤šä¸ª raft çš„æˆå‘˜ã€‚
åœ¨æœ¬å®éªŒä¸­ï¼Œæˆ‘ä»¬å°†æ„å»ºä¸€ä¸ªå¸¦åˆ†ç‰‡çš„KVå­˜å‚¨ç³»ç»Ÿï¼Œå³ä¸€ç»„å‰¯æœ¬ç»„ä¸Šçš„é”®ã€‚æ¯ä¸€ä¸ªåˆ†ç‰‡éƒ½æ˜¯KVå¯¹çš„å­é›†ï¼Œä¾‹å¦‚ï¼Œæ‰€æœ‰ä»¥â€œaâ€å¼€å¤´çš„é”®å¯èƒ½æ˜¯ä¸€ä¸ªåˆ†ç‰‡ï¼Œæ‰€æœ‰ä»¥â€œbâ€å¼€å¤´çš„é”®å¯èƒ½æ˜¯å¦ä¸€ä¸ªåˆ†ç‰‡ã€‚ ä¹Ÿå¯ä»¥ç”¨range æˆ–è€…Hash ä¹‹ååˆ†åŒºã€‚ åˆ†ç‰‡çš„åŸå› æ˜¯æ€§èƒ½ã€‚æ¯ä¸ªreplica groupåªå¤„ç†å‡ ä¸ªåˆ†ç‰‡çš„ put å’Œ getï¼Œå¹¶ä¸”è¿™äº›ç»„å¹¶è¡Œæ“ä½œï¼›å› æ­¤ï¼Œç³»ç»Ÿæ€»ååé‡ï¼ˆæ¯å•ä½æ—¶é—´çš„æŠ•å…¥å’Œè·å–ï¼‰ä¸ç»„æ•°æˆæ¯”ä¾‹å¢åŠ ã€‚
æˆ‘ä»¬çš„æ•´ä¸ªç³»ç»Ÿæœ‰ä¸¤ä¸ªåŸºæœ¬ç»„ä»¶ï¼šshard controller å’Œ shard groupã€‚æ•´ä¸ªç³»ç»Ÿæœ‰ä¸€ä¸ª controller å’Œå¤šä¸ª groupï¼Œcontroller å•ç‹¬ä¸€ä¸ª raft é›†ç¾¤ï¼Œæ¯ä¸€ä¸ª shard group æ˜¯ç”± kvraft å®ä¾‹æ„æˆçš„é›†ç¾¤ã€‚shard controller è´Ÿè´£è°ƒåº¦ï¼Œå®¢æˆ·ç«¯å‘ shard controller å‘é€è¯·æ±‚ï¼Œcontroller ä¼šæ ¹æ®é…ç½®(config)æ¥å‘ŠçŸ¥å®¢æˆ·ç«¯æœåŠ¡è¿™ä¸ª key çš„æ˜¯å“ªä¸ª groupã€‚ æ¯ä¸ª group è´Ÿè´£éƒ¨åˆ† shardã€‚
1 2 3 4 5 type Config struct { Num int // config number, version also Shards [NShards]int // shard -> gid Groups map[int][]string // gid -> servers[] } ä¸‰ä¸ªå‚æ•°åˆ†åˆ«å¯¹åº”çš„ç‰ˆæœ¬çš„é…ç½®å·ï¼Œåˆ†ç‰‡æ‰€å¯¹åº”çš„ç»„(Group)ä¿¡æ¯ï¼ˆå®éªŒä¸­çš„åˆ†ç‰‡ä¸º10ä¸ªï¼‰ï¼Œæ¯ä¸ªç»„å¯¹åº”çš„æœåŠ¡å™¨æ˜ å°„åç§°åˆ—è¡¨ï¼ˆä¹Ÿå°±æ˜¯ç»„ä¿¡æ¯ï¼‰ã€‚...</p></div><footer class=entry-footer><span title='2023-02-20 17:45:45 +0800 +0800'>2023-02-20</span>&nbsp;Â·&nbsp;15 min&nbsp;Â·&nbsp;Reid</footer><a class=entry-link aria-label="post link to 20230214 MIT6.824 2022 Lab4 ShardedKV" href=https://reid00.github.io/posts/20230214-mit6.824-2022-lab4-shardedkv/></a></article><article class=post-entry><header class=entry-header><h2>MIT6.824 2022 Lab3 RaftKV</h2></header><div class=entry-content><p>ä»‹ç» åœ¨lab2çš„Raftå‡½æ•°åº“ä¹‹ä¸Šï¼Œæ­å»ºä¸€ä¸ªèƒ½å¤Ÿå®¹é”™çš„key/valueå­˜å‚¨æœåŠ¡ï¼Œéœ€è¦æä¾›å¼ºä¸€è‡´æ€§ä¿è¯ã€‚
å¼ºä¸€è‡´æ€§ä»‹ç» å¯¹äºå•ä¸ªè¯·æ±‚ï¼Œæ•´ä¸ªæœåŠ¡éœ€è¦è¡¨ç°å¾—åƒä¸ªå•æœºæœåŠ¡ï¼Œå¹¶ä¸”å¯¹çŠ¶æ€æœºçš„ä¿®æ”¹åŸºäºä¹‹å‰æ‰€æœ‰çš„è¯·æ±‚ã€‚å¯¹äºå¹¶å‘çš„è¯·æ±‚ï¼Œè¿”å›çš„å€¼å’Œæœ€ç»ˆçš„çŠ¶æ€å¿…é¡»ç›¸åŒï¼Œå°±å¥½åƒæ‰€æœ‰è¯·æ±‚éƒ½æ˜¯ä¸²è¡Œçš„ä¸€æ ·ã€‚å³ä½¿æœ‰äº›è¯·æ±‚å‘ç”Ÿåœ¨äº†åŒä¸€æ—¶é—´ï¼Œé‚£ä¹ˆä¹Ÿåº”å½“ä¸€ä¸ªä¸€ä¸ªå“åº”ã€‚æ­¤å¤–ï¼Œåœ¨ä¸€ä¸ªè¯·æ±‚è¢«æ‰§è¡Œä¹‹å‰ï¼Œè¿™ä¹‹å‰çš„è¯·æ±‚éƒ½å¿…é¡»å·²ç»è¢«å®Œæˆï¼ˆåœ¨æŠ€æœ¯ä¸Šæˆ‘ä»¬ä¹Ÿå«ç€çº¿æ€§åŒ–ï¼ˆlinearizabilityï¼‰ï¼‰ã€‚ kvæœåŠ¡æ”¯æŒä¸‰ç§æ“ä½œï¼šPut, Append, Getã€‚é€šè¿‡åœ¨å†…å­˜ç»´æŠ¤ä¸€ä¸ªç®€å•çš„é”®/å€¼å¯¹æ•°æ®åº“ï¼Œé”®å’Œå€¼éƒ½æ˜¯å­—ç¬¦ä¸²ï¼›
æ•´ä½“æ¶æ„ ç®€åŒ–æ¥çœ‹ åœ¨æ­£å¼å¼€å§‹å‰ï¼Œè¦äº†è§£è®ºæ–‡-extend-versionä¸­section 7å’Œ8çš„å†…å®¹ã€‚
ç›¸å…³çš„RPC åœ¨Raft ä½œè€…çš„åšå£«è®ºæ–‡ä¸­çš„6.3- Implementing linearizable semantics å°ç»“æœ‰å¾ˆè¯¦ç»†çš„ä»‹ç»ï¼Œå»ºè®®å…ˆé˜…è¯»ã€‚
RPC Lab3A - ä¸éœ€è¦æ—¥å¿—å‹ç¼©çš„Key/ValueæœåŠ¡ è€ƒè™‘è¿™æ ·ä¸€ä¸ªåœºæ™¯ï¼Œå®¢æˆ·ç«¯å‘æœåŠ¡ç«¯æäº¤äº†ä¸€æ¡æ—¥å¿—ï¼ŒæœåŠ¡ç«¯å°†å…¶åœ¨ raft ç»„ä¸­è¿›è¡Œäº†åŒæ­¥å¹¶æˆåŠŸ commitï¼Œæ¥ç€åœ¨ apply åè¿”å›ç»™å®¢æˆ·ç«¯æ‰§è¡Œç»“æœã€‚ç„¶è€Œä¸å¹¸çš„æ˜¯ï¼Œè¯¥ rpc åœ¨ä¼ è¾“ä¸­å‘ç”Ÿäº†ä¸¢å¤±ï¼Œå®¢æˆ·ç«¯å¹¶æ²¡æœ‰æ”¶åˆ°å†™å…¥æˆåŠŸçš„å›å¤ã€‚å› æ­¤ï¼Œå®¢æˆ·ç«¯åªèƒ½è¿›è¡Œé‡è¯•ç›´åˆ°æ˜ç¡®åœ°å†™å…¥æˆåŠŸæˆ–å¤±è´¥ä¸ºæ­¢ï¼Œè¿™å°±å¯èƒ½ä¼šå¯¼è‡´ç›¸åŒåœ°å‘½ä»¤è¢«æ‰§è¡Œå¤šæ¬¡ï¼Œä»è€Œè¿èƒŒçº¿æ€§ä¸€è‡´æ€§ã€‚
æœ‰äººå¯èƒ½è®¤ä¸ºï¼Œåªè¦å†™è¯·æ±‚æ˜¯å¹‚ç­‰çš„ï¼Œé‚£é‡å¤æ‰§è¡Œå¤šæ¬¡ä¹Ÿæ˜¯å¯ä»¥æ»¡è¶³çº¿æ€§ä¸€è‡´æ€§çš„ï¼Œå®é™…ä¸Šåˆ™ä¸ç„¶ã€‚è€ƒè™‘è¿™æ ·ä¸€ä¸ªä¾‹å­ï¼šå¯¹äºä¸€ä¸ªä»…æ”¯æŒ put å’Œ get æ¥å£çš„ raftKV ç³»ç»Ÿï¼Œå…¶æ¯ä¸ªè¯·æ±‚éƒ½å…·æœ‰å¹‚ç­‰æ€§ã€‚è®¾ x çš„åˆå§‹å€¼ä¸º 0ï¼Œæ­¤æ—¶æœ‰ä¸¤ä¸ªå¹¶å‘å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯ 1 æ‰§è¡Œ put(x,1)ï¼Œå®¢æˆ·ç«¯ 2 æ‰§è¡Œ get(x) å†æ‰§è¡Œ put(x,2)ï¼Œé—®ï¼ˆå®¢æˆ·ç«¯ 2 è¯»åˆ°çš„å€¼ï¼Œx çš„æœ€ç»ˆå€¼ï¼‰æ˜¯å¤šå°‘ã€‚å¯¹äºçº¿æ€§ä¸€è‡´çš„ç³»ç»Ÿï¼Œç­”æ¡ˆå¯ä»¥æ˜¯ (0,1)ï¼Œ(0,2) æˆ– (1,2)ã€‚ç„¶è€Œï¼Œå¦‚æœå®¢æˆ·ç«¯ 1 æ‰§è¡Œ put è¯·æ±‚æ—¶å‘ç”Ÿäº†ä¸Šæ®µæè¿°çš„æƒ…å†µï¼Œç„¶åå®¢æˆ·ç«¯ 2 è¯»åˆ° x çš„å€¼ä¸º 1 å¹¶å°† x ç½®ä¸ºäº† 2ï¼Œæœ€åå®¢æˆ·ç«¯ 1 è¶…æ—¶é‡è¯•ä¸”å†æ¬¡å°† x ç½®ä¸º 1ã€‚å¯¹äºè¿™ç§åœºæ™¯ï¼Œç­”æ¡ˆæ˜¯ (1,1)ï¼Œè¿™å°±è¿èƒŒäº†çº¿æ€§ä¸€è‡´æ€§ã€‚å½’æ ¹ç©¶åº•è¿˜æ˜¯ç”±äºå¹‚ç­‰çš„ put(x,1) è¯·æ±‚åœ¨çŠ¶æ€æœºä¸Šæ‰§è¡Œäº†ä¸¤æ¬¡ï¼Œæœ‰ä¸¤ä¸ª LZ ç‚¹ã€‚å› æ­¤ï¼Œå³ä½¿å†™è¯·æ±‚çš„ä¸šåŠ¡è¯­ä¹‰èƒ½å¤Ÿä¿è¯å¹‚ç­‰ï¼Œä¸è¿›è¡Œé¢å¤–çš„å¤„ç†è®©å…¶é‡å¤æ‰§è¡Œå¤šæ¬¡ä¹Ÿä¼šç ´åçº¿æ€§ä¸€è‡´æ€§ã€‚å½“ç„¶ï¼Œè¯»è¯·æ±‚ç”±äºä¸æ”¹å˜ç³»ç»Ÿçš„çŠ¶æ€ï¼Œé‡å¤æ‰§è¡Œå¤šæ¬¡æ˜¯æ²¡é—®é¢˜çš„ã€‚...</p></div><footer class=entry-footer><span title='2023-02-14 11:16:53 +0800 +0800'>2023-02-14</span>&nbsp;Â·&nbsp;6 min&nbsp;Â·&nbsp;Reid</footer><a class=entry-link aria-label="post link to MIT6.824 2022 Lab3 RaftKV" href=https://reid00.github.io/posts/mit6.824-2022-lab3-raftkv/></a></article><article class=post-entry><header class=entry-header><h2>Raft Etcd ä¹‹ Linearizable Read</h2></header><div class=entry-content><p>ä»‹ç» linearizable read ç®€å•çš„è¯´å°±æ˜¯ä¸è¿”å› stale æ•°æ®ï¼Œå…·ä½“å¯ä»¥å‚è€ƒStrong consistency models
Read Index æœºåˆ¶å°±æ˜¯ Leader åœ¨æ”¶åˆ°è¯»è¯·æ±‚æ—¶è¿›è¡Œå¦‚ä¸‹å‡ æ­¥ï¼š
å¦‚æœ Leader åœ¨å½“å‰ä»»æœŸè¿˜æ²¡æœ‰æäº¤è¿‡æ—¥å¿—ï¼Œå…ˆæäº¤ä¸€æ¡ç©ºæ—¥å¿— Leader ä¿å­˜è®°å½•å½“å‰ commit index ä½œä¸º readIndex é€šè¿‡å¿ƒè·³ï¼Œè¯¢é—®æˆå‘˜è‡ªå·±è¿˜æ˜¯ä¸æ˜¯ Leaderï¼Œå¦‚æœæ”¶åˆ°è¿‡åŠçš„ç¡®è®¤ï¼Œåˆ™å¯ç¡®ä¿¡è‡ªå·±ä»æ˜¯ Leader ç­‰å¾… Apply Index è¶…è¿‡ readIndex è¯»å–æ•°æ®ï¼Œå“åº” Client etcdä¸ä»…å®ç°äº†leaderä¸Šçš„read only queryï¼ŒåŒæ—¶ä¹Ÿå®ç°äº†followerä¸Šçš„read only queryï¼ŒåŸç†æ˜¯ä¸€æ ·çš„ï¼Œåªä¸è¿‡è¯»è¯·æ±‚åˆ°è¾¾followeræ—¶ï¼Œcommit indexæ˜¯éœ€è¦å‘leaderå»è¦çš„ï¼Œleaderè¿”å›commit indexç»™followerä¹‹å‰ï¼ŒåŒæ ·ï¼Œéœ€è¦èµ°ä¸Šé¢çš„ReadIndexæµç¨‹ï¼Œå› ä¸ºleaderåŒæ ·éœ€è¦checkè‡ªå·±åˆ°åº•è¿˜æ˜¯ä¸æ˜¯leader
ReadIndex æ€è·¯ åœ¨è®ºæ–‡ä¸­ ç¬¬å…«èŠ‚ï¼Œpage13 æœ‰æåˆ°è¿‡å¤§æ¦‚æ€è·¯:
Read-only operations can be handled without writing anything into the log. However, with no additional measures, this would run the risk of returning stale data, since the leader responding to the request might have been superseded by a newer leader of which it is unaware....</p></div><footer class=entry-footer><span title='2023-02-10 14:40:20 +0800 +0800'>2023-02-10</span>&nbsp;Â·&nbsp;2 min&nbsp;Â·&nbsp;Reid</footer><a class=entry-link aria-label="post link to Raft Etcd ä¹‹ Linearizable Read" href=https://reid00.github.io/posts/raft-etcd-%E4%B9%8Blinearizable-read/></a></article><article class=post-entry><header class=entry-header><h2>Multi Raft</h2></header><div class=entry-content><p>Mulit Raft Group é€šè¿‡å¯¹ Raft åè®®çš„æè¿°æˆ‘ä»¬çŸ¥é“ï¼šç”¨æˆ·åœ¨å¯¹ä¸€ç»„ Raft ç³»ç»Ÿè¿›è¡Œæ›´æ–°æ“ä½œæ—¶å¿…é¡»å…ˆç»è¿‡ Leaderï¼Œå†ç”± Leader åŒæ­¥ç»™å¤§å¤šæ•° Followerã€‚è€Œåœ¨å®é™…è¿ç”¨ä¸­ï¼Œä¸€ç»„ Raft çš„ Leader å¾€å¾€å­˜åœ¨å•ç‚¹çš„æµé‡ç“¶é¢ˆï¼Œæµé‡é«˜ä¾¿æ— æ³•æ‰¿è½½ï¼ŒåŒæ—¶æ¯ä¸ªèŠ‚ç‚¹éƒ½æ˜¯å…¨é‡æ•°æ®ï¼Œæ‰€ä»¥ä¼šå—åˆ°èŠ‚ç‚¹çš„å­˜å‚¨é™åˆ¶è€Œå¯¼è‡´å®¹é‡ç“¶é¢ˆï¼Œæ— æ³•æ‰©å±•ã€‚
Mulit Raft Group æ­£æ˜¯é€šè¿‡æŠŠæ•´ä¸ªæ•°æ®ä»æ¨ªå‘åšåˆ‡åˆ†ï¼Œåˆ†ä¸ºå¤šä¸ª Region æ¥è§£å†³ç£ç›˜ç“¶é¢ˆï¼Œç„¶åæ¯ä¸ª Region éƒ½å¯¹åº”æœ‰ç‹¬ç«‹çš„ Leader å’Œä¸€ä¸ªæˆ–å¤šä¸ª Follower çš„ Raft ç»„è¿›è¡Œæ¨ªå‘æ‰©å±•ï¼Œæ­¤æ—¶ç³»ç»Ÿä¾¿æœ‰å¤šä¸ªå†™å…¥çš„èŠ‚ç‚¹ï¼Œä»è€Œåˆ†æ‹…å†™å…¥å‹åŠ›ï¼Œå›¾å¦‚ä¸‹ï¼š å…·ä½“ç»†èŠ‚å¯ä»¥å‚è€ƒTiKV çš„æ–‡ç« 
Multi-Raftéœ€è¦è§£å†³çš„ä¸€äº›æ ¸å¿ƒé—®é¢˜ï¼š æ•°æ®ä½•å¦‚åˆ†ç‰‡ åˆ†ç‰‡ä¸­çš„æ•°æ®è¶Šæ¥è¶Šå¤§ï¼Œéœ€è¦åˆ†è£‚äº§ç”Ÿæ›´å¤šçš„åˆ†ç‰‡ï¼Œç»„æˆæ›´å¤šRaft-Group åˆ†ç‰‡çš„è°ƒåº¦ï¼Œè®©è´Ÿè½½åœ¨ç³»ç»Ÿä¸­æ›´å¹³å‡ï¼ˆåˆ†ç‰‡å‰¯æœ¬çš„è¿ç§»ï¼Œè¡¥å…¨ï¼ŒLeaderåˆ‡æ¢ç­‰ç­‰ï¼‰ ä¸€ä¸ªèŠ‚ç‚¹ä¸Šï¼Œæ‰€æœ‰çš„Raft-Groupå¤ç”¨é“¾æ¥ï¼ˆå¦åˆ™Raftå‰¯æœ¬ä¹‹é—´ä¸¤ä¸¤å»ºé“¾ï¼Œé“¾æ¥çˆ†ç‚¸äº†ï¼‰ å¦‚ä½•å¤„ç†staleçš„è¯·æ±‚ï¼ˆä¾‹å¦‚Proposalå’ŒApplyçš„æ—¶å€™ï¼Œå½“å‰çš„å‰¯æœ¬ä¸æ˜¯Leaderã€åˆ†è£‚äº†ã€è¢«é”€æ¯äº†ç­‰ç­‰ï¼‰ Snapshotå¦‚ä½•ç®¡ç†ï¼ˆé™åˆ¶Snapshotï¼Œé¿å…å¸¦å®½ã€CPUã€IOèµ„æºè¢«è¿‡åº¦å ç”¨ï¼‰ æ•°æ®ä½•å¦‚åˆ†ç‰‡ é€šå¸¸çš„æ•°æ®åˆ†ç‰‡ç®—æ³•å°±æ˜¯ Hash å’Œ Rangeï¼ŒTiKV ä½¿ç”¨çš„ Range æ¥å¯¹æ•°æ®è¿›è¡Œæ•°æ®åˆ†ç‰‡ã€‚ä¸ºä»€ä¹ˆä½¿ç”¨ Rangeï¼Œä¸»è¦åŸå› æ˜¯èƒ½æ›´å¥½çš„å°†ç›¸åŒå‰ç¼€çš„ key èšåˆåœ¨ä¸€èµ·ï¼Œä¾¿äº scan ç­‰æ“ä½œï¼Œè¿™ä¸ª Hash æ˜¯æ²¡æ³•æ”¯æŒçš„ï¼Œå½“ç„¶ï¼Œåœ¨ split/merge ä¸Šé¢ Range ä¹Ÿæ¯” Hash å¥½å¤„ç†å¾ˆå¤šï¼Œå¾ˆå¤šæ—¶å€™åªä¼šæ¶‰åŠåˆ°å…ƒä¿¡æ¯çš„ä¿®æ”¹ï¼Œéƒ½ä¸ç”¨å¤§èŒƒå›´çš„æŒªåŠ¨æ•°æ®ã€‚
å½“ç„¶ï¼ŒRange æœ‰ä¸€ä¸ªé—®é¢˜åœ¨äºå¾ˆæœ‰å¯èƒ½æŸä¸€ä¸ª Region ä¼šå› ä¸ºé¢‘ç¹çš„æ“ä½œæˆä¸ºæ€§èƒ½çƒ­ç‚¹ï¼Œå½“ç„¶ä¹Ÿæœ‰ä¸€äº›ä¼˜åŒ–çš„æ–¹å¼ï¼Œè­¬å¦‚é€šè¿‡ PD å°†è¿™äº› Region è°ƒåº¦åˆ°æ›´å¥½çš„æœºå™¨ä¸Šé¢ï¼Œæä¾› Follower åˆ†æ‹…è¯»å‹åŠ›ç­‰ã€‚...</p></div><footer class=entry-footer><span title='2023-02-10 13:36:34 +0800 +0800'>2023-02-10</span>&nbsp;Â·&nbsp;1 min&nbsp;Â·&nbsp;Reid</footer><a class=entry-link aria-label="post link to Multi Raft" href=https://reid00.github.io/posts/multi-raft/></a></article><article class=post-entry><header class=entry-header><h2>MIT6.824 2022 Raft Lab2C Log Compaction</h2></header><div class=entry-content><p>ä»‹ç» å¯¹Raft Figure2 ä¸­éœ€è¦æŒä¹…åŒ–çš„å­—æ®µè¿›è¡Œä¿å­˜ã€‚
å®Œæˆpersist()å’ŒreadPersist()å‡½æ•°ï¼Œç¼–ç æ–¹å¼å‚ç…§æ³¨é‡Š ä¼˜åŒ–nextIndex[]å›é€€æ–¹å¼ï¼Œå¦åˆ™æ— æ³•é€šè¿‡æ‰€æœ‰æµ‹è¯• æç¤º:
éœ€è¦æŒä¹…åŒ–çš„éƒ¨åˆ†åŒ…æ‹¬currentTermã€votedForã€logã€‚ æœ‰å…³nextIndex[]å›é€€ä¼˜åŒ– é€»è¾‘å¦‚ä¸‹ï¼š è‹¥ follower æ²¡æœ‰ prevLogIndex å¤„çš„æ—¥å¿—ï¼Œåˆ™ç›´æ¥ç½® conflictIndex = len(log)ï¼ŒconflictTerm = Noneï¼› leader æ”¶åˆ°è¿”å›ä½“åï¼Œè‚¯å®šæ‰¾ä¸åˆ°å¯¹åº”çš„ termï¼Œåˆ™è®¾ç½®nextIndex = conflictIndexï¼› å…¶å®å°±æ˜¯ leader å¯¹åº”çš„ nextIndex ç›´æ¥å›é€€åˆ°è¯¥ follower çš„æ—¥å¿—æ¡ç›®æœ«å°¾å¤„ï¼Œå› ä¸º prevLogIndex è¶…å‰äº† è‹¥ follower æœ‰ prevLogIndex å¤„çš„æ—¥å¿—ï¼Œä½†æ˜¯ term ä¸åŒ¹é…ï¼›åˆ™è®¾ç½® conlictTermä¸º prevLogIndex å¤„çš„ termï¼Œä¸”è‚¯å®šå¯ä»¥æ‰¾åˆ°æ—¥å¿—ä¸­è¯¥ termå‡ºç°çš„ç¬¬ä¸€ä¸ªæ—¥å¿—æ¡ç›®çš„ä¸‹æ ‡ï¼Œå¹¶ç½®conflictIndex = firstIndexWithTermï¼› leader æ”¶åˆ°è¿”å›ä½“åï¼Œæœ‰å¯èƒ½æ‰¾ä¸åˆ°å¯¹åº”çš„ termï¼Œå³ leader å’Œ follower åœ¨conflictIndexå¤„ä»¥åŠä¹‹åçš„æ—¥å¿—éƒ½æœ‰å†²çªï¼Œéƒ½ä¸èƒ½è¦äº†ï¼Œç›´æ¥ç½®nextIndex = conflictIndex è‹¥æ‰¾åˆ°äº†å¯¹åº”çš„termï¼Œåˆ™æ‰¾åˆ°å¯¹åº”termå‡ºç°çš„æœ€åä¸€ä¸ªæ—¥å¿—æ¡ç›®çš„ä¸‹ä¸€ä¸ªæ—¥å¿—æ¡ç›®ï¼Œå³ç½®nextIndex = lastIndexWithTerm+1ï¼›è¿™é‡Œå…¶å®æ˜¯é»˜è®¤äº†è‹¥ leader å’Œ follower åŒæ—¶æ‹¥æœ‰è¯¥ term çš„æ—¥å¿—ï¼Œåˆ™ä¸ä¼šæœ‰å†²çªï¼Œç›´æ¥å–ä¸‹ä¸€ä¸ª term ä½œä¸ºæ—¥å¿—å‘èµ·å°±å¥½ï¼Œæ˜¯æºè‡ªäº 5.4 safety çš„å®‰å…¨æ€§ä¿è¯ å¦‚æœè¿˜æœ‰å†²çªï¼Œleader å’Œ follower ä¼šä¸€ç›´æ ¹æ®ä»¥ä¸Šè§„åˆ™å›æº¯ nextIndex...</p></div><footer class=entry-footer><span title='2023-02-09 17:48:58 +0800 +0800'>2023-02-09</span>&nbsp;Â·&nbsp;2 min&nbsp;Â·&nbsp;Reid</footer><a class=entry-link aria-label="post link to MIT6.824 2022 Raft Lab2C Log Compaction" href=https://reid00.github.io/posts/mit6.824-2022-raft-lab2c-log-compaction/></a></article><footer class=page-footer><nav class=pagination><a class=next href=https://reid00.github.io/page/2/>Next Â»</a></nav></footer></main><footer class=footer><span>&copy; 2023 <a href=https://reid00.github.io/>Reid's Blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>